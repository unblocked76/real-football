"use strict";var GLLibPlayer=gloft.Class.extend({posX:gloft.casttoint(null),posY:gloft.casttoint(null),curFlags:gloft.casttoint(null),sprite:null,curAnim:gloft.casttoint(null),curFrame:gloft.casttoint(null),curTime:gloft.casttoint(null),curAnimFrameDuration:gloft.casttoint(null),nbLoop:gloft.casttoint(null),animIsOver:gloft.casttoboolean(null),curBlend:gloft.casttoint(null),curScale:gloft.casttoint(null),palette:gloft.casttoint(null),m_frameMapping_config_sprite:null,m_frameMapping_config_palId:null,m_frameMapping_config_frameOff:null,ctor_dup_:function(){this.Reset()},ctor_dup_ASpriteII:function(c,b,a){if(14>1000){GLLib.Assert(false,"GLLibPlayer : Invalid value of GLLibConfig.sprite_animFPS > 1000")}this.Reset();this.posX=b;this.posY=a;this.SetSprite(c)},Reset:function(){this.posX=0;this.posY=0;this.curAnim=GLLibPlayer.k_AnimNone;this.curFrame=0;this.sprite=null;this.curFlags=0;this.curTime=0;this.nbLoop=1;this.palette=-1;this.animIsOver=true;if(true){this.curScale=-1}if(true){this.curBlend=-1}},SetPos:function(b,a){this.posX=b;this.posY=a},GetSprite:function(){return this.sprite},SetSprite:function(a){this.sprite=a;if(a!=null){this.SetAnim_dup_II(GLLibPlayer.k_AnimNone,-1)}else{this.curAnim=GLLibPlayer.k_AnimNone}},SetAnim_dup_I:function(a){GLLib.Warning("GLLibPlayer.SetAnim(int anim) . this function is deprecated, use GLLibPlayer.SetAnim(int anim, int nbLoop) instead");this.SetAnim_dup_II(a,-1)},SetAnim_dup_IIZ:function(d,c,a){if(a){this.SetAnim_dup_II(GLLibPlayer.k_AnimNone,1)}this.SetAnim_dup_II(d,c)},SetAnim_dup_II:function(b,a){this.SetAnim_dup_III(b,a,-1)},SetAnim_dup_III:function(a,c,b){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.SetAnim().sprite is not set")}if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.GetNbanim().sprite is not set")}if(a>=this.sprite.GetAnimationCount()){GLLib.Assert(false,"GLLibPlayer.SetAnim().anim out of range")}if(c==0){GLLib.Assert(false,"GLLibPlayer.SetAnim().nbLoop is invalid")}if(this.animIsOver||a!=this.curAnim){this.curAnim=a;this.curAnimFrameDuration=((b==-1)?GLLibPlayer.k_animBaseFrameTime:(gloft.casttoint(b/this.GetNbFrame_dup_Z(false))));this.SetFrame(0);this.nbLoop=c-1;this.animIsOver=false}},GetAnim:function(){return this.curAnim},SetFrame:function(b){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.SetFrame().sprite is not set")}if(b<0){GLLib.Assert(false,"GLLibPlayer.SetFrame().frame is negative")}if(this.curAnim<0){return -1}for(var a=this.GetNbFrame_dup_();b>a;b-=a){}this.curFrame=b;this.curTime=0;return b},RandomizeAnim:function(){this.curFrame=GLLib.Math_Rand(0,this.GetNbFrame_dup_());this.curTime=0},GetFrame:function(){return this.curFrame},GetAnimFrame:function(){if(this.sprite==null||this.curAnim==GLLibPlayer.k_AnimNone){return -1}return this.sprite.GetAnimFrame(this.curAnim,this.curFrame)},SetTransform:function(a){switch(a){case 0:this.curFlags=0;break;case 2:this.curFlags=1;break;case 1:this.curFlags=2;break;case 3:this.curFlags=3;break;case 5:this.curFlags=4;break;case 6:this.curFlags=7;break;case 7:this.curFlags=6;break;case 4:this.curFlags=5;break}},GetTransform:function(){switch(this.curFlags){case 0:return 0;case 1:return 2;case 2:return 1;case 3:return 3;case 4:return 5;case 7:return 6;case 6:return 7;case 5:return 4;default:return -1}},SetPalette:function(a){this.palette=a},GetPalette:function(){return this.palette},GetNumLoops:function(){return this.nbLoop},GetNbFrame_dup_:function(){return this.GetNbFrame_dup_Z(true)},GetNbFrame_dup_Z:function(a){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.GetNbFrame().sprite is not set")}if(this.curAnim<0){return -1}if(a){return this.sprite.GetAFrames(this.curAnim)}var d=0;for(var c=0;c<this.sprite.GetAFrames(this.curAnim);++c){d+=this.sprite.GetAFrameTime(this.curAnim,c)}return d},GetDuration:function(){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.GetDuration().sprite is not set")}if(this.curAnim>=0){return this.sprite.GetAFrameTime(this.curAnim,this.curFrame)*this.curAnimFrameDuration}return 0},GetCurrentFrameMarkers_dup_:function(){return this.sprite.GetAFrameMarkers(this.curAnim,this.curFrame,null,0,-1)},GetCurrentFrameMarkers_dup_aI:function(a){return this.sprite.GetAFrameMarkers(this.curAnim,this.curFrame,a,0,-1)},GetCurrentFrameMarkers_dup_aII:function(b,a){return this.sprite.GetAFrameMarkers(this.curAnim,this.curFrame,b,0,a)},GetCurrentFrameMarkers_dup_aIII:function(c,b,a){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.GetMarkers:sprite is not set")}return this.sprite.GetAFrameMarkers(this.curAnim,this.curFrame,c,b,a)},IsAnimOver:function(){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.isAnimOver().sprite is not set")}return this.curAnim<0||(this.nbLoop>=0&&this.animIsOver)},Render:function(){if(this.sprite==null){GLLib.Assert(false,"GLLibPlayer.render().sprite is not set")}if(this.curAnim<0){return}if(!true&&this.animIsOver){return}if(true||true){if(true&&this.curScale!=-1&&this.curScale!=100){GLLib.PFX_EnableEffect(13,false);var b=this.curScale;GLLib.PFX_SetParam(13,1,b);GLLib.PFX_SetParam(13,3,b);GLLib.PFX_SetParam(13,4,b);if(true&&this.curBlend!=-1){GLLib.PFX_SetParam(13,2,this.curBlend)}}else{if(true&&this.curBlend!=-1){GLLib.PFX_EnableEffect(12,false);GLLib.PFX_SetParam(12,1,this.curBlend)}}}if(false){this.ApplyFrameMapping()}if(this.palette!=-1){var a=this.sprite.GetCurrentPalette_dup_();this.sprite.SetCurrentPalette_dup_I(this.palette);this.sprite.PaintAFrame(GLLib.g,this.curAnim,this.curFrame,this.posX,this.posY,this.curFlags,0,0);this.sprite.SetCurrentPalette_dup_I(a)}else{this.sprite.PaintAFrame(GLLib.g,this.curAnim,this.curFrame,this.posX,this.posY,this.curFlags,0,0)}if(true||true){GLLib.s_PFX_type&=-260065}},Update_dup_:function(){GLLib.Warning("GLLibPlayer.Update() . this function is deprecated, use GLLibPlayer.Update(int DT) instead");if(14==1000){this.Update_dup_I(1)}else{this.Update_dup_I(GLLib.s_game_frameDT)}},Update_dup_I:function(b){if(b<0){GLLib.Assert(false,"GLLibPlayer.Update.DT is negative")}if(14==1000){if(b>1){GLLib.Warning("GLLibPlayer.Update was called with DT larger than 1, the player is currently working as Frame Based Player")}}else{if(b==1){GLLib.Warning("GLLibPlayer.Update was called with DT equal 1, the player is currently working as a Time Based Player, it should be more than 1 ms ?")}}if(this.animIsOver||this.curAnim<0){return}var a=this.GetDuration();if(true){if(a==0){return}}else{if(a==0){GLLib.Assert(false,"GLLibPlayer.Update.frame "+this.curFrame+" of animation "+this.curAnim+" has a duration of 0")}}if(true){if(this.curTime>=a){this.curTime-=a;if(this.curFrame<this.sprite.GetAFrames(this.curAnim)-1){++this.curFrame}else{if(this.nbLoop==0){this.animIsOver=true}else{if(this.nbLoop>0){--this.nbLoop}this.curFrame=0}}}}else{while(this.curTime>=a){this.curTime-=a;if(this.curFrame<this.sprite.GetAFrames(this.curAnim)-1){++this.curFrame}else{if(this.nbLoop==0){this.animIsOver=true;break}if(this.nbLoop>0){--this.nbLoop}this.curFrame=0}a=this.GetDuration();if(true&&a==0){break}}}this.curTime+=b},GetScale:function(){if(true){return this.curScale}GLLib.Dbg("GetScale: Scaling is not enabled, you must set pfx_useSpriteEffectScale to TRUE!");return 0},SetScale:function(a){if(true){this.curScale=a}else{GLLib.Dbg("SetScale: Scaling is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},GetBlend:function(){if(true){return this.curBlend}GLLib.Dbg("GetBlend: Scaling is not enabled, you must set pfx_useSpriteEffectBlend to TRUE!");return 0},SetBlend:function(a){if(true){this.curBlend=a}else{GLLib.Dbg("SetBlend: Scaling is not enabled, you must pfx_useSpriteEffectBlend to TRUE!")}},InitFrameMapping:function(a){if(!false){GLLib.Assert(false,"GLLibPlayer.InitFrameMapping: you should enable sprite_useFrameMapping for using this functionality.")}if(false){this.m_frameMapping_config_sprite=gloft.ArrayCreation([a],null);this.m_frameMapping_config_palId=gloft.ArrayCreation([a],gloft.casttobyte(null));this.m_frameMapping_config_frameOff=gloft.ArrayCreation([a],gloft.casttoshort(null))}},ReleaseFrameMapping:function(){if(!false){GLLib.Assert(false,"GLLibPlayer.ReleaseFrameMapping: you should enable sprite_useFrameMapping for using this functionality.")}if(false){this.m_frameMapping_config_sprite=null;this.m_frameMapping_config_palId=null;this.m_frameMapping_config_frameOff=null}},SetFrameMappingConfigAsHidden:function(a){if(false){this.SetFrameMappingConfig(a,null,0,0)}},SetFrameMappingConfig:function(d,c,b,a){if(!false){GLLib.Assert(false,"GLLibPlayer.SetFrameMappingConfig: you should enable sprite_useFrameMapping for using this functionality.")}if(this.m_frameMapping_config_sprite==null||d>=this.m_frameMapping_config_sprite.length){GLLib.Assert(false,"GLLibPlayer.SetFrameMappingConfig: frame mapping data is not set or it has not the correct size.")}if(false){this.m_frameMapping_config_sprite[d]=c;this.m_frameMapping_config_palId[d]=gloft.casttobyte(b);this.m_frameMapping_config_frameOff[d]=gloft.casttoshort(a)}},ApplyFrameMapping:function(){if(!false){GLLib.Assert(false,"GLLibPlayer.IsFrameMappingEnabled: you should enable sprite_useFrameMapping for using this functionality.")}if(false&&this.m_frameMapping_config_sprite!=null){var e=this.sprite;var c=this.m_frameMapping_config_sprite;var g=this.m_frameMapping_config_palId;var b=this.m_frameMapping_config_frameOff;var d=g;var a=c;var f=e;if(!false){GLLib.Assert(false,"ASprite.SetFrameMappingData: you should enable sprite_useFrameMapping for using this functionality.")}if(false){f._frameMapping_config_sprite=a;f._frameMapping_config_palId=d;f._frameMapping_config_frameOff=b}}},run:function(){while(GLLibPlayer.s_pThread!=null){GLLibPlayer.Snd_Update_Exec();try{if(false&&!true){if(GLLib.s_game_isPaused){this.wait()}}java.lang.Thread.sleep(gloft.casttoint(1000/14))}catch(a){a.printStackTrace()}}},});GLLibPlayer.k_animBaseFrameTime=gloft.casttoint(null);GLLibPlayer.k_AnimNone=gloft.casttoint(null);GLLibPlayer.k_snd_nbChannel=gloft.casttoint(null);GLLibPlayer.k_snd_nbMidiChannel=16;GLLibPlayer.k_snd_max_volume=100;GLLibPlayer.k_snd_command_dummy=0;GLLibPlayer.k_snd_command_prepare=1;GLLibPlayer.k_snd_command_free=2;GLLibPlayer.k_snd_command_play=3;GLLibPlayer.k_snd_command_stop=4;GLLibPlayer.k_snd_command_pause=5;GLLibPlayer.k_snd_command_resume=6;GLLibPlayer.k_snd_command_amount=7;GLLibPlayer.k_snd_state_unprepared=0;GLLibPlayer.k_snd_state_ready=1;GLLibPlayer.k_snd_state_playing=2;GLLibPlayer.k_snd_state_paused=3;GLLibPlayer.k_snd_queue_command=0;GLLibPlayer.k_snd_queue_index=1;GLLibPlayer.k_snd_queue_priority=2;GLLibPlayer.k_snd_queue_volume=3;GLLibPlayer.k_snd_queue_loop=4;GLLibPlayer.k_snd_queue_size=5;GLLibPlayer.k_snd_fade_command=0;GLLibPlayer.k_snd_fade_final_value=1;GLLibPlayer.k_snd_fade_speed=2;GLLibPlayer.k_snd_fade_size=3;GLLibPlayer.k_snd_fade_crt_volume=3;GLLibPlayer.k_snd_fade_minActiveLength=4;GLLibPlayer.k_snd_fade_maxActiveLength=5;GLLibPlayer.k_snd_fade_minSilentLength=6;GLLibPlayer.k_snd_fade_maxSilentLength=7;GLLibPlayer.k_snd_fade_activeTimer=8;GLLibPlayer.k_snd_fade_midi_size=9;GLLibPlayer.k_snd_fade_command_None=0;GLLibPlayer.k_snd_fade_command_Maintain=1;GLLibPlayer.k_snd_fade_command_FadeMidiChannelVolume=2;GLLibPlayer.k_snd_fade_command_FadeVolume=3;GLLibPlayer.k_snd_fade_command_FadeOutAndStop=4;GLLibPlayer.k_snd_fade_command_FadeTempo=5;GLLibPlayer.k_snd_fade_command_RandomlyActivateMidiChannelOn=6;GLLibPlayer.k_snd_fade_command_RandomlyActivateMidiChannelOff=7;GLLibPlayer.k_snd_fade_loopingfix_state_Normal=0;GLLibPlayer.k_snd_fade_loopingfix_state_LoopTransition=1;GLLibPlayer.k_snd_fade_loopingfix_state_StopDetected=2;GLLibPlayer.k_snd_fade_loopingfix_state_Restarted=3;GLLibPlayer.k_snd_max_midi_channel_volume=127;GLLibPlayer.k_snd_same_tempo_threshold=500;GLLibPlayer.k_snd_priority_highest=0;GLLibPlayer.k_snd_priority_normal=7;GLLibPlayer.k_snd_priority_lowest=15;GLLibPlayer.s_snd_masterVolume=gloft.casttoint(null);GLLibPlayer.s_snd_maxNbSoundSlot=gloft.casttoint(null);GLLibPlayer.s_snd_isSoundEngineInitialized=gloft.casttoboolean(null);GLLibPlayer.s_snd_sndSlot=null;GLLibPlayer.s_snd_sndType=null;GLLibPlayer.s_snd_sndDuration=null;GLLibPlayer.s_snd_sndResourceURL=null;GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=gloft.casttoboolean(null);GLLibPlayer.s_snd_Player=null;GLLibPlayer.s_snd_PlayerSlot=null;GLLibPlayer.s_snd_PlayerSlotMultiple=null;GLLibPlayer.s_snd_playTime=null;GLLibPlayer.s_snd_index=null;GLLibPlayer.s_snd_priority=null;GLLibPlayer.s_snd_state=null;GLLibPlayer.s_snd_volume=null;GLLibPlayer.s_snd_loop=null;GLLibPlayer.s_pThread=null;GLLibPlayer.s_pSoundPlayerIns=null;GLLibPlayer.s_snd_queue=null;GLLibPlayer.s_snd_queue_pointer=null;GLLibPlayer.s_snd_queue_size=null;GLLibPlayer.s_snd_queue_priority=null;GLLibPlayer.s_snd_bInUpdate=gloft.casttoboolean(null);GLLibPlayer.s_snd_requestBuffer=null;GLLibPlayer.s_snd_fade=null;GLLibPlayer.s_snd_fadeTempo=null;GLLibPlayer.s_snd_fadeMidi=null;GLLibPlayer.s_snd_MidiChannelActiveFlags=null;GLLibPlayer.s_snd_fadeParamsNeedRefresh=null;GLLibPlayer.s_snd_fadeLoopingFixState=null;GLLibPlayer.s_snd_fadeDeltaTime=gloft.casttoint(null);GLLibPlayer.s_data_mimeType=null;GLLibPlayer.m_adpcm_index=null;GLLibPlayer.m_adpcm_data=null;GLLibPlayer.k_ADPCM_OUTPUT_EIGHT_BIT_SAMPLE_SIZE=1;GLLibPlayer.k_ADPCM_OUTPUT_SIXTEEN_BIT_SAMPLE_SIZE=2;GLLibPlayer.k_ADPCM_DEFAULT_OUTPUT_SAMPLE_SIZE=1;GLLibPlayer.k_ADPCM_WAV_HEADER_SIZE=44;GLLibPlayer.k_ADPCM_NB_SAMPLE_PER_BLOCK=505;GLLibPlayer.k_ADPCM_SAMPLE_SIZE_8=1;GLLibPlayer.k_ADPCM_SAMPLE_SIZE_16=2;GLLibPlayer.k_ADPCM_HEADER_OFFSET=0;GLLibPlayer.k_ADPCM_HEADER_SIZE=40;GLLibPlayer.k_ADPCM_DVI_ADPCM_BLOCK_SIZE=256;GLLibPlayer.k_WAV_CHUNK_ID_BYTE_OFFSET=0;GLLibPlayer.k_WAV_CHUNK_ID_BYTE_SIZE=4;GLLibPlayer.k_WAV_CHUNK_SIZE_BYTE_OFFSET=4;GLLibPlayer.k_WAV_CHUNK_SIZE_BYTE_SIZE=4;GLLibPlayer.k_WAV_FORMAT_BYTE_OFFSET=8;GLLibPlayer.k_WAV_FORMAT_BYTE_SIZE=4;GLLibPlayer.k_WAV_SUBCHUNK_1_ID_BYTE_OFFSET=12;GLLibPlayer.k_WAV_SUBCHUNK_1_ID_BYTE_SIZE=4;GLLibPlayer.k_WAV_SUBCHUNK_1_SIZE_BYTE_OFFSET=16;GLLibPlayer.k_WAV_SUBCHUNK_1_SIZE_BYTE_SIZE=4;GLLibPlayer.k_WAV_AUDIO_FORMAT_BYTE_OFFSET=20;GLLibPlayer.k_WAV_AUDIO_FORMAT_BYTE_SIZE=2;GLLibPlayer.k_WAV_NUM_CHANNELS_BYTE_OFFSET=22;GLLibPlayer.k_WAV_NUM_CHANNELS_BYTE_SIZE=2;GLLibPlayer.k_WAV_SAMPLE_RATE_BYTE_OFFSET=24;GLLibPlayer.k_WAV_SAMPLE_RATE_BYTE_SIZE=4;GLLibPlayer.k_WAV_BYTE_RATE_BYTE_OFFSET=28;GLLibPlayer.k_WAV_BYTE_RATE_BYTE_SIZE=4;GLLibPlayer.k_WAV_BLOCK_ALIGN_BYTE_OFFSET=32;GLLibPlayer.k_WAV_BLOCK_ALIGN_BYTE_SIZE=2;GLLibPlayer.k_WAV_BITS_PER_SAMPLE_BYTE_OFFSET=34;GLLibPlayer.k_WAV_BITS_PER_SAMPLE_BYTE_SIZE=2;GLLibPlayer.k_WAV_SUB_CHUNK_2_ID_BYTE_OFFSET=36;GLLibPlayer.k_WAV_SUB_CHUNK_2_ID_BYTE_SIZE=4;GLLibPlayer.k_WAV_SUB_CHUNK_2_SIZE_BYTE_OFFSET=40;GLLibPlayer.k_WAV_SUB_CHUNK_2_SIZE_BYTE_SIZE=4;GLLibPlayer.k_WAV_DATA_BYTE_OFFSET=60;GLLibPlayer.WRAP_CLAMP=0;GLLibPlayer.WRAP_REPEAT=1;GLLibPlayer.WRAP_NONE=2;GLLibPlayer.TILESET_EFFECT_NONE=0;GLLibPlayer.TILESET_EFFECT_NORMAL=1;GLLibPlayer.TILESET_EFFECT_ADDITIVE=2;GLLibPlayer.TILESET_EFFECT_MULTIPLICATIVE=3;GLLibPlayer.TILESET_EFFECT_OVERLAY=4;GLLibPlayer.TILESET_EFFECT_COLORDODGE=5;GLLibPlayer.TILESET_BACKBUFFER_PAINT_FRAME=0;GLLibPlayer.TILESET_BACKBUFFER_PAINT_DRAW_RECT=1;GLLibPlayer.TILESET_BACKBUFFER_PAINT_FILL_RECT=2;GLLibPlayer.TILESET_BACKBUFFER_PAINT_ALPHA_RECT=3;GLLibPlayer.s_bTilesetPlayerInitialized=gloft.casttoboolean(null);GLLibPlayer.s_TilesetMaxLayerCount=gloft.casttoint(null);GLLibPlayer.s_TilesetEffectLayer=gloft.casttoint(null);GLLibPlayer.s_TilesetAlphaLayer=gloft.casttoint(null);GLLibPlayer.s_TilesetEffectType=gloft.casttoint(null);GLLibPlayer.k_TilesetInfoDestWidth=0;GLLibPlayer.k_TilesetInfoDestHeight=1;GLLibPlayer.k_TilesetInfoTileWidth=2;GLLibPlayer.k_TilesetInfoTileWidthShift=3;GLLibPlayer.k_TilesetInfoTileWidthMask=4;GLLibPlayer.k_TilesetInfoTileHeight=5;GLLibPlayer.k_TilesetInfoTileHeightShift=6;GLLibPlayer.k_TilesetInfoTileHeightMask=7;GLLibPlayer.k_TilesetInfoCOUNT=8;GLLibPlayer.k_TilesetLayerInitialized=0;GLLibPlayer.k_TilesetLayerEnabled=1;GLLibPlayer.k_TilesetLayerTileCountWidth=2;GLLibPlayer.k_TilesetLayerTileCountHeight=3;GLLibPlayer.k_TilesetLayerMultiSpriteShift=4;GLLibPlayer.k_TilesetLayerWidth=5;GLLibPlayer.k_TilesetLayerHeight=6;GLLibPlayer.k_TilesetLayerCBWidth=7;GLLibPlayer.k_TilesetLayerCBHeight=8;GLLibPlayer.k_TilesetLayerFirstTileX=9;GLLibPlayer.k_TilesetLayerFirstTileY=10;GLLibPlayer.k_TilesetLayerLastTileX=11;GLLibPlayer.k_TilesetLayerLastTileY=12;GLLibPlayer.k_TilesetLayerCamX=13;GLLibPlayer.k_TilesetLayerCamY=14;GLLibPlayer.k_TilesetLayerFlag=15;GLLibPlayer.k_TilesetLayerCamOffX=16;GLLibPlayer.k_TilesetLayerCamOffY=17;GLLibPlayer.k_TilesetLayerAreaFakeW=18;GLLibPlayer.k_TilesetLayerAreaFakeH=19;GLLibPlayer.k_TilesetLayerUseRleCompressed=20;GLLibPlayer.k_TilesetRleCatchedBufferX=21;GLLibPlayer.k_TilesetRleCatchedBufferY=22;GLLibPlayer.k_TilesetRleCatchedBufferAddationWidth=23;GLLibPlayer.k_TilesetRleCatchedBufferAddationHeight=24;GLLibPlayer.k_TilesetRleCatchedBufferWidth=25;GLLibPlayer.k_TilesetRleCatchedBufferHeight=26;GLLibPlayer.k_TilesetRleCatchedBufferInArrayStartX=27;GLLibPlayer.k_TilesetRleCatchedBufferInArrayStartY=28;GLLibPlayer.k_TilesetLayerCOUNT=gloft.casttoint(null);GLLibPlayer.k_TilesetLayerPaddingLeft=0;GLLibPlayer.k_TilesetLayerPaddingRight=1;GLLibPlayer.k_TilesetLayerPaddingTop=2;GLLibPlayer.k_TilesetLayerPaddingBottom=3;GLLibPlayer.k_TilesetLayerPaddingColor=4;GLLibPlayer.k_TilesetLayerPaddingCOUNT=5;GLLibPlayer.k_TilesetEmptyLayerHMargin=2;GLLibPlayer.k_TilesetEmptyLayerVMargin=3;GLLibPlayer.k_TilesetEmptyLayerCleanColor=4;GLLibPlayer.k_TilesetEmptyLayerOriginX=5;GLLibPlayer.k_TilesetEmptyLayerOriginY=6;GLLibPlayer.k_TilesetEmptyLayerRefreshAll=9;GLLibPlayer.k_TilesetEmptyWasWholeBufferRefreshed=10;GLLibPlayer.k_TilesetMapSizeTileCountWidth=0;GLLibPlayer.k_TilesetMapSizeTileCountHeight=2;GLLibPlayer.k_TilesetMapSizeMultiSpriteShift=4;GLLibPlayer.k_TilesetLayerImageCB=0;GLLibPlayer.k_TilesetLayerImageCOUNT=1;GLLibPlayer.k_TilesetLayerGraphicsCB=0;GLLibPlayer.k_TilesetLayerGraphicsCOUNT=1;GLLibPlayer.k_TilesetLayerDataMap=0;GLLibPlayer.k_TilesetLayerDataFlip=1;GLLibPlayer.k_TilesetLayerDataCOUNT=2;GLLibPlayer.k_TilesetLayerAreaInfoX=0;GLLibPlayer.k_TilesetLayerAreaInfoY=1;GLLibPlayer.k_TilesetLayerAreaInfoW=2;GLLibPlayer.k_TilesetLayerAreaInfoH=3;GLLibPlayer.k_TilesetLayerAreaInfoCOUNT=4;GLLibPlayer.k_TilesetLayerAreaCount=gloft.casttoint(null);GLLibPlayer.s_TilesetInfo=null;GLLibPlayer.s_TilesetLayerInfo=null;GLLibPlayer.s_TilesetLayerData=null;GLLibPlayer.s_TilesetLayerImage=null;GLLibPlayer.s_TilesetLayerGraphics=null;GLLibPlayer.s_TilesetLayerDataMapBuffer=null;GLLibPlayer.s_TilesetLayerDataFlipBuffer=null;GLLibPlayer.s_TilesetLayerInfoRle=null;GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex=null;GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft=null;GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight=null;GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft=null;GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight=null;GLLibPlayer.s_TilesetLayerPaddingInfo=null;GLLibPlayer.s_TilesetLayerLastUpdatedArea=null;GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex=gloft.casttoint(null);GLLibPlayer.s_TilesetSprite=null;GLLibPlayer.s_TilesetMultiSprites=null;GLLibPlayer.s_TilesetMasks=null;GLLibPlayer.k_Flag_WrappingX=1;GLLibPlayer.k_Flag_WrappingY=2;GLLibPlayer.k_Flag_UseCB=4;GLLibPlayer.k_Flag_Origin=8;GLLibPlayer.k_Flag_LimitCamX=16;GLLibPlayer.k_Flag_LimitCamY=32;GLLibPlayer.k_Flag_CreatedCB=64;GLLibPlayer.k_Flag_ManageUpdatedAreas=128;GLLibPlayer.k_Flag_EmptyTilemapLayer=256;GLLibPlayer.k_TilesetMultiBlockMapBlockColNum=0;GLLibPlayer.k_TilesetMultiBlockMapBlockRowNum=1;GLLibPlayer.k_TilesetMultiBlockBlockTileColNum=2;GLLibPlayer.k_TilesetMultiBlockBlockTileRowNum=3;GLLibPlayer.k_TilesetMultiBlockMapBlockNum=4;GLLibPlayer.k_TilesetMultiBlockInfoCount=5;GLLibPlayer.k_TilesetMultiBlockDataOffset=6;GLLibPlayer.s_TilesetMultiBlockHeadInfo=null;GLLibPlayer.s_TilesetMultiBlockBlockInfo=null;GLLibPlayer.s_TilesetMultiBlockLayerData=null;GLLibPlayer.s_TilesetMultiBlockBufferFirstIndex=gloft.casttoint(null);GLLibPlayer.Snd_GetPlayer=function(b){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetPlayer")}var a=null;if(true){if(true){if(GLLibPlayer.s_snd_PlayerSlotMultiple==null){GLLib.Assert(false,"Snd_GetPlayer: Player array is null! Must call Snd_Init")}if(b<0){GLLib.Assert(false,"Snd_GetPlayer: Index is negative ["+b+"]")}if(b>=GLLibPlayer.s_snd_maxNbSoundSlot){GLLib.Assert(false,"Snd_GetPlayer: Index ["+b+"] is out of range. Max slots is "+GLLibPlayer.s_snd_maxNbSoundSlot)}if(GLLibPlayer.s_snd_PlayerSlotMultiple[b]==null){a=null}else{a=GLLibPlayer.s_snd_PlayerSlotMultiple[b][0]}}else{if(GLLibPlayer.s_snd_PlayerSlot==null){GLLib.Assert(false,"Snd_GetPlayer: Player array is null! Must call Snd_Init")}if(b<0){GLLib.Assert(false,"Snd_GetPlayer: Index is negative ["+b+"]")}if(b>=GLLibPlayer.s_snd_maxNbSoundSlot){GLLib.Assert(false,"Snd_GetPlayer: Index ["+b+"] is out of range. Max slots is "+GLLibPlayer.s_snd_maxNbSoundSlot)}a=GLLibPlayer.s_snd_PlayerSlot[b]}}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_GetChannelPlayer=function(b){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetChannelPlayer")}var a=null;if(true){if(GLLibPlayer.s_snd_Player==null){GLLib.Assert(false,"Snd_GetChannelPlayer: Player array is null! Must call Snd_Init")}if(b<0){GLLib.Assert(false,"Snd_GetChannelPlayer: Index is negative ["+b+"]")}if(b>=GLLibPlayer.k_snd_nbChannel){GLLib.Assert(false,"Snd_GetChannelPlayer: Index ["+b+"] is out of range. Max channels is "+GLLibPlayer.k_snd_nbChannel)}a=GLLibPlayer.s_snd_Player[b]}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_GetFreePlayer=function(k){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetFreePlayer")}var g=null;if(true){if(true){if(GLLibPlayer.s_snd_PlayerSlotMultiple==null){GLLib.Assert(false,"Snd_GetPlayer: Player array is null! Must call Snd_Init")}if(k<0){GLLib.Assert(false,"Snd_GetPlayer: Index is negative ["+k+"]")}if(k>=GLLibPlayer.s_snd_maxNbSoundSlot){GLLib.Assert(false,"Snd_GetPlayer: Index ["+k+"] is out of range. Max slots is "+GLLibPlayer.s_snd_maxNbSoundSlot)}if(GLLibPlayer.s_snd_PlayerSlotMultiple[k]==null){g=null}else{var h=GLLibPlayer.s_snd_PlayerSlotMultiple[k];for(var f=0;f<h.length;++f){var c=h[f];var a=false;for(var d=0;d<GLLibPlayer.s_snd_Player.length;++d){try{if(GLLibPlayer.s_snd_Player[d]==c){if(GLLibPlayer.Snd_IsPlaying(d)){a=true}else{GLLibPlayer.Snd_FreeChannelExec(d)}}}catch(e){e.printStackTrace()}}if(!a){g=c;break}}}}else{if(GLLibPlayer.s_snd_PlayerSlot==null){GLLib.Assert(false,"Snd_GetPlayer: Player array is null! Must call Snd_Init")}if(k<0){GLLib.Assert(false,"Snd_GetPlayer: Index is negative ["+k+"]")}if(k>=GLLibPlayer.s_snd_maxNbSoundSlot){GLLib.Assert(false,"Snd_GetPlayer: Index ["+k+"] is out of range. Max slots is "+GLLibPlayer.s_snd_maxNbSoundSlot)}g=GLLibPlayer.s_snd_PlayerSlot[k]}}if(false){GLLib.Profiler_EndNamedEvent()}return g};GLLibPlayer.SndQueue_NormalizeIndex=function(a){if(false){GLLib.Profiler_BeginNamedEvent("SndQueue_NormalizeIndex")}while(a>=7){a-=7}while(a<0){a+=7}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.SndQueue_Push_Normal=function(a,k,j,h,g,e){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("SndQueue_Push_Normal")}if(GLLibPlayer.s_snd_queue_size[a]>=7){GLLib.Assert(false,"SndQueue_Push: Too many sound requests given before Snd_Update!")}var d=GLLibPlayer.s_snd_queue_pointer[a];var c=GLLibPlayer.s_snd_queue_size[a];var m=GLLibPlayer.SndQueue_NormalizeIndex(d+c);for(var f=0;f<c;++f){var b=a*7*5+GLLibPlayer.SndQueue_NormalizeIndex(m-f-1)*5;if(GLLibPlayer.s_snd_queue[b+0]==k){if((k!=3&&k!=1)||GLLibPlayer.s_snd_queue[b+2]>=h){GLLibPlayer.s_snd_queue[b+0]=0}}}var l=a*7*5+m*5;GLLibPlayer.s_snd_queue[l+0]=k;GLLibPlayer.s_snd_queue[l+1]=j;GLLibPlayer.s_snd_queue[l+2]=h;GLLibPlayer.s_snd_queue[l+3]=g;GLLibPlayer.s_snd_queue[l+4]=e;var o=GLLibPlayer.s_snd_queue_size;++o[a];if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.SndQueue_Push_Synched=function(f,e,d,c,b,a){GLLibPlayer.SndQueue_Push_Normal(f,e,d,c,b,a)};GLLibPlayer.SndQueue_Push_dup_IIIIII=function(f,e,d,c,b,a){if(false&&false){GLLibPlayer.SndQueue_Push_Synched(f,e,d,c,b,a)}else{GLLibPlayer.SndQueue_Push_Normal(f,e,d,c,b,a)}};GLLibPlayer.SndQueue_Push_dup_II=function(b,a){GLLibPlayer.SndQueue_Push_dup_IIIIII(b,a,-1,-1,-1,-1)};GLLibPlayer.SndQueue_Pop_Normal=function(c,b){b[5]=GLLibPlayer.s_snd_queue_size[c];if(GLLibPlayer.s_snd_queue_size[c]>0){if(false){GLLib.Profiler_BeginNamedEvent("SndQueue_Pop_Normal")}java.lang.System.arraycopy(GLLibPlayer.s_snd_queue,c*7*5+GLLibPlayer.s_snd_queue_pointer[c]*5,b,0,5);GLLibPlayer.s_snd_queue_pointer[c]=GLLibPlayer.SndQueue_NormalizeIndex(GLLibPlayer.s_snd_queue_pointer[c]+1);var a=GLLibPlayer.s_snd_queue_size;--a[c];if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.SndQueue_Pop_Synched=function(b,a){GLLibPlayer.SndQueue_Pop_Normal(b,a)};GLLibPlayer.SndQueue_Pop=function(b,a){if(false&&false){GLLibPlayer.SndQueue_Pop_Synched(b,a)}else{GLLibPlayer.SndQueue_Pop_Normal(b,a)}};GLLibPlayer.Snd_Init=function(a){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_Init")}if(false){GLLib.Dbg("Snd_Init")}if(GLLibPlayer.k_snd_nbChannel>1){if(false){GLLib.Dbg("    WARNING nb of sound channel is set to more than one")}if(false){GLLib.Dbg("    - this is your responsability to make sure that phone with lower")}if(false){GLLib.Dbg("     nb of sound channel will play the important sound (BGM, SFX...)")}}GLLib.Dbg("Snd_Init : JSR135");if(false){GLLib.Dbg("microedition.media.version is :"+java.lang.System.getProperty("microedition.media.version"))}if(false){GLLib.Dbg("phone support mixing : "+java.lang.System.getProperty("supports.mixing"))}if(java.lang.System.getProperty("supports.mixing").equals("true")){if(false){GLLib.Dbg("    WARNING this phone support mixing, that ONLY means: ")}if(false){GLLib.Dbg("    - Manager.playTone can play 2 tones simultaneously")}if(false){GLLib.Dbg("    - Manager.playTone and one Player can be used at the same time")}if(false){GLLib.Dbg("    - At least 2 Players can playback audio simultaneously")}}GLLibPlayer.s_snd_Player=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],null);if(true){if(true){GLLibPlayer.s_snd_PlayerSlotMultiple=gloft.ArrayCreation([a],null)}else{GLLibPlayer.s_snd_PlayerSlot=gloft.ArrayCreation([a],null)}}GLLibPlayer.s_snd_index=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_priority=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_state=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_volume=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_loop=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_queue=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel*7*5],gloft.casttoint(null));GLLibPlayer.s_snd_queue_pointer=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_queue_size=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_queue_priority=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttobyte(null));GLLibPlayer.s_snd_requestBuffer=gloft.ArrayCreation([6],gloft.casttoint(null));if(false){GLLibPlayer.s_snd_fade=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel*3],gloft.casttoint(null));GLLibPlayer.s_snd_fadeTempo=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel*3],gloft.casttoint(null));GLLibPlayer.s_snd_fadeMidi=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel*16*9],gloft.casttoint(null));GLLibPlayer.s_snd_MidiChannelActiveFlags=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null));GLLibPlayer.s_snd_fadeParamsNeedRefresh=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoboolean(null));if(false){GLLibPlayer.s_snd_fadeLoopingFixState=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttoint(null))}for(var d=0;d<GLLibPlayer.k_snd_nbChannel;++d){GLLibPlayer.s_snd_MidiChannelActiveFlags[d]=0;GLLibPlayer.s_snd_fade[d*3+0]=0;GLLibPlayer.s_snd_fadeTempo[d*3+0]=0;GLLibPlayer.s_snd_fadeParamsNeedRefresh[d]=false;for(var c=0;c<16;++c){var e=(d*16+c)*9;GLLibPlayer.s_snd_fadeMidi[e+0]=0;GLLibPlayer.s_snd_fadeMidi[e+3]=127}if(false){GLLibPlayer.s_snd_fadeLoopingFixState[d]=0}}GLLibPlayer.s_snd_fadeDeltaTime=0}for(var b=0;b<GLLibPlayer.k_snd_nbChannel;++b){GLLibPlayer.s_snd_index[b]=-1;GLLibPlayer.s_snd_queue_pointer[b]=0;GLLibPlayer.s_snd_queue_size[b]=0}GLLibPlayer.s_snd_maxNbSoundSlot=a;GLLibPlayer.s_snd_sndSlot=gloft.ArrayCreation([GLLibPlayer.s_snd_maxNbSoundSlot],null);GLLibPlayer.s_snd_sndType=gloft.ArrayCreation([GLLibPlayer.s_snd_maxNbSoundSlot],gloft.casttoint(null));if(true){GLLibPlayer.s_snd_sndResourceURL=gloft.ArrayCreation([GLLibPlayer.s_snd_maxNbSoundSlot],null)}if(false){GLLibPlayer.s_snd_sndDuration=gloft.ArrayCreation([GLLibPlayer.s_snd_maxNbSoundSlot],gloft.casttoint(null));GLLibPlayer.s_snd_playTime=gloft.ArrayCreation([GLLibPlayer.k_snd_nbChannel],gloft.casttolong(null))}GLLibPlayer.s_snd_masterVolume=100;GLLibPlayer.s_snd_isSoundEngineInitialized=true;if(false){GLLibPlayer.s_pSoundPlayerIns=GLLibPlayer.new_ctor_dup_();(GLLibPlayer.s_pThread=new java.lang.Thread(GLLibPlayer.s_pSoundPlayerIns)).start()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Quit=function(){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_Quit")}if(false){GLLib.Dbg("Snd_quit")}GLLibPlayer.Snd_StopAllSounds();for(var d=0;d<GLLibPlayer.k_snd_nbChannel;++d){GLLibPlayer.Snd_FreeChannelExec(d)}GLLibPlayer.s_snd_Player=null;GLLibPlayer.s_snd_isSoundEngineInitialized=false;for(var c=0;c<GLLibPlayer.s_snd_maxNbSoundSlot;++c){GLLibPlayer.s_snd_sndSlot[c]=null}GLLibPlayer.s_snd_sndSlot=null;GLLibPlayer.s_snd_sndType=null;if(true){GLLibPlayer.s_snd_sndResourceURL=null}if(false){GLLibPlayer.s_snd_sndDuration=null;GLLibPlayer.s_snd_playTime=null}if(true){for(var b=0;b<GLLibPlayer.s_snd_maxNbSoundSlot;++b){if(true){if(GLLibPlayer.s_snd_PlayerSlotMultiple[b]!=null){for(var a=0;a<GLLibPlayer.s_snd_PlayerSlotMultiple[b].length;++a){GLLibPlayer.s_snd_PlayerSlotMultiple[b][a]=null}GLLibPlayer.s_snd_PlayerSlotMultiple[b]=null}}else{GLLibPlayer.s_snd_PlayerSlot[b]=null}}}GLLibPlayer.s_snd_index=null;GLLibPlayer.s_snd_priority=null;GLLibPlayer.s_snd_state=null;GLLibPlayer.s_snd_volume=null;GLLibPlayer.s_snd_loop=null;GLLibPlayer.s_pThread=null;GLLibPlayer.s_snd_queue=null;GLLibPlayer.s_snd_queue_pointer=null;GLLibPlayer.s_snd_queue_size=null;GLLibPlayer.s_snd_queue_priority=null;GLLibPlayer.s_snd_requestBuffer=null;if(false){GLLibPlayer.s_snd_fade=null;GLLibPlayer.s_snd_fadeTempo=null;GLLibPlayer.s_snd_fadeMidi=null;GLLibPlayer.s_snd_MidiChannelActiveFlags=null}if(true){java.lang.System.gc()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_LoadSound_dup_javalangStringIZ=function(c,d,a){GLLibPlayer.Snd_LoadSound_dup_javalangStringIZI(c,d,a,1)};GLLibPlayer.Snd_LoadSound_dup_javalangStringIZI=function(d,e,a,c){if(!true){return}if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(e>=GLLibPlayer.s_snd_sndSlot.length){GLLib.Assert(false,"resourceIndex is larger that slot count. Read the Warning in the doc.")}if(false){GLLib.Dbg("Snd_LoadSound : "+e)}if(e<0){return}if(GLLibPlayer.s_snd_sndSlot==null){GLLib.Assert(false,"Snd_LoadSound.snd not correctly initialized")}GLLib.Pack_Open(d);GLLibPlayer.Snd_LoadSound_dup_aBIIZI(GLLib.Pack_ReadData(e),GLLib.s_pack_lastDataReadMimeType,e,a,c)};GLLibPlayer.Snd_LoadSound_dup_aBIIZI=function(g,f,e,a,c){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(g==null||g.length<=0){if(false){GLLib.Dbg("Snd_LoadSound: soundData is null. Sound "+e+" not available.")}return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_LoadSound")}if(!true&&a){GLLib.Assert(false,"Snd_LoadSound: Trying to cache sound but sound_useCachedPlayers is FALSE!")}if(e>=GLLibPlayer.s_snd_sndSlot.length){GLLib.Assert(false,"index is larger that slot count. Read the Warning in the doc.")}if(c<1){GLLib.Assert(false,"Snd_LoadSound: count is less than 1.  This will cause errors if GLLibConfig.sound_allowMultiplePlayersPerSlot is true")}if(false){GLLib.Dbg("Snd_LoadSound for slot : "+e)}GLLibPlayer.s_snd_sndSlot[e]=g;GLLibPlayer.s_snd_sndType[e]=f;if(false){GLLib.Dbg("Snd_LoadSound has mime : "+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]))}if(true){GLLibPlayer.s_snd_PlayerSlotMultiple[e]=gloft.ArrayCreation([c],null);for(var d=0;d<c;++d){if(true&&a){if(false){GLLib.Dbg("    create player ("+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e])+")")}if(false&&GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]).compareTo("audio/x-wav")==0&&GLLibPlayer.SND_CheckWavForADPCMEncoding(GLLibPlayer.s_snd_sndSlot[e])){if(false){GLLib.Dbg("Converting ADPCM to PCM")}GLLibPlayer.s_snd_sndSlot[e]=GLLibPlayer.SND_ADPCM_ConvertToPCM_dup_aB(GLLibPlayer.s_snd_sndSlot[e])}GLLibPlayer.s_snd_PlayerSlotMultiple[e][d]=javax.microedition.media.Manager.createPlayer(new java.io.ByteArrayInputStream(GLLibPlayer.s_snd_sndSlot[e]),GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]));if(false){if(false){GLLib.Dbg("    realize player")}GLLibPlayer.s_snd_PlayerSlotMultiple[e][d].realize();if(false){if(false){GLLib.Dbg("    prefetch player")}GLLibPlayer.s_snd_PlayerSlotMultiple[e][d].prefetch()}}if(d==c-1){GLLibPlayer.s_snd_sndSlot[e]=null}}}}else{if(true&&a){if(false){GLLib.Dbg("    create player ("+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e])+")")}if(false&&GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]).compareTo("audio/x-wav")==0&&GLLibPlayer.SND_CheckWavForADPCMEncoding(GLLibPlayer.s_snd_sndSlot[e])){if(false){GLLib.Dbg("Converting ADPCM to PCM")}GLLibPlayer.s_snd_sndSlot[e]=GLLibPlayer.SND_ADPCM_ConvertToPCM_dup_aB(GLLibPlayer.s_snd_sndSlot[e])}GLLibPlayer.s_snd_PlayerSlot[e]=javax.microedition.media.Manager.createPlayer(new java.io.ByteArrayInputStream(GLLibPlayer.s_snd_sndSlot[e]),GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]));if(false){if(false){GLLib.Dbg("    realize player")}GLLibPlayer.s_snd_PlayerSlot[e].realize();if(false){if(false){GLLib.Dbg("    prefetch player")}GLLibPlayer.s_snd_PlayerSlot[e].prefetch()}}GLLibPlayer.s_snd_sndSlot[e]=null}}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_LoadSound_dup_javalangStringIIZ=function(d,e,c,a){GLLibPlayer.Snd_LoadSound_dup_javalangStringIIZI(d,e,c,a,1)};GLLibPlayer.Snd_LoadSound_dup_javalangStringIIZI=function(f,g,e,a,c){if(!true){GLLib.Dbg("Snd_LoadSound(by URL) is not enabled, please set sound_allowURLCreation to TRUE!")}else{if(true&&GLLibPlayer.s_snd_isSoundEngineInitialized){if(false){GLLib.Profiler_BeginNamedEvent("Snd_LoadSound")}if(e>=GLLibPlayer.s_snd_sndSlot.length){GLLib.Assert(false,"index is larger that slot count. Read the Warning in the doc.")}if(c<1){GLLib.Assert(false,"Snd_LoadSound: count is less than 1.  This will cause errors if GLLibConfig.sound_allowMultiplePlayersPerSlot is true")}if(false){GLLib.Dbg("Snd_LoadSound(by URL) for slot : "+e)}GLLibPlayer.s_snd_sndSlot[e]=null;GLLibPlayer.s_snd_sndResourceURL[e]=f;GLLibPlayer.s_snd_sndType[e]=g;if(false){GLLib.Dbg("Snd_LoadSound(by URL) has mime : "+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e]))}if(true){GLLibPlayer.s_snd_PlayerSlotMultiple[e]=gloft.ArrayCreation([c],null);for(var d=0;d<c;++d){if(true&&a){if(false){GLLib.Dbg("Snd_LoadSound(by URL) creating player ("+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e])+")")}GLLib.Dbg("Snd_LoadSound(by URL) creating player from URL:"+GLLibPlayer.s_snd_sndResourceURL[e]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=true;GLLibPlayer.s_snd_PlayerSlotMultiple[e][d]=javax.microedition.media.Manager.createPlayer(GLLibPlayer.s_snd_sndResourceURL[e]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=false;if(false){if(false){GLLib.Dbg("Snd_LoadSound(by URL): realize player")}GLLibPlayer.s_snd_PlayerSlotMultiple[e][d].realize();if(false){if(false){GLLib.Dbg("Snd_LoadSound(by URL): prefetch player")}GLLibPlayer.s_snd_PlayerSlotMultiple[e][d].prefetch()}}}}}else{if(true&&a){if(false){GLLib.Dbg("Snd_LoadSound(by URL) creating player ("+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[e])+")")}GLLib.Dbg("Snd_LoadSound(by URL) creating player from URL:"+GLLibPlayer.s_snd_sndResourceURL[e]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=true;GLLibPlayer.s_snd_PlayerSlot[e]=javax.microedition.media.Manager.createPlayer(GLLibPlayer.s_snd_sndResourceURL[e]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=false;if(false){if(false){GLLib.Dbg("Snd_LoadSound(by URL): realize player")}GLLibPlayer.s_snd_PlayerSlot[e].realize();if(false){if(false){GLLib.Dbg("Snd_LoadSound(by URL): prefetch player")}GLLibPlayer.s_snd_PlayerSlot[e].prefetch()}}}}if(false){GLLib.Profiler_EndNamedEvent()}}}};GLLibPlayer.Snd_IsLoaded=function(a){if(GLLibPlayer.s_snd_sndSlot!=null&&a<GLLibPlayer.s_snd_sndSlot.length&&GLLibPlayer.s_snd_sndSlot[a]!=null){return true}if(true){if(GLLibPlayer.s_snd_PlayerSlotMultiple!=null&&a<GLLibPlayer.s_snd_PlayerSlotMultiple.length&&GLLibPlayer.s_snd_PlayerSlotMultiple[a]!=null&&GLLibPlayer.s_snd_PlayerSlotMultiple[a][0]!=null){return true}}else{if(GLLibPlayer.s_snd_PlayerSlot!=null&&a<GLLibPlayer.s_snd_PlayerSlot.length&&GLLibPlayer.s_snd_PlayerSlot[a]!=null){return true}}return false};GLLibPlayer.Snd_UnLoadSound=function(d){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_UnLoadSound")}if(false){GLLib.Dbg("Snd_UnLoadSound : unloading sound at slot "+d)}if(GLLibPlayer.s_snd_sndSlot==null){GLLib.Assert(false,"Snd_UnLoadSound : array is not initialised")}if(d<0){return}GLLibPlayer.s_snd_sndSlot[d]=null;if(true){GLLibPlayer.s_snd_sndResourceURL[d]=null}if(true){if(true){if(GLLibPlayer.s_snd_PlayerSlotMultiple!=null&&GLLibPlayer.s_snd_PlayerSlotMultiple[d]!=null){for(var c=0;c<GLLibPlayer.s_snd_PlayerSlotMultiple[d].length;++c){if(GLLibPlayer.s_snd_PlayerSlotMultiple[d][c]!=null){GLLibPlayer.s_snd_PlayerSlotMultiple[d][c].close()}GLLibPlayer.s_snd_PlayerSlotMultiple[d][c]=null}}GLLibPlayer.s_snd_PlayerSlotMultiple[d]=null;for(var b=0;b<GLLibPlayer.k_snd_nbChannel;++b){if(d==GLLibPlayer.Snd_GetCurrentSoundIndex(b)){GLLibPlayer.s_snd_state[b]=0;GLLibPlayer.s_snd_Player[b]=null}}}}else{if(true){if(GLLibPlayer.s_snd_PlayerSlot!=null&&GLLibPlayer.s_snd_PlayerSlot[d]!=null){GLLibPlayer.s_snd_PlayerSlot[d].close()}GLLibPlayer.s_snd_PlayerSlot[d]=null;for(var a=0;a<GLLibPlayer.k_snd_nbChannel;++a){if(d==GLLibPlayer.Snd_GetCurrentSoundIndex(a)){GLLibPlayer.s_snd_state[a]=0;GLLibPlayer.s_snd_Player[a]=null}}}}if(false){GLLib.Profiler_EndNamedEvent()}if(true){java.lang.System.gc()}};GLLibPlayer.Snd_FreeChannel=function(a){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_FreeChannel")}if(false){GLLib.Dbg("Snd_FreeChannel "+a)}GLLibPlayer.SndQueue_Push_dup_IIIIII(a,2,-1,-1,-1,-1);if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_PrepareSound=function(c,b,a){if(false){GLLib.Profiler_BeginNamedEvent("Snd_PrepareSound")}if(!true){return}if(false){GLLib.Dbg("Snd_PrepareSound "+b)}if(b<0){if(false){GLLib.Dbg("    dummy sound skiping")}return}GLLibPlayer.SndQueue_Push_dup_IIIIII(c,1,b,a,-1,-1);if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Play_dup_IIIII=function(e,d,c,b,a){if(false){GLLib.Profiler_BeginNamedEvent("Snd_Play")}if(true){if(false){GLLib.Dbg("Snd_Play: Channel["+e+"], ID["+d+"], Loop["+c+"], Volume["+b+"] and Priority["+a+"]")}if(c<0){GLLib.Assert(false,"Snd_Play: Invalid loop number of "+c)}if(e>=GLLibPlayer.k_snd_nbChannel){GLLib.Assert(false,"Snd_Play: Attempting to play on channel "+e+" while only have max "+GLLibPlayer.k_snd_nbChannel)}if(d<0||b==0){if(false){GLLib.Dbg("    dummy sound skipping")}return}if(GLLibPlayer.s_snd_PlayerSlotMultiple){if(GLLibPlayer.s_snd_PlayerSlotMultiple[d]){if(GLLibPlayer.s_snd_PlayerSlotMultiple[d][0].m_AudioPLayer.loadstate!="complete"&&GLLibPlayer.s_snd_PlayerSlotMultiple[d][0].m_AudioPLayer instanceof WebAudioPlayer){return}}}GLLibPlayer.SndQueue_Push_dup_IIIIII(e,3,d,a,b,c)}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Play_dup_IIII=function(d,c,b,a){GLLibPlayer.Snd_Play_dup_IIIIZ(d,c,b,a,false)};GLLibPlayer.Snd_Play_dup_IIIIZ=function(g,f,e,d,a){if(false){GLLib.Profiler_BeginNamedEvent("Snd_Play")}if(true){var c=GLLibPlayer.Snd_GetFreeChannel();if(c==-1){c=GLLibPlayer.Snd_GetLowerPrioChannel(d);if(c==-1){if(!a){if(false){GLLib.Profiler_EndNamedEvent()}return}c=GLLibPlayer.Snd_GetSamePrioChannel(d);if(c==-1){if(false){GLLib.Profiler_EndNamedEvent()}return}}}if(false){GLLib.Dbg("Snd_Play: Channel["+c+"], ID["+g+"], Loop["+f+"], Volume["+e+"] and Priority["+d+"]")}if(f<0){GLLib.Assert(false,"Snd_Play: Invalid loop number of "+f)}if(c>=GLLibPlayer.k_snd_nbChannel){GLLib.Assert(false,"Snd_Play: Attempting to play on channel "+c+" while only have max "+GLLibPlayer.k_snd_nbChannel)}if(g<0||e==0){if(false){GLLib.Dbg("    dummy sound skipping")}if(false){GLLib.Profiler_EndNamedEvent()}return}GLLibPlayer.s_snd_queue_priority[c]=gloft.casttobyte(d);GLLibPlayer.SndQueue_Push_dup_IIIIII(c,3,g,d,e,f)}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_GetLowerPrioChannel=function(h){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetLowerPrioChannel")}var g=-1;var d=0;var a=0;for(var f=0;f<GLLibPlayer.k_snd_nbChannel;++f){var c=GLLibPlayer.s_snd_queue_priority[f];if(a<c){a=c;d=f;break}}if(h<a){GLLibPlayer.SndQueue_Pop(d,GLLibPlayer.s_snd_requestBuffer);try{GLLibPlayer.Snd_StopExec(d)}catch(e){e.printStackTrace()}g=d}if(false){GLLib.Profiler_EndNamedEvent()}return g};GLLibPlayer.Snd_GetSamePrioChannel=function(c){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetSamePrioChannel")}var b=-1;for(var a=0;a<GLLibPlayer.k_snd_nbChannel;++a){if(GLLibPlayer.s_snd_queue_priority[a]==c){b=a;break}}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_GetFreeChannel=function(){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetFreeChannel")}var c=-1;try{for(var b=0;b<GLLibPlayer.k_snd_nbChannel;++b){if(GLLibPlayer.s_snd_queue_size[b]==0&&!GLLibPlayer.Snd_IsPlaying(b)){c=b;break}}}catch(a){if(false){GLLib.Dbg("Snd_GetFreeChannel: Error while trying to find free channel")}}if(false){GLLib.Profiler_EndNamedEvent()}return c};GLLibPlayer.Snd_Stop=function(a){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_Stop")}if(false){GLLib.Dbg("Snd_stop")}GLLibPlayer.SndQueue_Push_dup_II(a,4);if(false){GLLibPlayer.Snd_FadeStopChannel(a,true)}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Pause=function(a){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_Pause")}if(false){GLLib.Dbg("Snd_Pause")}GLLibPlayer.SndQueue_Push_dup_II(a,5);if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Resume=function(a){if(!true){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_Resume")}if(false){GLLib.Dbg("Snd_resume")}GLLibPlayer.SndQueue_Push_dup_II(a,6);if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_PrepareExec=function(d,c,b){if(!true){return}if(false){GLLib.Dbg("Snd_PrepareExec")}if(false){GLLib.Profiler_BeginNamedEvent("Snd_PrepareExec")}if(GLLibPlayer.s_snd_state[d]==2&&GLLibPlayer.s_snd_priority[d]<b){if(false){GLLib.Profiler_EndNamedEvent()}return}if(GLLibPlayer.s_snd_index[d]==c&&GLLibPlayer.s_snd_state[d]!=0){if(false){GLLib.Profiler_EndNamedEvent()}return}var a=GLLibPlayer.s_snd_index[d];GLLibPlayer.Snd_FreeChannelExec(d);if(false){GLLib.Dbg("prepareexec : channel : "+d)}if(false){GLLib.Dbg("prepareexec : index   : "+c)}if(true){GLLibPlayer.s_snd_Player[d]=GLLibPlayer.Snd_GetFreePlayer(c)}if(GLLibConfiguration.sound_allowMultiplePlayersPerSlot){if(GLLibPlayer.s_snd_Player[d]==null){return}}if(true&&GLLibPlayer.s_snd_Player[d]==null&&GLLibPlayer.s_snd_sndResourceURL[c]!=null){GLLib.Dbg("    create player from URL:"+GLLibPlayer.s_snd_sndResourceURL[c]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=true;GLLibPlayer.s_snd_Player[d]=javax.microedition.media.Manager.createPlayer(GLLibPlayer.s_snd_sndResourceURL[c]);GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=false}if(GLLibPlayer.s_snd_Player[d]==null){if(false){GLLib.Dbg("    create player ("+GLLib.GetMIME(GLLibPlayer.s_snd_sndType[c])+")")}if(GLLibPlayer.s_snd_sndSlot[c]==null){GLLib.Dbg("    create player: player is null and raw data is null too... reload!!");if(false){GLLib.Profiler_EndNamedEvent()}return}GLLibPlayer.s_snd_Player[d]=javax.microedition.media.Manager.createPlayer(new java.io.ByteArrayInputStream(GLLibPlayer.s_snd_sndSlot[c]),GLLib.GetMIME(GLLibPlayer.s_snd_sndType[c]))}if(GLLibPlayer.s_snd_Player[d]==null){GLLib.Dbg("    ERROR.player is null 2307");if(false){GLLib.Profiler_EndNamedEvent()}return}if(!false){if(false){GLLib.Dbg("    realize player")}GLLibPlayer.s_snd_Player[d].realize()}if(!false){if(false){GLLib.Dbg("    prefetch player")}GLLibPlayer.s_snd_Player[d].prefetch()}GLLibPlayer.s_snd_state[d]=1;GLLibPlayer.s_snd_index[d]=c;if(!true&&a>=0&&a<GLLibPlayer.s_snd_maxNbSoundSlot&&true&&GLLibPlayer.Snd_GetSlotState(a)==400){GLLibPlayer.s_snd_PlayerSlot[a].stop()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_PlayExec=function(e,c,b,d,a){if(!true||GLLib.s_game_isPaused){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_PlayExec")}if(false){GLLib.Dbg("Snd_PlayExec for channel : "+e)}GLLibPlayer.Snd_PrepareExec(e,c,b);if(GLLib.s_game_isPaused){if(false){GLLib.Profiler_EndNamedEvent()}return}if(GLLibPlayer.s_snd_state[e]!=1||GLLibPlayer.s_snd_Player[e]==null){if(false){GLLib.Profiler_EndNamedEvent()}if(false){GLLib.Dbg("Snd_playExec : Cant play, state not ready or player is null")}return}if(false){GLLib.Dbg("    set loop count")}if(d==0){GLLibPlayer.s_snd_Player[e].setLoopCount(-1)}else{GLLibPlayer.s_snd_Player[e].setLoopCount(d)}if(false){if(false){GLLib.Dbg("    set volume")}((GLLibPlayer.s_snd_Player[e]).getControl("VolumeControl")).setLevel(gloft.casttoint(a*GLLibPlayer.s_snd_masterVolume*100/10000))}if(false){GLLib.Dbg("    start player")}if(false){GLLibPlayer.s_snd_Player[e].setMediaTime(0)}GLLibPlayer.s_snd_Player[e].start();GLLibPlayer.s_snd_state[e]=2;GLLibPlayer.s_snd_volume[e]=a;GLLibPlayer.s_snd_loop[e]=d;GLLibPlayer.s_snd_priority[e]=b;GLLibPlayer.s_snd_index[e]=c;if(false){GLLibPlayer.s_snd_playTime[e]=java.lang.System.currentTimeMillis()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_SetMasterVolume=function(a){if(!true){return}if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_SetMasterVolume")}GLLibPlayer.s_snd_masterVolume=a;try{for(var c=0;c<GLLibPlayer.k_snd_nbChannel;++c){GLLibPlayer.Snd_SetChannelVolume(c,GLLibPlayer.s_snd_volume[c])}}catch(b){b.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_GetChannelVolume=function(c){if(!true){return 0}if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return 0}if(false){GLLib.Profiler_BeginNamedEvent("")}var b=0;try{if(GLLibPlayer.s_snd_Player[c]==null){b=0}b=gloft.casttoint(((GLLibPlayer.s_snd_Player[c]).getControl("VolumeControl")).getLevel()*100*100/(GLLibPlayer.s_snd_masterVolume*100))}catch(a){a.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_SetSoundVolume=function(d,c){if(false){GLLib.Profiler_BeginNamedEvent("Snd_SetSoundVolume")}var a=GLLibPlayer.Snd_GetSoundChannel(d);if(a==-1){return}try{GLLibPlayer.Snd_SetChannelVolume(a,c)}catch(b){b.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_GetSoundChannel=function(c){if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetSoundChannel")}var b=-1;for(var a=0;a<GLLibPlayer.s_snd_queue.length;a+=5){if(GLLibPlayer.s_snd_queue[a+0]!=0&&GLLibPlayer.s_snd_queue[a+1]==c){b=gloft.casttoint(a/(7*5))}}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_SetChannelVolume=function(c,b){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized||GLLibPlayer.s_snd_Player[c]==null){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_SetChannelVolume")}try{if(GLLibPlayer.s_snd_Player[c]!=null&&false){((GLLibPlayer.s_snd_Player[c]).getControl("VolumeControl")).setLevel(gloft.casttoint(b*GLLibPlayer.s_snd_masterVolume*100/10000))}}catch(a){a.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_StopExec=function(a){if(false){GLLib.Dbg("Snd_stopExec")}if(GLLibPlayer.s_snd_Player[a]==null){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_StopExec")}GLLibPlayer.s_snd_Player[a].stop();GLLibPlayer.s_snd_state[a]=1;if(true){GLLibPlayer.Snd_FreeChannelExec(a)}if(false){GLLibPlayer.s_snd_playTime[a]=0}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_PauseExec=function(a){if(false){GLLib.Dbg("Snd_PauseExec")}if(GLLibPlayer.s_snd_state[a]!=2){return}if(GLLibPlayer.s_snd_Player[a]==null){GLLib.Assert(false,"Snd_pauseExec.player is null 2881")}if(GLLibPlayer.s_snd_Player[a]==null){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_PauseExec")}if(GLLibPlayer.s_snd_Player[a].getState()!=400){GLLib.Assert(false,"Snd_pauseExec.player wasn't playing")}GLLibPlayer.s_snd_Player[a].stop();GLLibPlayer.s_snd_state[a]=3;if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_ResumeExec=function(a){if(false){GLLib.Dbg("Snd_ResumeExec")}if(GLLibPlayer.s_snd_state[a]!=3){if(false){GLLib.Dbg("Snd_ResumeExec. Can't resume channel "+a+" because state is not paused!")}return}if(GLLibPlayer.s_snd_Player[a]==null){GLLib.Assert(false,"Snd_ResumeExec.player is null 2931")}if(GLLibPlayer.s_snd_Player[a]==null){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_ResumeExec")}GLLibPlayer.s_snd_Player[a].start();GLLibPlayer.s_snd_state[a]=2;if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_Update=function(){if(false){if(GLLibPlayer.s_pThread!=null&&!GLLibPlayer.s_pThread.isAlive()){GLLibPlayer.s_pThread.start()}}else{GLLibPlayer.Snd_Update_Exec()}};GLLibPlayer.Snd_Update_Exec=function(){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){if(GLLibPlayer.s_snd_bInUpdate){return}GLLibPlayer.s_snd_bInUpdate=true}for(var b=0;b<GLLibPlayer.k_snd_nbChannel;++b){GLLibPlayer.SndQueue_Pop(b,GLLibPlayer.s_snd_requestBuffer);if(GLLibPlayer.s_snd_requestBuffer[5]>0){if(GLLibPlayer.s_snd_state[b]==2){var d=gloft.casttoboolean(null);try{d=GLLibPlayer.Snd_IsPlaying(b)}catch(a){GLLib.Dbg("Snd_update.error on channel ("+b+")."+a);d=false}if(!d){GLLibPlayer.s_snd_state[b]=1}}while(GLLibPlayer.s_snd_requestBuffer[5]>0){try{if(false){GLLib.Dbg("Snd_update")}switch(GLLibPlayer.s_snd_requestBuffer[0]){case 1:GLLibPlayer.Snd_PrepareExec(b,GLLibPlayer.s_snd_requestBuffer[1],GLLibPlayer.s_snd_requestBuffer[2]);break;case 2:GLLibPlayer.Snd_FreeChannelExec(b);break;case 3:GLLibPlayer.Snd_PlayExec(b,GLLibPlayer.s_snd_requestBuffer[1],GLLibPlayer.s_snd_requestBuffer[2],GLLibPlayer.s_snd_requestBuffer[4],GLLibPlayer.s_snd_requestBuffer[3]);break;case 4:GLLibPlayer.Snd_StopExec(b);break;case 5:GLLibPlayer.Snd_PauseExec(b);break;case 6:GLLibPlayer.Snd_ResumeExec(b);break}}catch(c){GLLib.Dbg("Snd_update.error on channel ("+b+")."+c);c.printStackTrace()}GLLibPlayer.SndQueue_Pop(b,GLLibPlayer.s_snd_requestBuffer)}}if(false){GLLibPlayer.SndFade_Update(b)}}if(false){GLLibPlayer.s_snd_bInUpdate=false}};GLLibPlayer.Snd_IsPlaying=function(d){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return false}if(d>=GLLibPlayer.k_snd_nbChannel||GLLibPlayer.s_snd_Player[d]==null){return false}if(false){GLLib.Profiler_BeginNamedEvent("Snd_IsPlaying")}var a=true;if(false){var c=GLLibPlayer.Snd_GetCurrentSoundIndex(d);if(c<0){a=false}else{if(GLLibPlayer.s_snd_loop[d]!=0&&java.lang.System.currentTimeMillis()-GLLibPlayer.s_snd_playTime[d]>GLLibPlayer.s_snd_sndDuration[c]*GLLibPlayer.s_snd_loop[d]){a=false}}}else{if(GLLibPlayer.s_snd_Player[d].getState()!=400){a=false}}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_GetState=function(b){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(b<0||b>=GLLibPlayer.k_snd_nbChannel||GLLibPlayer.s_snd_Player[b]==null){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetState")}var a=GLLibPlayer.s_snd_Player[b].getState();if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_GetSlotState=function(b){if(!true||true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(b<0||b>=GLLibPlayer.s_snd_maxNbSoundSlot||GLLibPlayer.s_snd_PlayerSlot==null||GLLibPlayer.s_snd_PlayerSlot[b]==null){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_GetSlotState")}var a=GLLibPlayer.s_snd_PlayerSlot[b].getState();if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_SetMediaDuration=function(b,a){if(!true){return}if(!false){return}if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(b<0){if(false){GLLib.Dbg("    dummy sound skiping")}return}GLLibPlayer.s_snd_sndDuration[b]=a};GLLibPlayer.Snd_FreeChannelExec=function(b){if(!true||!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_FreeChannelExec")}if(false){GLLib.Dbg("Snd_FreeChannelExec = "+b)}if(GLLibPlayer.s_snd_Player[b]!=null){GLLibPlayer.s_snd_Player[b].stop();if(!false){GLLibPlayer.s_snd_Player[b].deallocate()}if(!true){GLLibPlayer.s_snd_Player[b].close()}else{var a=GLLibPlayer.s_snd_index[b];if(true){if(a<0||GLLibPlayer.s_snd_PlayerSlotMultiple[a]==null){GLLibPlayer.s_snd_Player[b].close()}}else{if(a<0||GLLibPlayer.s_snd_PlayerSlot[a]==null){GLLibPlayer.s_snd_Player[b].close()}}}GLLibPlayer.s_snd_Player[b]=null}GLLibPlayer.s_snd_state[b]=0;GLLibPlayer.s_snd_index[b]=-1;if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_StopAllSounds=function(){if(false){GLLib.Profiler_BeginNamedEvent("Snd_StopAllSounds")}for(var a=0;a<GLLibPlayer.k_snd_nbChannel;++a){GLLibPlayer.Snd_Stop(a)}if(!false){GLLibPlayer.Snd_Update()}else{if(GLLib.s_game_isPaused){GLLibPlayer.Snd_Update_Exec()}}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_GetCurrentSoundIndex=function(a){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(GLLibPlayer.s_snd_index!=null){return GLLibPlayer.s_snd_index[a]}return -1};GLLibPlayer.SndQueue_GetData=function(c,b){if(false){GLLib.Profiler_BeginNamedEvent("SndQueue_GetData")}var a=GLLibPlayer.s_snd_queue[c*7*5+GLLibPlayer.s_snd_queue_pointer[c]*5+b];if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_MediaTimeGet=function(c){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_MediaTimeGet")}var a=-1;try{a=GLLibPlayer.s_snd_Player[c].getMediaTime()}catch(b){b.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_MediaTimeSet=function(d,a){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_MediaTimeSet")}var b=-1;try{b=GLLibPlayer.s_snd_Player[d].setMediaTime(a)}catch(c){c.printStackTrace()}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_MidiSetChannelVolume=function(f,e,d){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return false}if(false){GLLib.Profiler_BeginNamedEvent("Snd_MidiSetChannelVolume")}var a=false;if(false){GLLibPlayer.s_snd_fadeMidi[(f*16+e)*9+3]=d}if(true){var c=(GLLibPlayer.s_snd_Player[f]).getControl("MIDIControl");if(c!=null){c.shortMidiEvent(176|e,7,d);a=true}}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_MidiGetChannelVolume=function(f,e){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_MidiGetChannelVolume")}var c=-1;if(true){try{var b=(GLLibPlayer.s_snd_Player[f]).getControl("MIDIControl");if(b!=null){var a=b.getChannelVolume(e);if(false&&a==-1){a=GLLibPlayer.s_snd_fadeMidi[(f*16+e)*9+3]}c=a}}catch(d){d.printStackTrace()}}if(false){GLLib.Profiler_EndNamedEvent()}return c};GLLibPlayer.Snd_MidiPlayNote=function(e,d,c,b){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_MidiPlayNote")}if(true){var a=(GLLibPlayer.s_snd_Player[e]).getControl("MIDIControl");if(a==null){if(false){GLLib.Profiler_EndNamedEvent()}return}a.shortMidiEvent(144|d,c,b)}if(false){GLLib.Profiler_EndNamedEvent()}};GLLibPlayer.Snd_TempoGet=function(c){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_TempoGet")}if(true){try{var b=(GLLibPlayer.s_snd_Player[c]).getControl("TempoControl");if(b!=null){if(false){GLLib.Profiler_EndNamedEvent()}return b.getTempo()}}catch(a){a.printStackTrace()}}if(false){GLLib.Profiler_EndNamedEvent()}return -1};GLLibPlayer.Snd_TempoSet=function(c,a){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return false}if(false){GLLib.Profiler_BeginNamedEvent("Snd_TempoSet")}if(true){var b=(GLLibPlayer.s_snd_Player[c]).getControl("TempoControl");if(b!=null){b.setTempo(a);if(false){GLLib.Profiler_EndNamedEvent()}return true}}if(false){GLLib.Profiler_EndNamedEvent()}return false};GLLibPlayer.Snd_RateGet=function(d){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return -1}if(false){GLLib.Profiler_BeginNamedEvent("Snd_RateGet")}var c=-1;if(true){try{var a=(GLLibPlayer.s_snd_Player[d]).getControl("RateControl");if(a!=null){c=a.getRate()}}catch(b){b.printStackTrace()}}if(false){GLLib.Profiler_EndNamedEvent()}return c};GLLibPlayer.Snd_RateSet=function(e,d){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return false}if(false){GLLib.Profiler_BeginNamedEvent("Snd_RateSet")}var a=false;if(true){var c=(GLLibPlayer.s_snd_Player[e]).getControl("RateControl");if(c!=null){c.setRate(d);a=true}}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_RateGetMax=function(c){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return 100000}if(false){GLLib.Profiler_BeginNamedEvent("Snd_RateGetMax")}var b=100000;if(true){var a=(GLLibPlayer.s_snd_Player[c]).getControl("RateControl");if(a!=null){b=a.getMaxRate()}}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_RateGetMin=function(c){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return 100000}if(false){GLLib.Profiler_BeginNamedEvent("Snd_RateGetMin")}var b=100000;if(true){var a=(GLLibPlayer.s_snd_Player[c]).getControl("RateControl");if(a!=null){b=a.getMinRate()}}if(false){GLLib.Profiler_EndNamedEvent()}return b};GLLibPlayer.Snd_DurationGet=function(b){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return 0}if(false){GLLib.Profiler_BeginNamedEvent("Snd_DurationGet")}var a=0;if(true){a=GLLibPlayer.s_snd_Player[b].getDuration()}if(false){GLLib.Profiler_EndNamedEvent()}return a};GLLibPlayer.Snd_FadeCommand=function(e,d,c,b){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeCommand")}var a=d*3;GLLibPlayer.s_snd_fade[a+0]=e;GLLibPlayer.s_snd_fade[a+1]=c;GLLibPlayer.s_snd_fade[a+2]=b;if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeTempoCommand=function(e,d,c,b){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeTempoCommand")}var a=d*3;if((GLLibPlayer.s_snd_fadeTempo[a+0]=e)!=1){GLLibPlayer.s_snd_fadeTempo[a+1]=c;GLLibPlayer.s_snd_fadeTempo[a+2]=b}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeMidiCommand=function(h,g,f,e,d){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeMidiCommand")}var b=(g*16+f)*9;GLLibPlayer.s_snd_fadeMidi[b+0]=h;if(h==0||h==1){var a=GLLibPlayer.s_snd_MidiChannelActiveFlags;a[g]&=~(1<<f)}else{GLLibPlayer.s_snd_fadeMidi[b+1]=e;GLLibPlayer.s_snd_fadeMidi[b+2]=d;var c=GLLibPlayer.s_snd_MidiChannelActiveFlags;c[g]|=1<<f}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeStopMidiChannel=function(b,a){if(false){GLLibPlayer.Snd_FadeMidiCommand(0,b,a,0,0)}};GLLibPlayer.Snd_FadeStopChannel=function(d,a){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeStopChannel")}GLLibPlayer.Snd_FadeCommand(0,d,0,0);GLLibPlayer.Snd_FadeTempoCommand(0,d,0,0);if(a){for(var c=0;c<16;++c){GLLibPlayer.Snd_FadeMidiCommand(0,d,c,0,0)}}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeMidiChannelVolume=function(d,c,b,a){if(false){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeMidiChannelVolume")}if(true){GLLibPlayer.Snd_FadeMidiCommand(2,d,c,b,a)}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeMultipleMidiChannelVolumes=function(d,c,b){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeMultipleMidiChannelVolumes")}for(var a=0;a<16;++a){GLLibPlayer.Snd_FadeMidiChannelVolume(d,a,c[a],b)}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeVolume=function(c,b,a){if(false){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeVolume")}GLLibPlayer.Snd_FadeCommand(3,c,b,a);if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeOut=function(b,a){if(false){if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeOut")}GLLibPlayer.Snd_FadeVolume(b,0,a);if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_FadeOutAndStop=function(b,a){if(false){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_FadeOutAndStop")}GLLibPlayer.Snd_FadeCommand(4,b,0,a);if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_SmoothTempoChange=function(c,b,a){if(false){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_SmoothTempoChange")}if(true){GLLibPlayer.Snd_FadeTempoCommand(5,c,b,a)}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_RandomlyActivateMidiTrack=function(a,i,h,g,f,e,d,c){if(false){if(!GLLibPlayer.s_snd_isSoundEngineInitialized){return}if(false){GLLib.Profiler_BeginNamedEvent("Snd_RandomlyActivateMidiTrack")}if(true){try{GLLibPlayer.Snd_MidiSetChannelVolume(a,i,0)}catch(j){j.printStackTrace()}GLLibPlayer.Snd_FadeMidiCommand(6,a,i,h,g);var b=(a*16+i)*9;GLLibPlayer.s_snd_fadeMidi[b+4]=f;GLLibPlayer.s_snd_fadeMidi[b+5]=e;GLLibPlayer.s_snd_fadeMidi[b+6]=d;GLLibPlayer.s_snd_fadeMidi[b+7]=c;GLLibPlayer.Snd_ResetRandomlyActivatedMidiTrack(a,i,true)}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_ResetRandomlyActivatedMidiTrack=function(f,e,a){if(false){if(false){GLLib.Profiler_BeginNamedEvent("")}var d=(f*16+e)*9;var c=GLLibPlayer.s_snd_fadeMidi[d+0];if(c==6||c==7){if(a){GLLibPlayer.s_snd_fadeMidi[d+0]=6;GLLibPlayer.s_snd_fadeMidi[d+8]=GLLib.Math_Rand(GLLibPlayer.s_snd_fadeMidi[d+4],GLLibPlayer.s_snd_fadeMidi[d+5]+1)}else{GLLibPlayer.s_snd_fadeMidi[d+0]=7;GLLibPlayer.s_snd_fadeMidi[d+8]=GLLib.Math_Rand(GLLibPlayer.s_snd_fadeMidi[d+6],GLLibPlayer.s_snd_fadeMidi[d+7]+1)}}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.SndFade_Update=function(z){if(false){GLLibPlayer.s_snd_fadeDeltaTime+=GLLib.s_game_frameDT;if(GLLibPlayer.s_snd_fadeDeltaTime<0){return}if(false){GLLib.Profiler_BeginNamedEvent("SndFade_Update")}var B=GLLibPlayer.s_snd_fadeDeltaTime;GLLibPlayer.s_snd_fadeDeltaTime=0;var a=GLLibPlayer.Snd_MediaTimeGet(z);if(a>=0&&a<=B*1000){GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]=true}try{if(!GLLibPlayer.Snd_IsPlaying(z)){if(false&&!GLLib.s_game_isPaused&&GLLibPlayer.s_snd_loop[z]==0&&GLLibPlayer.s_snd_fadeLoopingFixState[z]<3){switch(GLLibPlayer.s_snd_fadeLoopingFixState[z]){case 0:if(GLLibPlayer.s_snd_state[z]==2){GLLibPlayer.s_snd_fadeLoopingFixState[z]=1;GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]=true;break}break;case 1:GLLibPlayer.s_snd_fadeLoopingFixState[z]=2;GLLibPlayer.s_snd_Player[z].stop();GLLibPlayer.s_snd_state[z]=1;if(false){GLLibPlayer.s_snd_playTime[z]=0;break}break;case 2:GLLibPlayer.Snd_PlayExec(z,GLLibPlayer.s_snd_index[z],GLLibPlayer.s_snd_priority[z],0,GLLibPlayer.s_snd_volume[z]);GLLibPlayer.s_snd_fadeLoopingFixState[z]=3;break}}if(false){GLLib.Profiler_EndNamedEvent()}return}}catch(G){if(false){GLLib.Profiler_EndNamedEvent()}return}if(false){GLLibPlayer.s_snd_fadeLoopingFixState[z]=0}var p=z*3;var m=GLLibPlayer.s_snd_fade[p+0];if(m!=0&&m!=1){var k=GLLibPlayer.s_snd_fade[p+1];var f=gloft.casttoint(null);try{var u=GLLibPlayer.Snd_GetChannelVolume(z);var h=(1>gloft.casttoint(GLLibPlayer.s_snd_fade[p+2]*B/1000))?1:(gloft.casttoint(GLLibPlayer.s_snd_fade[p+2]*B/1000));f=((u<k)?((k<u+h)?k:(u+h)):((k>u-h)?k:(u-h)));GLLibPlayer.Snd_SetChannelVolume(z,f)}catch(A){f=k}if(f==k){if(m==4){GLLibPlayer.Snd_Stop(z)}GLLibPlayer.Snd_FadeCommand(0,z,0,0)}}var e=GLLibPlayer.s_snd_fadeTempo[p+0];if(e!=0&&e!=1){var d=GLLibPlayer.s_snd_fadeTempo[p+1];var D=-1;try{D=GLLibPlayer.Snd_TempoGet(z);var c=(1>gloft.casttoint(GLLibPlayer.s_snd_fadeTempo[p+2]*B/1000))?1:(gloft.casttoint(GLLibPlayer.s_snd_fadeTempo[p+2]*B/1000));D=((D<d)?((d<D+c)?d:(D+c)):((d>D-c)?d:(D-c)));GLLibPlayer.Snd_TempoSet(z,D)}catch(y){GLLibPlayer.Snd_FadeTempoCommand(0,z,0,0)}if(D<0||((D-d<0)?(-(D-d)):(D-d))<500){GLLibPlayer.Snd_FadeTempoCommand(1,z,0,0)}}else{if(GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]&&e==1){try{var w=GLLibPlayer.s_snd_fadeTempo[p+1];var I=GLLibPlayer.Snd_TempoGet(z);if(((I-w<0)?(-(I-w)):(I-w))>=500){GLLibPlayer.Snd_TempoSet(z,w)}}catch(G){G.printStackTrace()}}}if(GLLibPlayer.s_snd_MidiChannelActiveFlags[z]==0&&!GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]){if(false){GLLib.Profiler_EndNamedEvent()}return}for(var C=0;C<16;++C){if((GLLibPlayer.s_snd_MidiChannelActiveFlags[z]&1<<C)!=0||GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]){var v=(z*16+C)*9;var t=GLLibPlayer.s_snd_fadeMidi[v+0];switch(t){case 1:if(GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]){var s=GLLibPlayer.s_snd_fadeMidi[v+1];try{GLLibPlayer.Snd_MidiSetChannelVolume(z,C,s)}catch(G){G.printStackTrace()}break}break;case 2:var r=GLLibPlayer.s_snd_fadeMidi[v+1];var q=GLLibPlayer.s_snd_fadeMidi[v+3];var o=(1>gloft.casttoint(GLLibPlayer.s_snd_fadeMidi[v+2]*B/1000))?1:(gloft.casttoint(GLLibPlayer.s_snd_fadeMidi[v+2]*B/1000));var l=(q<r)?((r<q+o)?r:(q+o)):((r>q-o)?r:(q-o));try{GLLibPlayer.Snd_MidiSetChannelVolume(z,C,l)}catch(x){l=r}if(l==r){GLLibPlayer.Snd_FadeMidiCommand(1,z,C,0,0);break}break;case 6:case 7:var j=(t==6)?GLLibPlayer.s_snd_fadeMidi[v+1]:0;var g=GLLibPlayer.s_snd_fadeMidi[v+3];if(g!=j){var H=(1>gloft.casttoint(GLLibPlayer.s_snd_fadeMidi[v+2]*B/1000))?1:(gloft.casttoint(GLLibPlayer.s_snd_fadeMidi[v+2]*B/1000));var F=(g<j)?((j<g+H)?j:(g+H)):((j>g-H)?j:(g-H));try{GLLibPlayer.Snd_MidiSetChannelVolume(z,C,F)}catch(G){G.printStackTrace()}}var b=GLLibPlayer.s_snd_fadeMidi;var E=v+8;b[E]-=B;if(GLLibPlayer.s_snd_fadeMidi[v+8]<=0){GLLibPlayer.Snd_ResetRandomlyActivatedMidiTrack(z,C,t==7);break}break}}}GLLibPlayer.s_snd_fadeParamsNeedRefresh[z]=false;if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_PauseNotify=function(){if(true&&(!GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt||!true)){if(false){GLLib.Profiler_BeginNamedEvent("Snd_PauseNotify")}try{GLLibPlayer.Snd_StopAllSounds();if(false&&GLLib.s_game_isPaused){GLLibPlayer.Snd_Update_Exec()}}catch(a){GLLib.Dbg("Snd_PauseNotify: exception!")}if(false){GLLib.Profiler_EndNamedEvent()}}};GLLibPlayer.Snd_AddPlayerListener=function(){GLLib.Dbg("Snd_AddPlayerListener: Not implemented for this platform!")};GLLibPlayer.SND_ADPCM_ConvertToPCM_dup_aB=function(a){return GLLibPlayer.SND_ADPCM_ConvertToPCM_dup_aBI(a,1)};GLLibPlayer.SND_ADPCM_ConvertToPCM_dup_aBI=function(j,a){if(false){GLLib.Profiler_BeginNamedEvent("SND_ADPCM_ConvertToPCM")}var h=16;var g=h+(GLLib.Mem_GetInt(j,h)+8);var f=g+(GLLib.Mem_GetInt(j,g)+12);var k=GLLib.Mem_GetInt(j,f-4);if(false){GLLib.Dbg("ADPCM : SubChunk2Size : "+k+" Input Length : "+j.length)}var e=k>>8;var c=gloft.casttoint(null);if(a==1){c=505*e}else{c=1010*e}var l=gloft.ArrayCreation([c+44],gloft.casttobyte(null));GLLib.Mem_SetInt(l,0,1179011410);GLLib.Mem_SetInt(l,4,c+44-8);GLLib.Mem_SetInt(l,8,1163280727);GLLib.Mem_SetInt(l,12,544501094);GLLib.Mem_SetInt(l,16,16);GLLib.Mem_SetShort(l,20,gloft.casttoshort(1));GLLib.Mem_SetShort(l,22,gloft.casttoshort(1));GLLib.Mem_SetInt(l,24,8000);if(a==1){GLLib.Mem_SetInt(l,28,8000);GLLib.Mem_SetShort(l,32,gloft.casttoshort(1));GLLib.Mem_SetShort(l,34,gloft.casttoshort(8))}else{if(a==2){GLLib.Mem_SetInt(l,28,16000);GLLib.Mem_SetShort(l,32,gloft.casttoshort(2));GLLib.Mem_SetShort(l,34,gloft.casttoshort(16))}}GLLib.Mem_SetInt(l,36,1635017060);GLLib.Mem_SetInt(l,40,c);var b=44;for(var d=0;d<e;++d){GLLibPlayer.SND_ADPCM_DecodeBlock_dup_aBaBIII(j,l,f,b,a);f+=256;if(a==1){b+=505}if(a==2){b+=1010}}if(false){GLLib.Profiler_EndNamedEvent()}return l};GLLibPlayer.SND_ADPCM_DecodeBlock_dup_aBaBII=function(d,b,c,a){GLLibPlayer.SND_ADPCM_DecodeBlock_dup_aBaBIII(d,b,c,a,1)};GLLibPlayer.SND_ADPCM_DecodeBlock_dup_aBaBIII=function(m,q,a,l,k){var f=GLLib.Mem_GetShort(m,a);var j=m[a+2];if(k==1){q[l]=gloft.casttobyte((f>>8));q[l]=gloft.casttobyte(((q[l]&127)|(~q[l]&128)));++l}if(k==2){q[l++]=gloft.casttobyte((f&255));q[l++]=gloft.casttobyte((f>>8))}a+=4;var h=0;var e=0;for(var g=504;g>0;--g){var d=gloft.casttoint(null);if(h==0){e=m[a++];d=(e&15)}else{d=(e>>4&15)}h=(h+1&1);var c=d&8;var b=d&7;var p=GLLibPlayer.m_adpcm_data[j];var o=p>>3;if((b&4)!=0){o+=p}if((b&2)!=0){o+=p>>1}if((b&1)!=0){o+=p>>2}if(c!=0){f-=gloft.casttoshort(o)}else{f+=gloft.casttoshort(o)}if(f>32767){f=32767}else{if(f<-32768){f=-32768}}j+=GLLibPlayer.m_adpcm_index[b];if(j<0){j=0}if(j>88){j=88}if(k==1){q[l]=gloft.casttobyte((f>>8));q[l]=gloft.casttobyte(((q[l]&127)|(~q[l]&128)));++l}else{q[l++]=gloft.casttobyte((f&255));q[l++]=gloft.casttobyte((f>>8))}}};GLLibPlayer.SND_CheckWavForADPCMEncoding=function(b){var a=GLLib.Mem_GetShort(b,20);if(false){GLLib.Dbg("AudoFormat of wav : "+a)}if(a==1){if(false){GLLib.Dbg("Audio is PCM encoded and not compressed")}return false}if(false){GLLib.Dbg("Audio is compressed, assuming for now with ADPCM")}return true};GLLibPlayer.Tileset_Init_dup_IIII=function(a,i,h,g){GLLibPlayer.s_TilesetInfo=gloft.ArrayCreation([8],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerInfo=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,GLLibPlayer.k_TilesetLayerCOUNT],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerImage=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,1],null);GLLibPlayer.s_TilesetLayerGraphics=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,1],null);if(!false||(h>0&&g>0)){GLLibPlayer.s_TilesetLayerData=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,2],gloft.casttobyte(null));if(false){GLLibPlayer.s_TilesetLayerInfoRle=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,2],gloft.casttobyte(null));GLLibPlayer.s_TilesetLayerDataMapBuffer=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttobyte(null));GLLibPlayer.s_TilesetLayerDataFlipBuffer=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttobyte(null))}GLLibPlayer.s_TilesetSprite=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],null);if(false){GLLibPlayer.s_TilesetMultiSprites=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],null)}if(false){var f=h;var e=g;var d=h;if(d<0){GLLib.Assert(false,"Math_Log2.value is negative")}var c=gloft.casttoint(null);for(c=0;d>>c>1;++c){}h=c;var b=g;if(b<0){GLLib.Assert(false,"Math_Log2.value is negative")}var j=gloft.casttoint(null);for(j=0;b>>j>1;++j){}g=j;if(1<<h!=f){GLLib.Assert(false,"Tileset_Init. using GLLibConfig.tileset_UseTileShift with non power of 2 tile width"+h)}if(1<<g!=e){GLLib.Assert(false,"Tileset_Init. using GLLibConfig.tileset_UseTileShift with non power of 2 tile height"+g)}GLLibPlayer.s_TilesetInfo[3]=h;GLLibPlayer.s_TilesetInfo[2]=1<<h;GLLibPlayer.s_TilesetInfo[4]=GLLibPlayer.s_TilesetInfo[2]-1;GLLibPlayer.s_TilesetInfo[6]=g;GLLibPlayer.s_TilesetInfo[5]=1<<g;GLLibPlayer.s_TilesetInfo[7]=GLLibPlayer.s_TilesetInfo[5]-1}else{GLLibPlayer.s_TilesetInfo[2]=h;GLLibPlayer.s_TilesetInfo[4]=0;GLLibPlayer.s_TilesetInfo[5]=g;GLLibPlayer.s_TilesetInfo[7]=0}}if(true){GLLibPlayer.s_TilesetLayerLastUpdatedArea=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,GLLibPlayer.k_TilesetLayerAreaCount,4],gloft.casttoint(null))}if(false){GLLibPlayer.s_TilesetLayerPaddingInfo=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttoint(null))}GLLibPlayer.s_TilesetInfo[0]=a;GLLibPlayer.s_TilesetInfo[1]=i;GLLibPlayer.s_bTilesetPlayerInitialized=true};GLLibPlayer.Tileset_Buffer_CalculateSize=function(a){var i=GLLibPlayer.s_TilesetInfo[0];var h=GLLibPlayer.s_TilesetInfo[1];if(a>=0){i=GLLibPlayer.s_TilesetLayerInfo[a][18];h=GLLibPlayer.s_TilesetLayerInfo[a][19]}if(false){GLLibPlayer.s_TilesetLayerInfo[a][7]=(i&~GLLibPlayer.s_TilesetInfo[4])+1*GLLibPlayer.s_TilesetInfo[2];GLLibPlayer.s_TilesetLayerInfo[a][8]=(h&~GLLibPlayer.s_TilesetInfo[7])+1*GLLibPlayer.s_TilesetInfo[5];if(GLLibPlayer.s_TilesetLayerInfo[a][7]-GLLibPlayer.s_TilesetInfo[0]<GLLibPlayer.s_TilesetInfo[2]){var j=GLLibPlayer.s_TilesetLayerInfo[a];var g=7;j[g]+=GLLibPlayer.s_TilesetInfo[2]}if(GLLibPlayer.s_TilesetLayerInfo[a][8]-GLLibPlayer.s_TilesetInfo[1]<GLLibPlayer.s_TilesetInfo[5]){var m=GLLibPlayer.s_TilesetLayerInfo[a];var f=8;m[f]+=GLLibPlayer.s_TilesetInfo[5]}}else{var e=i%GLLibPlayer.s_TilesetInfo[2];GLLibPlayer.s_TilesetLayerInfo[a][7]=i-e+(1+((e!=0)?1:0))*GLLibPlayer.s_TilesetInfo[2];var d=h%GLLibPlayer.s_TilesetInfo[5];GLLibPlayer.s_TilesetLayerInfo[a][8]=h-d+(1+((d!=0)?1:0))*GLLibPlayer.s_TilesetInfo[5];if(false){if((GLLibPlayer.s_TilesetLayerInfo[a][7]&1)!=0){var l=GLLibPlayer.s_TilesetLayerInfo[a];var c=7;l[c]+=GLLibPlayer.s_TilesetInfo[2]}if((GLLibPlayer.s_TilesetLayerInfo[a][8]&1)!=0){var k=GLLibPlayer.s_TilesetLayerInfo[a];var b=8;k[b]+=GLLibPlayer.s_TilesetInfo[5]}}}};GLLibPlayer.Tileset_Buffer_Create=function(g){try{if(false&&ASprite.s_resizeOn){var f=GLLibPlayer.s_TilesetLayerImage[g];var e=0;var c=GLLibPlayer.s_TilesetLayerInfo[g][7];var b=false?(ASprite.s_resizeUseShifts?(c<<ASprite.s_resizeShiftX):(gloft.casttoint(c*ASprite.s_resizedWidth/ASprite.s_originalWidth))):c;var a=GLLibPlayer.s_TilesetLayerInfo[g][8];f[e]=javax.microedition.lcdui.Image.createImage(b,false?(ASprite.s_resizeUseShifts?(a<<ASprite.s_resizeShiftY):(gloft.casttoint(a*ASprite.s_resizedHeight/ASprite.s_originalHeight))):a)}else{if(false){GLLibPlayer.s_TilesetLayerImage[g][0]=javax.microedition.lcdui.Image.createImage(GLLibPlayer.s_TilesetLayerInfo[g][8],GLLibPlayer.s_TilesetLayerInfo[g][7])}else{GLLibPlayer.s_TilesetLayerImage[g][0]=javax.microedition.lcdui.Image.createImage(GLLibPlayer.s_TilesetLayerInfo[g][7],GLLibPlayer.s_TilesetLayerInfo[g][8])}}GLLibPlayer.s_TilesetLayerGraphics[g][0]=GLLibPlayer.s_TilesetLayerImage[g][0].getGraphics()}catch(d){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer.pb while ceating circular buffer : "+d.toString())}};GLLibPlayer.Tileset_CreateBuffer=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Dbg("Tileset_CreateBuffer: GLLib Tileset functionlity is not intialized, you need to use Tileset_Init first");return}GLLibPlayer.Tileset_Buffer_CalculateSize(a);GLLibPlayer.Tileset_Buffer_Create(a)};GLLibPlayer.isFlag=function(b,a){return(GLLibPlayer.s_TilesetLayerInfo[b][15]&a)!=0};GLLibPlayer.setFlag=function(h,e,a){if(a){var g=GLLibPlayer.s_TilesetLayerInfo[h];var d=15;g[d]|=e}else{var f=GLLibPlayer.s_TilesetLayerInfo[h];var c=15;f[c]&=~e}};GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteZIII=function(a,g,j,i,c,h,f,e,d){if(h){GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZ(a,g,j,i,c,a,f,e,d,false)}else{GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZ(a,g,j,i,c,-1,f,e,d,false)}};GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteZIIIII=function(a,i,l,k,d,j,h,g,f,e,c){GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZII(a,i,l,k,d,a,h,g,f,false,GLLibPlayer.s_TilesetLayerInfo[a][18]=e,GLLibPlayer.s_TilesetLayerInfo[a][19]=c)};GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIII=function(a,g,i,h,b,f,e,d,c){GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZ(a,g,i,h,b,f,e,d,c,false)};GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZ=function(a,h,k,j,c,g,f,e,d,i){GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZII(a,h,k,j,c,g,f,e,d,i,0,0)};GLLibPlayer.Tileset_LoadLayer_dup_IaBaBaBASpriteIIIIZII=function(q,g,w,u,r,k,j,h,f,v,e,d){if(g==null){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer.MapSizes is null")}if(w==null&&!false){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer.MapData is null")}if(r==null&&!false){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer.MapSprite is null")}if(h!=0&&h!=1&&h!=2){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer. X wrapping is not valid")}if(f!=0&&f!=1&&f!=2){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer. Y wrapping is not valid")}if(j!=16&&j!=32){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer. origin is not valid")}if(u==null&&!false){GLLib.Dbg("WARNING GLLibPlayer.Tileset_LoadLayer.MapFlip is null, no flip will occur")}if(!GLLibPlayer.s_bTilesetPlayerInitialized){return}GLLibPlayer.Tileset_Destroy_dup_IZ(q,false);GLLibPlayer.s_TilesetLayerInfo[q][18]=e;GLLibPlayer.s_TilesetLayerInfo[q][19]=d;if(e==0){GLLibPlayer.s_TilesetLayerInfo[q][18]=GLLibPlayer.s_TilesetInfo[0]}if(d==0){GLLibPlayer.s_TilesetLayerInfo[q][19]=GLLibPlayer.s_TilesetInfo[1]}if(!false){if(false&&u!=null){var c=u.length>>2;var s=u.length-(c<<2);var t=gloft.ArrayCreation([c+((s!=0)?1:0)],gloft.casttobyte(null));var a=c;var p=u.length-s-1;while(a--!=0){t[a]=gloft.casttobyte(((u[p--]&3)<<6|(u[p--]&3)<<4|(u[p--]&3)<<2|(u[p--]&3)))}for(var o=u.length-1;s!=0;--s,--o){t[c]|=gloft.casttobyte(((u[o]&3)<<(s-1<<1)))}u=t}GLLibPlayer.s_TilesetLayerData[q][0]=w;GLLibPlayer.s_TilesetLayerData[q][1]=u}GLLibPlayer.s_TilesetLayerInfo[q][2]=GLLib.Mem_GetShort(g,0);GLLibPlayer.s_TilesetLayerInfo[q][3]=GLLib.Mem_GetShort(g,2);if(false){if(GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex==null){GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,2],gloft.casttoint(null))}if(GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft==null){GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttoint(null))}}if((false&&g.length>4)||false){GLLibPlayer.s_TilesetLayerInfo[q][4]=GLLib.Mem_GetShort(g,4)}GLLibPlayer.s_TilesetLayerInfo[q][5]=GLLibPlayer.s_TilesetLayerInfo[q][2]*GLLibPlayer.s_TilesetInfo[2];GLLibPlayer.s_TilesetLayerInfo[q][6]=GLLibPlayer.s_TilesetLayerInfo[q][3]*GLLibPlayer.s_TilesetInfo[5];GLLibPlayer.s_TilesetSprite[q]=r;if(k>-1){GLLibPlayer.Tileset_Buffer_CalculateSize(q);if(k==q){var m=gloft.casttoint(null);var l=gloft.casttoint(null);if(false){m=8;l=7}else{m=7;l=8}if(GLLibPlayer.s_TilesetLayerImage[q][0]==null||GLLibPlayer.s_TilesetLayerImage[q][0].getWidth()!=GLLibPlayer.s_TilesetLayerInfo[q][m]||GLLibPlayer.s_TilesetLayerImage[q][0].getHeight()!=GLLibPlayer.s_TilesetLayerInfo[q][l]){GLLibPlayer.Tileset_Buffer_Create(q)}if(true){GLLibPlayer.setFlag(q,64,true)}}else{if(GLLibPlayer.s_TilesetLayerImage[k][0]==null){GLLib.Assert(false,"GLLibPlayer.Tileset_LoadLayer. layer "+k+" has no circular buffer allocated")}GLLibPlayer.s_TilesetLayerImage[q][0]=GLLibPlayer.s_TilesetLayerImage[k][0];GLLibPlayer.s_TilesetLayerGraphics[q][0]=GLLibPlayer.s_TilesetLayerGraphics[k][0]}GLLibPlayer.setFlag(q,4,true);if(true&&(v||GLLibPlayer.isFlag(q,64))){GLLibPlayer.setFlag(q,128,true)}}GLLibPlayer.s_TilesetLayerInfo[q][9]=-1;GLLibPlayer.s_TilesetLayerInfo[q][10]=-1;GLLibPlayer.s_TilesetLayerInfo[q][11]=-1;GLLibPlayer.s_TilesetLayerInfo[q][12]=-1;GLLibPlayer.s_TilesetLayerInfo[q][0]=1;GLLibPlayer.s_TilesetLayerInfo[q][1]=1;GLLibPlayer.s_TilesetLayerInfo[q][13]=0;GLLibPlayer.s_TilesetLayerInfo[q][14]=0;GLLibPlayer.s_TilesetLayerInfo[q][16]=0;GLLibPlayer.s_TilesetLayerInfo[q][17]=0;GLLibPlayer.setFlag(q,1,h==1);GLLibPlayer.setFlag(q,16,h==0);GLLibPlayer.setFlag(q,2,f==1);GLLibPlayer.setFlag(q,32,f==0);GLLibPlayer.setFlag(q,8,j==32);if(false){GLLibPlayer.s_TilesetLayerInfo[q][21]=-1;GLLibPlayer.s_TilesetLayerInfo[q][22]=-1}};GLLibPlayer.Tileset_SetUseRleCompress=function(c,b,a){GLLibPlayer.s_TilesetLayerInfo[c][20]=1;GLLibPlayer.s_TilesetLayerInfo[c][23]=b;GLLibPlayer.s_TilesetLayerInfo[c][24]=a;GLLibPlayer.s_TilesetLayerInfo[c][25]=gloft.casttoint(GLLibPlayer.s_TilesetInfo[0]/GLLibPlayer.s_TilesetInfo[2])+(b<<1);GLLibPlayer.s_TilesetLayerInfo[c][26]=gloft.casttoint(GLLibPlayer.s_TilesetInfo[1]/GLLibPlayer.s_TilesetInfo[5])+(a<<1);GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft[c]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][26]<<1],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft[c]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][26]<<1],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight[c]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][26]<<1],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight[c]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][26]<<1],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[c][0]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][3]],gloft.casttoint(null));GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[c][1]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[c][3]],gloft.casttoint(null))};GLLibPlayer.Tileset_SetDataRle=function(f,e,d,c){if(false&&GLLibPlayer.s_TilesetLayerInfo[f][20]!=0){var b=GLLibPlayer.s_TilesetLayerInfo[f][25];var a=GLLibPlayer.s_TilesetLayerInfo[f][26];GLLibPlayer.s_TilesetLayerInfoRle[f][0]=e;GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[f][0]=d;GLLibPlayer.s_TilesetLayerDataMapBuffer[f]=gloft.ArrayCreation([a,b],gloft.casttobyte(null));GLLibPlayer.s_TilesetLayerData[f][0]=null;if(d!=null){GLLibPlayer.s_TilesetLayerDataFlipBuffer[f]=gloft.ArrayCreation([a,b],gloft.casttobyte(null))}}};GLLibPlayer.Tileset_ConvertDataToRle=function(b,a){if(false&&GLLibPlayer.s_TilesetLayerInfo[b][20]!=0){if(GLLibPlayer.s_TilesetLayerData[b][0]!=null){GLLibPlayer.s_TilesetLayerInfoRle[b][0]=GLLibPlayer.CompressDataToRLE(GLLibPlayer.s_TilesetLayerData[b][0],GLLibPlayer.s_TilesetLayerInfo[b][2],GLLibPlayer.s_TilesetLayerInfo[b][3],GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[b][0],a);GLLibPlayer.s_TilesetLayerData[b][0]=GLLibPlayer.DecodeRleCompressedData(GLLibPlayer.s_TilesetLayerInfoRle[b][0],GLLibPlayer.s_TilesetLayerInfo[b][2],GLLibPlayer.s_TilesetLayerInfo[b][3],GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[b][0]);GLLibPlayer.s_TilesetLayerDataMapBuffer[b]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[b][26],GLLibPlayer.s_TilesetLayerInfo[b][25]],gloft.casttobyte(null));GLLibPlayer.s_TilesetLayerData[b][0]=null}if(GLLibPlayer.s_TilesetLayerData[b][1]!=null){GLLibPlayer.s_TilesetLayerInfoRle[b][1]=GLLibPlayer.CompressDataToRLE(GLLibPlayer.s_TilesetLayerData[b][1],GLLibPlayer.s_TilesetLayerInfo[b][2],GLLibPlayer.s_TilesetLayerInfo[b][3],GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[b][1],a);GLLibPlayer.s_TilesetLayerData[b][1]=GLLibPlayer.DecodeRleCompressedData(GLLibPlayer.s_TilesetLayerInfoRle[b][1],GLLibPlayer.s_TilesetLayerInfo[b][2],GLLibPlayer.s_TilesetLayerInfo[b][3],GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[b][1]);GLLibPlayer.s_TilesetLayerDataFlipBuffer[b]=gloft.ArrayCreation([GLLibPlayer.s_TilesetLayerInfo[b][26],GLLibPlayer.s_TilesetLayerInfo[b][25]],gloft.casttobyte(null));GLLibPlayer.s_TilesetLayerData[b][1]=null}}};GLLibPlayer.CompressDataToRLE=function(l,a,k,r,q){var h=0;var f=0;for(var d=0;d<k;++d){r[d]=h;var g=f+a;while(f<g){var o=gloft.casttobyte(null);var m=o=l[f];var e=1;for(var c=f+e;c<java.lang.Math.min(f+127,g)&&l[c]==o;++c){e=gloft.casttobyte((e+1))}if(e>1){f+=e;q[h++]=gloft.casttobyte((128|e));q[h++]=m}else{++f;if(m>>7!=0){q[h++]=-127;q[h++]=m}else{q[h++]=m}}}}var p=gloft.ArrayCreation([h],gloft.casttobyte(null));java.lang.System.arraycopy(q,0,p,0,h);return p};GLLibPlayer.DecodeRleCompressedData=function(l,a,k,q){var p=gloft.ArrayCreation([a*k],gloft.casttobyte(null));var h=0;for(var f=0;f<k;++f){var g=q[f];var e=(f==k-1)?l.length:q[f+1];var d=g;while(d<e){var o=l[d++];if(o<0){var c=o&127;var m=l[d++];do{p[h++]=m}while(--c>0)}else{p[h++]=o}}}return p};GLLibPlayer.RebuildRleCompressedCatchBuffer=function(f,e,c){var a=GLLibPlayer.s_TilesetLayerInfo[f][26];for(var d=0;d<a;++d){GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(f,c+d,d,e,0)}for(var b=0;b<a;++b){GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(f,c+b,b,e,1)}};GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine=function(s,l,k,j,h){var i=GLLibPlayer.s_TilesetLayerInfoRle[s][h];var x=GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[s][h];var w=null;var u=null;var t=null;if(h==0){w=GLLibPlayer.s_TilesetLayerDataMapBuffer[s][k];u=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft;t=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight}else{if(GLLibPlayer.s_TilesetLayerDataFlipBuffer[s]==null){return}w=GLLibPlayer.s_TilesetLayerDataFlipBuffer[s][k];u=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft;t=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight}var g=GLLibPlayer.s_TilesetLayerInfo[s][25];var e=x[l];var c=(l==x.length-1)?i.length:x[l+1];var a=e;var r=0;var q=0;var p=0;var o=GLLibPlayer.s_TilesetLayerInfo[s][27];while(a<c&&p<g){var v=i[a++];if(v<0){var f=gloft.casttobyte((v&127));var m=0;var d=i[a++];do{if(q==0&&r==j){q=1;u[s][k<<1]=a-2;u[s][(k<<1)+1]=m+1}if(q!=0){w[o]=d;if(++o>=g){o=0}if(++p==g){t[s][k<<1]=a-2;t[s][(k<<1)+1]=m+1;break}}++r}while(++m<f)}else{if(q==0&&r==j){q=1;u[s][k<<1]=a-1;u[s][(k<<1)+1]=0}if(q!=0){w[o]=v;if(++o>=g){o=0}if(++p==g){t[s][k<<1]=a-1;t[s][(k<<1)+1]=0;break}}++r}}};GLLibPlayer.Tileset_DecodeRleCompressedDataRightColumn=function(a,g,f){var h=GLLibPlayer.s_TilesetLayerInfoRle[a][f];var m=GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[a][f];var e=GLLibPlayer.s_TilesetLayerInfo[a][26];var d=GLLibPlayer.s_TilesetLayerInfo[a][28];var b=GLLibPlayer.s_TilesetLayerInfo[a][27];var l=null;var k=null;if(f==0){l=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft;k=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight}else{if(GLLibPlayer.s_TilesetLayerDataFlipBuffer[a]==null){return}l=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft;k=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight}for(var c=g;c<g+e;++c){var j=null;if(f==0){j=GLLibPlayer.s_TilesetLayerDataMapBuffer[a][d]}else{j=GLLibPlayer.s_TilesetLayerDataFlipBuffer[a][d]}GLLibPlayer.Tileset_CaluateRightTileInSourcePosRle(a,d,c,h,l,m);GLLibPlayer.Tileset_CaluateRightTileInSourcePosRle(a,d,c,h,k,m);if(k[a][(d<<1)+1]==0){j[b]=h[k[a][d<<1]]}else{j[b]=h[k[a][d<<1]+1]}if(++d==e){d=0}}};GLLibPlayer.Tileset_CaluateRightTileInSourcePosRle=function(a,h,g,i,m,l){var f=m[a][h<<1];var e=m[a][(h<<1)+1];var d=f+1;var j=false;if(e==0){j=true}else{if(e==(i[f]&127)){++d;j=true}}if(j){if(i[d]<0){m[a][h<<1]=d;m[a][(h<<1)+1]=1}else{m[a][h<<1]=d;m[a][(h<<1)+1]=0}}else{var k=m[a];var c=(h<<1)+1;++k[c]}};GLLibPlayer.Tileset_DecodeRleCompressedDataLeftColumn=function(a,g,f){var h=GLLibPlayer.s_TilesetLayerInfoRle[a][f];var m=GLLibPlayer.s_TilesetLayerInfoRleLineStartIndex[a][f];var e=GLLibPlayer.s_TilesetLayerInfo[a][26];var d=GLLibPlayer.s_TilesetLayerInfo[a][28];var b=GLLibPlayer.s_TilesetLayerInfo[a][27];var l=null;var k=null;if(f==0){l=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexLeft;k=GLLibPlayer.s_TilesetLayerDataMapBufferXSourceIndexRight}else{if(GLLibPlayer.s_TilesetLayerDataFlipBuffer[a]==null){return}l=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexLeft;k=GLLibPlayer.s_TilesetLayerDataFlipBufferXSourceIndexRight}for(var c=g;c<g+e;++c){var j=null;if(f==0){j=GLLibPlayer.s_TilesetLayerDataMapBuffer[a][d]}else{j=GLLibPlayer.s_TilesetLayerDataFlipBuffer[a][d]}GLLibPlayer.Tileset_CaluateLeftTileInSourcePosRle(a,d,c,h,l,m);GLLibPlayer.Tileset_CaluateLeftTileInSourcePosRle(a,d,c,h,k,m);if(l[a][(d<<1)+1]==0){j[b]=h[l[a][d<<1]]}else{j[b]=h[l[a][d<<1]+1]}if(++d==e){d=0}}};GLLibPlayer.Tileset_CaluateLeftTileInSourcePosRle=function(a,j,i,k,p,o){var h=p[a][j<<1];var g=p[a][(j<<1)+1];if(g==1||g==0){var f=h-1;if(k[f]<0){var m=gloft.casttobyte((k[f-1]&127));p[a][j<<1]=f-1;p[a][(j<<1)+1]=m}else{var e=o[i];if(f==e||(k[f-1]&128)==0){p[a][j<<1]=f;p[a][(j<<1)+1]=0}else{var d=1;for(var c=f-1;c>=e&&(k[c]&128)!=0;--c){++d}if((d&1)==0){var l=gloft.casttobyte((k[f-1]&127));p[a][j<<1]=f-1;p[a][(j<<1)+1]=l}else{p[a][j<<1]=f;p[a][(j<<1)+1]=0}}}}else{p[a][(j<<1)+1]=g-1}};GLLibPlayer.DecodeRleCompressedDataOneLine=function(j,o,a,h,m){var g=m[h];var f=(h==m.length-1)?j.length:m[h+1];var e=g;var d=0;while(e<f){var l=j[e++];if(l<0){var c=l&127;var k=j[e++];do{o[d++]=k}while(--c>0)}else{o[d++]=l}}};GLLibPlayer.Tileset_Destroy_dup_I=function(a){GLLibPlayer.Tileset_Destroy_dup_IZ(a,true)};GLLibPlayer.Tileset_Destroy_dup_IZ=function(c,a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){return}GLLibPlayer.s_TilesetLayerInfo[c]=gloft.ArrayCreation([GLLibPlayer.k_TilesetLayerCOUNT],gloft.casttoint(null));if(a){GLLibPlayer.s_TilesetLayerImage[c]=gloft.ArrayCreation([1],null);GLLibPlayer.s_TilesetLayerGraphics[c]=gloft.ArrayCreation([1],null)}if(!false||GLLibPlayer.s_TilesetLayerData!=null){GLLibPlayer.s_TilesetLayerData[c]=gloft.ArrayCreation([2],gloft.casttobyte(null));GLLibPlayer.s_TilesetSprite[c]=null}if(false&&GLLibPlayer.s_TilesetMultiSprites[c]!=null){GLLibPlayer.s_TilesetMultiSprites[c]=null}if(false){GLLibPlayer.Tileset_ReleaseSpriteMasks(c)}if(false){GLLibPlayer.s_TilesetLayerPaddingInfo[c]=null}};GLLibPlayer.Tileset_Draw=function(E,O,C,B){if(!GLLibPlayer.s_bTilesetPlayerInitialized){return}var A=GLLibPlayer.s_TilesetInfo[0];var z=GLLibPlayer.s_TilesetInfo[1];if(B==-1){for(var R=0;R<GLLibPlayer.s_TilesetMaxLayerCount;++R){if(true){if(R!=GLLibPlayer.s_TilesetAlphaLayer){GLLibPlayer.Tileset_Draw(E,O,C,R)}}else{GLLibPlayer.Tileset_Draw(E,O,C,R)}}return}var y=GLLibPlayer.s_TilesetLayerInfo[B][18];var x=GLLibPlayer.s_TilesetLayerInfo[B][19];if(y==0){GLLibPlayer.s_TilesetLayerInfo[B][18]=GLLibPlayer.s_TilesetInfo[0];y=GLLibPlayer.s_TilesetLayerInfo[B][18]}if(x==0){GLLibPlayer.s_TilesetLayerInfo[B][19]=GLLibPlayer.s_TilesetInfo[1];y=GLLibPlayer.s_TilesetLayerInfo[B][18]}var c=GLLibPlayer.s_TilesetLayerInfo[B];if(c[0]!=1||c[1]!=1){return}var Q=c[13]+c[16];var P=c[14]+c[17];if(GLLibPlayer.isFlag(B,4)){var u=0;var t=0;var e=0;var d=0;if((true&&ASprite._customGraphics!=null)||E!=null){u=GLLib.GetClipX(E,true);t=GLLib.GetClipY(E,true);e=GLLib.GetClipWidth(E,true);d=GLLib.GetClipHeight(E,true)}if(true&&GLLibPlayer.isFlag(B,128)){GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex=0}if(false&&GLLibPlayer.isFlag(B,256)){GLLibPlayer.Tileset_UpdateEmptyTilemapLayer(B)}else{var w=gloft.casttoint(null);var v=gloft.casttoint(null);var N=gloft.casttoint(null);var M=gloft.casttoint(null);if(false){w=Q>>GLLibPlayer.s_TilesetInfo[3];v=P>>GLLibPlayer.s_TilesetInfo[6];N=Q+GLLibPlayer.s_TilesetInfo[0]>>GLLibPlayer.s_TilesetInfo[3];M=P+GLLibPlayer.s_TilesetInfo[1]>>GLLibPlayer.s_TilesetInfo[6]}else{var L=Q;var K=P;if(L<0){L-=GLLibPlayer.s_TilesetInfo[2]}if(K<0){K-=GLLibPlayer.s_TilesetInfo[5]}w=gloft.casttoint(L/GLLibPlayer.s_TilesetInfo[2]);v=gloft.casttoint(K/GLLibPlayer.s_TilesetInfo[5]);N=w+gloft.casttoint(c[7]/GLLibPlayer.s_TilesetInfo[2])-1;M=v+gloft.casttoint(c[8]/GLLibPlayer.s_TilesetInfo[5])-1}var J=0;var I=0;if(c[10]!=v||c[12]!=M){if(c[10]<v||c[12]<M){if(c[12]<v){J=v;I=M}else{J=c[12]+1;I=M}}else{if(c[10]>M){J=v;I=M}else{J=v;I=c[10]-1}}}if(c[9]!=w||c[11]!=N){var H=gloft.casttoint(null);var G=gloft.casttoint(null);if(c[9]<w||c[11]<N){if(c[11]<w){H=w;G=N}else{H=c[11]+1;G=N}}else{if(c[9]>N){H=w;G=N}else{H=w;G=c[9]-1}}var F=M-v;var D=v;if(c[10]!=v||c[12]!=M){if(c[10]<v||c[12]<M){F-=I-J+1}else{F-=I-J+1;D+=I-J+1}}if(F>=0){GLLibPlayer.Tileset_UpdateBuffer(GLLibPlayer.s_TilesetLayerGraphics[B][0],B,H,D,G-H,F,0,0)}c[9]=w;c[11]=N}if(c[10]!=v||c[12]!=M){GLLibPlayer.Tileset_UpdateBuffer(GLLibPlayer.s_TilesetLayerGraphics[B][0],B,w,J,N-w,I-J,0,0);c[10]=v;c[12]=M}}if(E!=null){if(!GLLibPlayer.isFlag(B,273)){if(Q<0){O-=Q;Q=0}else{if(Q>c[5]-y){O-=Q-(c[5]-y);Q=c[5]-y}}}else{while(Q<0){Q+=c[7]}}if(!GLLibPlayer.isFlag(B,290)){if(P<0){C-=P;P=0}else{if(P>c[6]-x){C-=P-(c[6]-x);P=c[6]-x}}}else{while(P<0){P+=c[8]}}var s=Q%c[7];var r=P%c[8];var q=(Q+y)%c[7];var p=(P+x)%c[8];GLLib.SetClip(E,u,t,e,d,true);if(q>s){if(p>r){GLLibPlayer.Tileset_Draw2Screen(E,B,s,r,y,x,0+O,0+C,u,t,e,d)}else{GLLibPlayer.Tileset_Draw2Screen(E,B,s,r,y,x-p,0+O,0+C,u,t,e,d);GLLib.SetClip(E,u,t,e,d,true);GLLibPlayer.Tileset_Draw2Screen(E,B,s,0,y,p,0+O,x-p+C,u,t,e,d)}}else{if(p>r){GLLibPlayer.Tileset_Draw2Screen(E,B,s,r,y-q,x,0+O,0+C,u,t,e,d);GLLib.SetClip(E,u,t,e,d,true);GLLibPlayer.Tileset_Draw2Screen(E,B,0,r,q,x,y-q+O,0+C,u,t,e,d)}else{GLLibPlayer.Tileset_Draw2Screen(E,B,s,r,y-q,x-p,0+O,0+C,u,t,e,d);GLLib.SetClip(E,u,t,e,d,true);GLLibPlayer.Tileset_Draw2Screen(E,B,s,0,y-q,p,0+O,x-p+C,u,t,e,d);GLLib.SetClip(E,u,t,e,d,true);GLLibPlayer.Tileset_Draw2Screen(E,B,0,r,q,x-p,y-q+O,0+C,u,t,e,d);GLLib.SetClip(E,u,t,e,d,true);GLLibPlayer.Tileset_Draw2Screen(E,B,0,0,q,p,y-q+O,x-p+C,u,t,e,d)}}GLLib.SetClip(E,u,t,e,d,true)}}else{if(E!=null){var o=gloft.casttoint(null);var m=gloft.casttoint(null);var l=gloft.casttoint(null);var h=gloft.casttoint(null);var g=gloft.casttoint(null);var f=gloft.casttoint(null);if(false){o=Q>>GLLibPlayer.s_TilesetInfo[3];m=P>>GLLibPlayer.s_TilesetInfo[6];l=y>>GLLibPlayer.s_TilesetInfo[3];if(l<<GLLibPlayer.s_TilesetInfo[3]<y){++l}h=x>>GLLibPlayer.s_TilesetInfo[6];if(h<<GLLibPlayer.s_TilesetInfo[6]<x){++h}g=(o<<GLLibPlayer.s_TilesetInfo[3])-Q;f=(m<<GLLibPlayer.s_TilesetInfo[6])-P}else{var b=Q;var a=P;if(b<0){b-=GLLibPlayer.s_TilesetInfo[2]}if(a<0){a-=GLLibPlayer.s_TilesetInfo[5]}o=gloft.casttoint(b/GLLibPlayer.s_TilesetInfo[2]);m=gloft.casttoint(a/GLLibPlayer.s_TilesetInfo[5]);l=gloft.casttoint(y/GLLibPlayer.s_TilesetInfo[2]);if(l*GLLibPlayer.s_TilesetInfo[2]<y){++l}h=gloft.casttoint(x/GLLibPlayer.s_TilesetInfo[5]);if(h*GLLibPlayer.s_TilesetInfo[5]<x){++h}g=o*GLLibPlayer.s_TilesetInfo[2]-Q;f=m*GLLibPlayer.s_TilesetInfo[5]-P}GLLibPlayer.Tileset_UpdateBuffer(E,B,o,m,l,h,g+O,f+C)}}};GLLibPlayer.Tileset_Draw2Screen=function(c,s,j,i,g,f,e,d,b,a,r,q){if(false&&ASprite.s_resizeOn){var p=j;j=(false?(ASprite.s_resizeUseShifts?(p<<ASprite.s_resizeShiftX):(gloft.casttoint(p*ASprite.s_resizedWidth/ASprite.s_originalWidth))):p);var o=i;i=(false?(ASprite.s_resizeUseShifts?(o<<ASprite.s_resizeShiftY):(gloft.casttoint(o*ASprite.s_resizedHeight/ASprite.s_originalHeight))):o);var m=g;g=(false?(ASprite.s_resizeUseShifts?(m<<ASprite.s_resizeShiftX):(gloft.casttoint(m*ASprite.s_resizedWidth/ASprite.s_originalWidth))):m);var l=f;f=(false?(ASprite.s_resizeUseShifts?(l<<ASprite.s_resizeShiftY):(gloft.casttoint(l*ASprite.s_resizedHeight/ASprite.s_originalHeight))):l);var k=e;e=(false?(ASprite.s_resizeUseShifts?(k<<ASprite.s_resizeShiftX):(gloft.casttoint(k*ASprite.s_resizedWidth/ASprite.s_originalWidth))):k);var h=d;d=(false?(ASprite.s_resizeUseShifts?(h<<ASprite.s_resizeShiftY):(gloft.casttoint(h*ASprite.s_resizedHeight/ASprite.s_originalHeight))):h)}if(e>b+r||d>a+q||e+g<b||d+f<a){return}if(false){if(false){c.drawRegion(GLLibPlayer.s_TilesetLayerImage[s][0],GLLibPlayer.s_TilesetLayerInfo[s][8]-i-f,j,f,g,0,ASprite._graphicsHeight-d-f,e,20)}else{GLLib.DrawRegion_dup_javaxmicroeditionlcduiImageIIIIIIII(GLLibPlayer.s_TilesetLayerImage[s][0],j,i,g,f,0,e,d,20)}}else{GLLib.ClipRect(c,e,d,g,f,true);if(false){GLLib.DrawImage(c,GLLibPlayer.s_TilesetLayerImage[s][0],i-d+ASprite._graphicsHeight-GLLibPlayer.s_TilesetLayerInfo[s][8],e-j,20,false)}else{GLLib.DrawImage(c,GLLibPlayer.s_TilesetLayerImage[s][0],e-j,d-i,20,true)}}};GLLibPlayer.Tileset_PaintTile=function(g,b,m,l,k,i){var j=GLLibPlayer.Tileset_GetLayerData_dup_IIII(b,0,m,l);var h=255;if(false){h=65535}if(j!=h){var f=null;if(false){var e=j;var d=GLLibPlayer.s_TilesetLayerInfo[b][4];var c=e&(1<<d)-1;j=e>>d;f=GLLibPlayer.s_TilesetMultiSprites[b][c]}else{f=GLLibPlayer.s_TilesetSprite[b]}var a=GLLibPlayer.Tileset_GetTileFlags(b,m,l);if(f.GetFrameCount()==0){f.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIII(g,j,k,i,a)}else{var p=k;var o=i;if(true){if((a&1)!=0){p+=GLLibPlayer.s_TilesetInfo[2]}if((a&2)!=0){o+=GLLibPlayer.s_TilesetInfo[5]}}f.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(g,j,p,o,a,0,0)}}};GLLibPlayer.Tileset_UpdateBuffer=function(U,ag,ak,aj,S,R,Q,P){var g=GLLibPlayer.isFlag(ag,4);var H=0;var G=0;var t=0;var s=0;var K=GLLibPlayer.isFlag(ag,1);var I=GLLibPlayer.isFlag(ag,2);var O=GLLibPlayer.s_TilesetLayerInfo[ag][2];var N=GLLibPlayer.s_TilesetLayerInfo[ag][3];var M=GLLibPlayer.s_TilesetInfo[2];var L=GLLibPlayer.s_TilesetInfo[5];var af=O*N;var ae=O;var ad=N;var ac=0;var ab=0;var aa=0;var Y=0;if(false&&GLLibPlayer.s_TilesetLayerPaddingInfo[ag]!=null){ac=GLLibPlayer.s_TilesetLayerPaddingInfo[ag][0];var W=GLLibPlayer.s_TilesetLayerPaddingInfo[ag][1];ab=GLLibPlayer.s_TilesetLayerPaddingInfo[ag][2];var V=GLLibPlayer.s_TilesetLayerPaddingInfo[ag][3];Y=GLLibPlayer.s_TilesetLayerPaddingInfo[ag][4];O+=ac+W;N+=ab+V;aa=ac+W+(ab+V)}if(false&&g){var q=GLLibPlayer.s_TilesetLayerInfo[ag][7];var x=GLLibPlayer.s_TilesetLayerInfo[ag][8];ASprite._graphicsWidth=q;ASprite._graphicsHeight=x}if(false){H=GLLib.GetClipX(U,true);G=GLLib.GetClipY(U,true);t=GLLib.GetClipWidth(U,true);s=GLLib.GetClipHeight(U,true)}var T=gloft.casttoint(null);var F=gloft.casttoint(null);if(g){if(false){T=(ak<<GLLibPlayer.s_TilesetInfo[3])%GLLibPlayer.s_TilesetLayerInfo[ag][7]+Q;F=(aj<<GLLibPlayer.s_TilesetInfo[6])%GLLibPlayer.s_TilesetLayerInfo[ag][8]+P}else{T=ak*GLLibPlayer.s_TilesetInfo[2]%GLLibPlayer.s_TilesetLayerInfo[ag][7]+Q;F=aj*GLLibPlayer.s_TilesetInfo[5]%GLLibPlayer.s_TilesetLayerInfo[ag][8]+P}if(T<0){T+=GLLibPlayer.s_TilesetLayerInfo[ag][7]}if(F<0){F+=GLLibPlayer.s_TilesetLayerInfo[ag][8]}}else{T=Q;F=P}if(K){while(ak<0){ak+=O}while(ak>=O){ak-=O}}else{if(!GLLibPlayer.isFlag(ag,16)){if(ak<0){T-=ak*M;S+=ak;ak=0;if(g&&T>=GLLibPlayer.s_TilesetLayerInfo[ag][7]){T=0}}if(ak+S>=O){S=O-ak-1}if(S<0){if(false){var ah=GLLib.s_screenWidth;var u=GLLib.s_screenHeight;ASprite._graphicsWidth=ah;ASprite._graphicsHeight=u}return}}}if(I){while(aj<0){aj+=N}while(aj>=N){aj-=N}}else{if(!GLLibPlayer.isFlag(ag,32)){if(aj<0){F-=aj*L;R+=aj;aj=0;if(g&&F>=GLLibPlayer.s_TilesetLayerInfo[ag][8]){F=0}}if(aj+R>=N){R=N-aj-1}if(R<0){if(false){var p=GLLib.s_screenWidth;var c=GLLib.s_screenHeight;ASprite._graphicsWidth=p;ASprite._graphicsHeight=c}return}}}var E=T;var D=F;var C=(1<<GLLibPlayer.s_TilesetLayerInfo[ag][4])-1;while(R-->=0){E=T;var B=S;var A=ak;while(B-->=0){var z=gloft.casttoint(null);if(false&&aa!=0){if(A<ac||A>=ae+ac||aj<ab||aj>=ad+ab){z=af;if(Y!=0){var am=Y;if(U==null){GLLib.Assert(false,"setColor: Graphics parameter is null!")}U.setColor(am);GLLib.FillRect(U,E,D,M,L)}else{if(false){var Z=-16776961;if(U==null){GLLib.Assert(false,"setColor: Graphics parameter is null!")}U.setColor(Z);GLLib.FillRect(U,E,D,M,L);var X=-16777216;if(U==null){GLLib.Assert(false,"setColor: Graphics parameter is null!")}U.setColor(X);GLLib.DrawRect(U,E,D,M-1,L-1)}}}else{z=A-ac+(aj-ab)*ae}}else{if(false&&GLLibPlayer.s_TilesetLayerInfo[ag][20]!=0){z=0}else{z=A+aj*O}}if(z<af){var y=gloft.casttoint(null);var al=gloft.casttoboolean(null);if(false&&GLLibPlayer.s_TilesetMultiSprites[ag]!=null){y=GLLibPlayer.Tileset_GetLayerData_dup_IIIZ(ag,0,z,true);al=(y==65535);if(!al){GLLibPlayer.s_TilesetSprite[ag]=GLLibPlayer.s_TilesetMultiSprites[ag][y&C];y>>=GLLibPlayer.s_TilesetLayerInfo[ag][4]}}else{if(false){y=GLLibPlayer.Tileset_GetLayerData_dup_IIIZ(ag,0,z,true);al=(y==65535)}else{if(false&&GLLibPlayer.s_TilesetLayerInfo[ag][20]!=0){y=GLLibPlayer.Tileset_GetLayerData_dup_IIII(ag,0,A,aj)}else{y=GLLibPlayer.Tileset_GetLayerData_dup_III(ag,0,z)}al=(y==255)}}if(!al){var w=gloft.casttoint(null);if(false&&GLLibPlayer.s_TilesetLayerInfo[ag][20]!=0){if(GLLibPlayer.s_TilesetLayerDataFlipBuffer[ag]==null){w=0}else{w=GLLibPlayer.Tileset_GetLayerData_dup_IIII(ag,1,A,aj)}}else{if(GLLibPlayer.Tileset_GetLayerBlock_dup_III(ag,1,z)==null){w=0}else{w=GLLibPlayer.Tileset_GetLayerData_dup_III(ag,1,z)}}if(GLLib.pfx_useSpriteEffects){if((GLLib.s_PFX_type&1<<13)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Scaling is enabled on the tileset!")}if((GLLib.s_PFX_type&1<<17)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Scaling And Grayscale is enabled on the tileset!")}if((GLLib.s_PFX_type&1<<12)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Blend is enabled on the tileset!")}if((GLLib.s_PFX_type&1<<5)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Additive is enabled on the tileset, please see Tileset_SetAlphaEffects!")}if((GLLib.s_PFX_type&1<<6)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Multiplicative is enabled on the tileset, please see Tileset_SetAlphaEffects!")}if((GLLib.s_PFX_type&1<<7)!=0){GLLib.Assert(false,"Tileset_UpdateBuffer: Warning PFX Overlay is enabled on the tileset, please see Tileset_SetAlphaEffects!")}}if(false){GLLib.ClipRect(U,E,D,M,L,true)}if(GLLibPlayer.s_TilesetSprite[ag].GetFrameCount()==0){GLLibPlayer.s_TilesetSprite[ag].PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIII(U,y,E,D,w,M,L)}else{var v=E;var o=D;if(true){if((w&1)!=0){v+=M}if((w&2)!=0){o+=L}}GLLibPlayer.s_TilesetSprite[ag].PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(U,y,v,o,w,0,0)}if(true&&ag==GLLibPlayer.s_TilesetEffectLayer&&GLLibPlayer.s_TilesetAlphaLayer>0){var m=gloft.casttoint(null);var J=gloft.casttoboolean(null);if(false){m=GLLibPlayer.Tileset_GetLayerData_dup_IIIZ(GLLibPlayer.s_TilesetAlphaLayer,0,z,true);J=(m==65535)}else{m=GLLibPlayer.Tileset_GetLayerData_dup_III(GLLibPlayer.s_TilesetAlphaLayer,0,z);J=(m==255)}if(!J){var r=0;if(GLLibPlayer.Tileset_GetLayerBlock_dup_III(GLLibPlayer.s_TilesetAlphaLayer,1,z)!=null){r=GLLibPlayer.Tileset_GetLayerData_dup_III(GLLibPlayer.s_TilesetAlphaLayer,1,z)}if(GLLibPlayer.s_TilesetSprite[GLLibPlayer.s_TilesetAlphaLayer].GetFrameCount()!=0){m=GLLibPlayer.s_TilesetSprite[GLLibPlayer.s_TilesetAlphaLayer].GetFrameModule(m,0)}if(GLLibPlayer.s_TilesetEffectType==2||GLLibPlayer.s_TilesetEffectType==3||GLLibPlayer.s_TilesetEffectType==4||GLLibPlayer.s_TilesetEffectType==5){GLLibPlayer.s_TilesetSprite[GLLibPlayer.s_TilesetAlphaLayer].RenderTilesetEffect_dup_javaxmicroeditionlcduiGraphicsIjavaxmicroeditionlcduiImageIIIIII(U,m,GLLibPlayer.s_TilesetLayerImage[ag][0],GLLibPlayer.s_TilesetEffectType,E,D,M,L,r)}else{if(GLLibPlayer.s_TilesetEffectType==1){GLLibPlayer.s_TilesetSprite[GLLibPlayer.s_TilesetAlphaLayer].PaintModule_dup_javaxmicroeditionlcduiGraphicsIIII(U,m,E,D,r)}}}}if(false){GLLib.SetClip(U,H,G,t,s,true)}}}E+=M;if(++A>=O){if(!K){break}A=0}if(g&&E>=GLLibPlayer.s_TilesetLayerInfo[ag][7]){E=0}}D+=L;if(++aj>=N){if(!I){break}aj=0}if(g&&D>=GLLibPlayer.s_TilesetLayerInfo[ag][8]){D=0}}if(true&&GLLibPlayer.isFlag(ag,128)){var h=gloft.casttoint(null);var f=gloft.casttoint(null);if(E>T){h=E;f=0}else{h=GLLibPlayer.s_TilesetLayerInfo[ag][7];f=E}var e=gloft.casttoint(null);var d=gloft.casttoint(null);if(D>F){e=D;d=0}else{e=GLLibPlayer.s_TilesetLayerInfo[ag][8];d=D}for(var ai=0;ai<4;++ai){if((ai!=1&&ai!=3)||f!=0){if((ai!=2&&ai!=3)||d!=0){GLLibPlayer.Tileset_AddUpdatedArea(ag,(ai==0||ai==2)?T:false,(ai==0||ai==1)?F:false,(ai==0||ai==2)?(h-T):f,(ai==0||ai==1)?(e-F):d)}}}}if(false){var l=GLLib.s_screenWidth;var a=GLLib.s_screenHeight;ASprite._graphicsWidth=l;ASprite._graphicsHeight=a}};GLLibPlayer.Tileset_AddUpdatedArea=function(f,d,c,b,a){if(true){if(GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex>=GLLibPlayer.k_TilesetLayerAreaCount){GLLib.Assert(false,"Tileset_UpdateBuffer: Not enough last updated areas. Increase value for GLLibConfig.tileset_maxUpdatedAreas")}var e=GLLibPlayer.s_TilesetLayerLastUpdatedArea[f][GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex];e[0]=d;e[1]=c;e[2]=b;e[3]=a;++GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex}};GLLibPlayer.Tileset_GetLastUpdatedAreasBoundingBox=function(w,j){if(true){var a=GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex;if(a>0){var p=GLLibPlayer.s_TilesetLayerInfo[w][7];var m=GLLibPlayer.s_TilesetLayerInfo[w][8];var B=GLLibPlayer.s_TilesetLayerInfo[w];var k=B[13];var g=B[14];var e=gloft.casttoint(null);var d=gloft.casttoint(null);if(false&&GLLibPlayer.isFlag(w,256)){e=B[2];d=B[3]}else{e=GLLibPlayer.s_TilesetInfo[2];d=GLLibPlayer.s_TilesetInfo[5]}var c=k%e;var b=g%d;if(c<0){c+=e}if(b<0){b+=d}var v=k-c;var u=g-b;var t=v;var s=u;var r=gloft.casttoint(null);if(GLLibPlayer.isFlag(w,273)&&t<0){r=B[7]+t%B[7]}else{r=t%B[7]}var q=gloft.casttoint(null);if(GLLibPlayer.isFlag(w,290)&&s<0){q=B[8]+s%B[8]}else{q=s%B[8]}var A=GLLibPlayer.s_TilesetLayerLastUpdatedArea[w];var z=A[0];j[0]=z[0]+v-r;if(z[0]<r){var o=0;j[o]+=p}j[1]=z[1]+u-q;if(z[1]<q){var l=1;j[l]+=m}j[2]=j[0]+z[2];j[3]=j[1]+z[3];for(var x=1;x<a;++x){var y=A[x];var h=y[0]+v-r;if(y[0]<r){h+=p}var f=y[1]+u-q;if(y[1]<q){f+=m}GLLib.Math_JoinRects(j,h,f,h+y[2],f+y[3])}}}};GLLibPlayer.Tileset_GetTranslatedOriginY=function(b,a){if(GLLibPlayer.isFlag(b,8)){return GLLibPlayer.s_TilesetLayerInfo[b][6]-GLLibPlayer.s_TilesetInfo[1]-a}return a};GLLibPlayer.Tileset_SetCamera=function(c,b,a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_SetCamera: Tileset player is not initialized");return}if(c<0||c>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_SetCamera: nLayer invalid : "+c);return}if(GLLibPlayer.s_TilesetLayerInfo[c][0]!=1||GLLibPlayer.s_TilesetLayerInfo[c][1]!=1){GLLib.Assert(false,"Tileset_SetCamera: nLayer in not initialized or not enabled.");return}GLLibPlayer.s_TilesetLayerInfo[c][13]=b;GLLibPlayer.s_TilesetLayerInfo[c][14]=GLLibPlayer.Tileset_GetTranslatedOriginY(c,a);if(GLLibPlayer.isFlag(c,16)){if(GLLibPlayer.s_TilesetLayerInfo[c][13]<0){GLLibPlayer.s_TilesetLayerInfo[c][13]=0}else{if(GLLibPlayer.s_TilesetLayerInfo[c][13]+GLLibPlayer.s_TilesetInfo[0]>=GLLibPlayer.s_TilesetLayerInfo[c][5]){GLLibPlayer.s_TilesetLayerInfo[c][13]=GLLibPlayer.s_TilesetLayerInfo[c][5]-GLLibPlayer.s_TilesetInfo[0]-1}}}if(GLLibPlayer.isFlag(c,32)){if(GLLibPlayer.s_TilesetLayerInfo[c][14]<0){GLLibPlayer.s_TilesetLayerInfo[c][14]=0}else{if(GLLibPlayer.s_TilesetLayerInfo[c][14]+GLLibPlayer.s_TilesetInfo[1]>=GLLibPlayer.s_TilesetLayerInfo[c][6]){GLLibPlayer.s_TilesetLayerInfo[c][14]=GLLibPlayer.s_TilesetLayerInfo[c][6]-GLLibPlayer.s_TilesetInfo[1]-1}}}GLLibPlayer.Tileset_UpdateRleBuffer(c,false)};GLLibPlayer.Tileset_UpdateRleBuffer=function(v,C){if(false&&GLLibPlayer.s_TilesetLayerInfo[v][20]!=0){var o=gloft.casttoint(GLLibPlayer.s_TilesetLayerInfo[v][13]/GLLibPlayer.s_TilesetInfo[2]);var m=gloft.casttoint(GLLibPlayer.s_TilesetLayerInfo[v][14]/GLLibPlayer.s_TilesetInfo[5]);var h=o-GLLibPlayer.s_TilesetLayerInfo[v][23];var f=GLLibPlayer.s_TilesetLayerInfo[v][22];var e=GLLibPlayer.s_TilesetLayerInfo[v][26];var d=GLLibPlayer.s_TilesetLayerInfo[v][25];if(h<0){h=0}if(h+d>GLLibPlayer.s_TilesetLayerInfo[v][2]){h=GLLibPlayer.s_TilesetLayerInfo[v][2]-d}if(C||GLLibPlayer.s_TilesetLayerInfo[v][21]==-1){var c=m-GLLibPlayer.s_TilesetLayerInfo[v][24];if(c<0){c=0}if(c+e>GLLibPlayer.s_TilesetLayerInfo[v][3]){c=GLLibPlayer.s_TilesetLayerInfo[v][3]-e}GLLibPlayer.s_TilesetLayerInfo[v][21]=h;GLLibPlayer.s_TilesetLayerInfo[v][22]=c;GLLibPlayer.s_TilesetLayerInfo[v][27]=0;GLLibPlayer.s_TilesetLayerInfo[v][28]=0;GLLibPlayer.RebuildRleCompressedCatchBuffer(v,h,c)}else{if(h<GLLibPlayer.s_TilesetLayerInfo[v][21]){for(var z=GLLibPlayer.s_TilesetLayerInfo[v][21]-h;z>0;--z){var g=GLLibPlayer.s_TilesetLayerInfo[v];var a=27;--g[a];if(GLLibPlayer.s_TilesetLayerInfo[v][27]<0){GLLibPlayer.s_TilesetLayerInfo[v][27]=d-1}GLLibPlayer.Tileset_DecodeRleCompressedDataLeftColumn(v,f,0);GLLibPlayer.Tileset_DecodeRleCompressedDataLeftColumn(v,f,1)}}else{if(h>GLLibPlayer.s_TilesetLayerInfo[v][21]){for(var y=h-GLLibPlayer.s_TilesetLayerInfo[v][21];y>0;--y){GLLibPlayer.Tileset_DecodeRleCompressedDataRightColumn(v,f,0);GLLibPlayer.Tileset_DecodeRleCompressedDataRightColumn(v,f,1);var D=GLLibPlayer.s_TilesetLayerInfo[v];var u=27;++D[u];if(GLLibPlayer.s_TilesetLayerInfo[v][27]>=d){GLLibPlayer.s_TilesetLayerInfo[v][27]=0}}}}var t=m-GLLibPlayer.s_TilesetLayerInfo[v][24];if(t<0){t=0}if(t+e>GLLibPlayer.s_TilesetLayerInfo[v][3]){t=GLLibPlayer.s_TilesetLayerInfo[v][3]-e}if(t>GLLibPlayer.s_TilesetLayerInfo[v][22]){for(var x=t-GLLibPlayer.s_TilesetLayerInfo[v][22],s=GLLibPlayer.s_TilesetLayerInfo[v][22]+e;x>0;--x,++s){GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(v,s,GLLibPlayer.s_TilesetLayerInfo[v][28],h,0);GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(v,s,GLLibPlayer.s_TilesetLayerInfo[v][28],h,1);var B=GLLibPlayer.s_TilesetLayerInfo[v];var r=28;++B[r];if(GLLibPlayer.s_TilesetLayerInfo[v][28]>=e){GLLibPlayer.s_TilesetLayerInfo[v][28]=0}}}else{if(t<GLLibPlayer.s_TilesetLayerInfo[v][22]){for(var w=GLLibPlayer.s_TilesetLayerInfo[v][22]-t,q=GLLibPlayer.s_TilesetLayerInfo[v][22]-1;w>0;--w,--q){var A=GLLibPlayer.s_TilesetLayerInfo[v];var p=28;--A[p];if(GLLibPlayer.s_TilesetLayerInfo[v][28]<0){GLLibPlayer.s_TilesetLayerInfo[v][28]=e-1}GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(v,q,GLLibPlayer.s_TilesetLayerInfo[v][28],h,0);GLLibPlayer.Tileset_DecodeRleCompressedDataOneLine(v,q,GLLibPlayer.s_TilesetLayerInfo[v][28],h,1)}}}GLLibPlayer.s_TilesetLayerInfo[v][21]=h;GLLibPlayer.s_TilesetLayerInfo[v][22]=t}}};GLLibPlayer.Tileset_GetCamera=function(a){GLLib.Warning("GLLibPlayer.Tileset_GetCamera(int nLayer) . this function is deprecated, use GLLibPlayer.Tileset_GetCameraX(int nLayer) and GLLibPlayer.Tileset_GetCameraY(int nLayer) instead");return[GLLibPlayer.Tileset_GetCameraX(a),GLLibPlayer.Tileset_GetCameraY(a)]};GLLibPlayer.Tileset_GetCameraX=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetCamera: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetCamera: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetCamera: nLayer in not initialized or not enabled.");return -1}return GLLibPlayer.s_TilesetLayerInfo[a][13]};GLLibPlayer.Tileset_GetCameraY=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetCamera: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetCamera: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetCamera: nLayer in not initialized or not enabled.");return -1}if(GLLibPlayer.isFlag(a,8)){return GLLibPlayer.s_TilesetLayerInfo[a][6]-GLLibPlayer.s_TilesetInfo[1]-GLLibPlayer.s_TilesetLayerInfo[a][14]}return GLLibPlayer.s_TilesetLayerInfo[a][14]};GLLibPlayer.Tileset_GetLayerWidth=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetLayerWidth: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetLayerWidth: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetLayerWidth: nLayer in not initialized or not enabled.");return -1}return GLLibPlayer.s_TilesetLayerInfo[a][5]};GLLibPlayer.Tileset_GetLayerHeight=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetLayerHeight: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetLayerHeight: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetLayerHeight: nLayer in not initialized or not enabled.");return -1}return GLLibPlayer.s_TilesetLayerInfo[a][6]};GLLibPlayer.Tileset_GetLayerTileCountWidth=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetLayerTileCountWidth: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetLayerTileCountWidth: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetLayerTileCountWidth: nLayer in not initialized or not enabled.");return -1}return GLLibPlayer.s_TilesetLayerInfo[a][2]};GLLibPlayer.Tileset_GetLayerTileCountHeight=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetLayerTileCountHeight: Tileset player is not initialized");return -1}if(a<0||a>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetLayerTileCountHeight: nLayer invalid : "+a);return -1}if(GLLibPlayer.s_TilesetLayerInfo[a][0]!=1||GLLibPlayer.s_TilesetLayerInfo[a][1]!=1){GLLib.Assert(false,"Tileset_GetLayerTileCountHeight: nLayer in not initialized or not enabled.");return -1}return GLLibPlayer.s_TilesetLayerInfo[a][3]};GLLibPlayer.Tileset_GetTile=function(d,b,a){a=GLLibPlayer.Tileset_GetTranslatedOriginY(d,a);if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetTile: Tileset player is not initialized");return -1}if(d<0||d>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetTile: nLayer invalid : "+d);return -1}if(GLLibPlayer.s_TilesetLayerInfo[d][0]!=1||GLLibPlayer.s_TilesetLayerInfo[d][1]!=1){GLLib.Assert(false,"Tileset_GetTile: nLayer in not initialized or not enabled.");return -1}if(b<0||b>GLLibPlayer.s_TilesetLayerInfo[d][2]){GLLib.Assert(false,"Tileset_GetTile: x value out of bound ["+b+"]  0 <= x < "+GLLibPlayer.s_TilesetLayerInfo[d][2]);return -1}if(a<0||a>GLLibPlayer.s_TilesetLayerInfo[d][3]){GLLib.Assert(false,"Tileset_GetTile: y value out of bound ["+a+"]  0 <= y < "+GLLibPlayer.s_TilesetLayerInfo[d][3]);return -1}var c=GLLibPlayer.Tileset_GetLayerData_dup_IIII(d,0,b,a);if(false&&GLLibPlayer.s_TilesetMultiSprites[d]!=null){c>>=GLLibPlayer.s_TilesetLayerInfo[d][4]}return c};GLLibPlayer.Tileset_GetTileFlags=function(c,b,a){a=GLLibPlayer.Tileset_GetTranslatedOriginY(c,a);if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetTileFlags: Tileset player is not initialized");return -1}if(c<0||c>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetTileFlags: nLayer invalid : "+c);return -1}if(GLLibPlayer.s_TilesetLayerInfo[c][0]!=1||GLLibPlayer.s_TilesetLayerInfo[c][1]!=1){GLLib.Assert(false,"Tileset_GetTileFlags: nLayer in not initialized or not enabled.");return -1}if(b<0||b>GLLibPlayer.s_TilesetLayerInfo[c][2]){GLLib.Assert(false,"Tileset_GetTileFlags: x value out of bound ["+b+"]  0 <= x < "+GLLibPlayer.s_TilesetLayerInfo[c][2]);return -1}if(a<0||a>GLLibPlayer.s_TilesetLayerInfo[c][3]){GLLib.Assert(false,"Tileset_GetTileFlags: y value out of bound ["+a+"]  0 <= y < "+GLLibPlayer.s_TilesetLayerInfo[c][3]);return -1}if(GLLibPlayer.Tileset_GetLayerBlock_dup_IIII(c,1,b,a)==null){return 0}return GLLibPlayer.Tileset_GetLayerData_dup_IIII(c,1,b,a)};GLLibPlayer.Tileset_GetBufferImage=function(b,a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetBufferImage: Tileset player is not initialized");return null}if(b<0||b>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetBufferImage: p_iLayer invalid : "+b);return null}if(a<0||a>=1){GLLib.Assert(false,"Tileset_GetBufferImage: p_iImage invalid : "+a);return null}return GLLibPlayer.s_TilesetLayerImage[b][a]};GLLibPlayer.Tileset_GetBufferGraphics=function(b,a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetBufferGraphics: Tileset player is not initialized");return null}if(b<0||b>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetBufferGraphics: p_iLayer invalid : "+b);return null}if(a<0||a>=1){GLLib.Assert(false,"Tileset_GetBufferGraphics: p_iImage invalid : "+a);return null}return GLLibPlayer.s_TilesetLayerGraphics[b][a]};GLLibPlayer.Tileset_Refresh=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){return}if(false&&GLLibPlayer.isFlag(a,256)){GLLibPlayer.s_TilesetLayerInfo[a][9]=1}else{GLLibPlayer.s_TilesetLayerInfo[a][9]=-1;GLLibPlayer.s_TilesetLayerInfo[a][10]=-1;GLLibPlayer.s_TilesetLayerInfo[a][11]=-1;GLLibPlayer.s_TilesetLayerInfo[a][12]=-1}};GLLibPlayer.Tileset_SetAlphaEffects=function(c,a,b){if(true){GLLibPlayer.s_TilesetEffectLayer=c;GLLibPlayer.s_TilesetAlphaLayer=a;GLLibPlayer.s_TilesetEffectType=b}else{GLLib.Dbg("Tileset_SetAlphaEffects: Effects are not enabled, you must set tileset_usePixelEffects to TRUE!")}};GLLibPlayer.Tileset_SetTile=function(e,d,b,c,a){b=GLLibPlayer.Tileset_GetTranslatedOriginY(e,b);if(false){d>>=GLLibPlayer.s_TilesetInfo[3];b>>=GLLibPlayer.s_TilesetInfo[6]}else{d=gloft.casttoint(d/GLLibPlayer.s_TilesetInfo[2]);b=gloft.casttoint(b/GLLibPlayer.s_TilesetInfo[5])}if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_SetTile: Tileset player is not initialized");return}if(e<0||e>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_SetTile: layer invalid : "+e);return}if(GLLibPlayer.s_TilesetLayerInfo[e][0]!=1||GLLibPlayer.s_TilesetLayerInfo[e][1]!=1){GLLib.Assert(false,"Tileset_SetTile: layer is not initialized or not enabled.");return}if(d<0||d>GLLibPlayer.s_TilesetLayerInfo[e][2]){GLLib.Assert(false,"Tileset_SetTile: x value out of bound ["+d+"]  0 <= x < "+GLLibPlayer.s_TilesetLayerInfo[e][2]);return}if(b<0||b>GLLibPlayer.s_TilesetLayerInfo[e][3]){GLLib.Assert(false,"Tileset_SetTile: y value out of bound ["+b+"]  0 <= y < "+GLLibPlayer.s_TilesetLayerInfo[e][3]);return}d+=b*GLLibPlayer.s_TilesetLayerInfo[e][2];if(c!=-1){if(false){if(false&&GLLibPlayer.s_TilesetMultiSprites[e]!=null){c<<=GLLibPlayer.s_TilesetLayerInfo[e][4]}GLLibPlayer.Tileset_SetLayerData_dup_IIIIZ(e,0,d,c,true)}else{if(false&&GLLibPlayer.s_TilesetMultiSprites[e]!=null){c<<=GLLibPlayer.s_TilesetLayerInfo[e][4]}GLLibPlayer.Tileset_SetLayerData_dup_IIII(e,0,d,c)}}if(a!=-1){GLLibPlayer.Tileset_SetLayerData_dup_IIII(e,1,d,a)}};GLLibPlayer.Tileset_SetColor=function(c,b){var a=GLLibPlayer.s_TilesetLayerGraphics[c][0];if(a==null){GLLib.Assert(false,"setColor: Graphics parameter is null!")}a.setColor(b)};GLLibPlayer.Tileset_DrawRect=function(g,f,e,d,c,a){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(1,g,null,0,0,f,e,d,c,0,a)};GLLibPlayer.Tileset_FillRect=function(g,f,e,d,c,a){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(2,g,null,0,0,f,e,d,c,0,a)};GLLibPlayer.Tileset_AlphaRect_Draw=function(g,f,e,d,c,a){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(3,g,null,0,0,f,e,d,c,0,a)};GLLibPlayer.Tileset_PaintSpriteAnimationFrame=function(i,h,g,f,a){if(!false){GLLib.Assert(false,"Tileset_PaintSpriteAnimationFrame: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}if(!false){GLLib.Assert(false,"IsRenderToTilesetBufferModeEnabled: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}var e=ASprite._renderToTilesetBackBufferEnabled!=0;if(!false){GLLib.Assert(false,"IsRenderToTilesetBufferModeForced: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}var c=(ASprite._renderToTilesetBackBufferEnabled&1048576)!=0;if(!false){GLLib.Assert(false,"GetRenderToTilesetBufferModeLayer: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}var d=ASprite._renderToTilesetBackBufferEnabled&65535;ASprite.SetupRenderToTilesetBufferMode(i,a);h.posX+=g;h.posY+=f;h.Render();h.posX-=g;h.posY-=f;if(e){ASprite.SetupRenderToTilesetBufferMode(d,c)}else{if(!false){GLLib.Assert(false,"ClearRenderToTilesetBufferMode: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}ASprite._renderToTilesetBackBufferEnabled=0}};GLLibPlayer.Tileset_PaintSpriteFrame_dup_IASpriteIIII=function(f,e,d,c,b,a){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(0,f,e,0,d,c,b,0,0,a,false)};GLLibPlayer.Tileset_PaintSpriteFrame_dup_IASpriteIIIIZ=function(h,g,f,e,d,c,a){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(0,h,g,0,f,e,d,0,0,c,a)};GLLibPlayer.Tileset_PaintSpriteFrame_dup_IASpriteIIIIIIIIIIIIZ=function(a,f,k,j,i,h,g,e,d,c,q,p,m,l,o){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIIIIIIIZ(0,a,f,0,k,j,i,g,e,d,c,q,p,m,l,h,o)};GLLibPlayer.Tileset_PaintSpriteFrame_dup_IASpriteIIIIIIZ=function(a,d,i,h,g,f,e,c,j){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ(0,a,d,0,i,h,g,e,c,f,j)};GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIZ=function(a,k,f,j,i,h,g,e,d,c,l){GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIIIIIIIZ(a,k,f,j,i,h,g,e,d,0,0,0,0,1,1,c,l)};GLLibPlayer.Tileset_PaintToBuffer_dup_IIASpriteIIIIIIIIIIIIIZ=function(G,ax,aa,aw,av,au,C,at,ar,aq,ao,D,B,A,z,y,M){if(true&&GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex==0&&!M){return}var X=GLLibPlayer.s_TilesetLayerInfo[ax];var U=0;var T=0;var P=0;var F=0;if(G==0){U=aa.GetFrameMinX(av);T=aa.GetFrameMinY(av);P=aa.GetFrameWidth(av);F=aa.GetFrameHeight(av);if(true&&(GLLib.s_PFX_type&1<<13)!=0){var x=GLLib.s_PFX_params[13][1];U=gloft.casttoint(U*x/100);T=gloft.casttoint(T*x/100);P=gloft.casttoint(P*x/100);F=gloft.casttoint(F*x/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var w=GLLib.s_PFX_params[13][1];U=gloft.casttoint(U*w/100);T=gloft.casttoint(T*w/100);P=gloft.casttoint(P*w/100);F=gloft.casttoint(F*w/100)}}}else{if(G==1||G==2||G==3){P=at;F=ar}else{GLLib.Assert(false,"Tileset_PaintToBuffer: Invalid drawOperation set: "+G)}}if((y&1)!=0){U=-U-P}if((y&2)!=0){T=-T-F}if((y&4)!=0){var v=U;U=-T-F;T=v;var u=P;P=F;F=u}C=GLLibPlayer.Tileset_GetTranslatedOriginY(ax,C);var t=X[13];var r=X[14];var q=gloft.casttoint(null);var p=gloft.casttoint(null);if(false&&GLLibPlayer.isFlag(ax,256)){q=X[2];p=X[3]}else{q=GLLibPlayer.s_TilesetInfo[2];p=GLLibPlayer.s_TilesetInfo[5]}var o=t%q;var m=r%p;if(o<0){o+=q}if(m<0){m+=p}var l=t-o;var k=r-m;au-=l;C-=k;if(GLLibPlayer.isFlag(ax,273)&&l<0){l=X[7]+l%X[7]}if(GLLibPlayer.isFlag(ax,290)&&k<0){k=X[8]+k%X[8]}var h=l%X[7];var g=k%X[8];var f=X[7]-h;var d=X[8]-g;var W=GLLibPlayer.s_TilesetLayerGraphics[ax][0];if(false){var E=GLLibPlayer.s_TilesetLayerInfo[ax][7];var e=GLLibPlayer.s_TilesetLayerInfo[ax][8];ASprite._graphicsWidth=E;ASprite._graphicsHeight=e}var R=GLLib.GetClipX(W,true);var Q=GLLib.GetClipY(W,true);var aC=GLLib.GetClipWidth(W,true);var ay=GLLib.GetClipHeight(W,true);var ad=1;if(true&&!M){ad=GLLibPlayer.s_TilesetLayerLastUpdatedAreaIndex}var ak=false;if(false&&(false||false||false)&&GLLibPlayer.isFlag(ax,4)&&((GLLib.s_PFX_type&1<<5)!=0||(GLLib.s_PFX_type&1<<6)!=0||(GLLib.s_PFX_type&1<<7)!=0)){ak=true;var s=GLLibPlayer.Tileset_GetBufferImage(ax,0);if(!false){GLLib.Assert(false,"PFX_SetCustomBuffer: You need to enable pfx_useBlendToCustomBuffer to use this functionality")}if(false){GLLib.s_PFX_customBuffer=s}}if(A<1){A=1}if(z<1){z=1}var c=A;var a=z;var aG=X[7];var aF=X[8];var N=ASprite._graphicsWidth;var ac=ASprite._graphicsHeight;var L=aG;var ab=aF;ASprite._graphicsWidth=L;ASprite._graphicsHeight=ab;var aE=ad;var aD=au+U;var aB=C+T;var aA=aD+P;var az=aB+F;for(var I=0;I<c;++I){var ap=aD;var an=aB;var am=aA;var al=az;aD+=aq;aB+=ao;aA+=aq;az+=ao;for(var H=0;H<a;++H){var aj=ap;var ai=an;var ah=am;var ag=al;ap+=D;an+=B;am+=D;al+=B;if(aj<=aG&&ag>=0&&ah>=0){if(ai<=aF){var af=aE;while(--af>=0){var S=null;if(true&&!M){S=GLLibPlayer.s_TilesetLayerLastUpdatedArea[ax][af];var ae=S[0]-h;if(S[0]<h){ae+=X[7]}if(aj>=ae+S[2]){continue}if(ah<ae){continue}var V=S[1]-g;if(S[1]<g){V+=X[8]}if(ai>=V+S[3]){continue}if(ag<V){continue}}if(aj<f){if(ai<d){GLLib.SetClip(W,R,Q,aC,ay,true);GLLib.ClipRect(W,h,g,f,d,true);if(true&&!M){GLLib.ClipRect(W,S[0],S[1],S[2],S[3],true)}if(G==0){aa.PaintFrameExec(W,av,h+aj-U,g+ai-T,y,at,ar)}else{if(G==1){GLLib.DrawRect(W,h+aj-U,g+ai-T,at,ar)}else{if(G==2){GLLib.FillRect(W,h+aj-U,g+ai-T,at,ar)}else{if(G==3){GLLib.AlphaRect_Draw(W,h+aj-U,g+ai-T,at,ar)}}}}}if(ag>=d&&g!=0){GLLib.SetClip(W,R,Q,aC,ay,true);GLLib.ClipRect(W,h,0,f,g,true);if(true&&!M){GLLib.ClipRect(W,S[0],S[1],S[2],S[3],true)}if(G==0){aa.PaintFrameExec(W,av,h+aj-U,ai-T-d,y,at,ar)}else{if(G==1){GLLib.DrawRect(W,h+aj-U,ai-T-d,at,ar)}else{if(G==2){GLLib.FillRect(W,h+aj-U,ai-T-d,at,ar)}else{if(G==3){GLLib.AlphaRect_Draw(W,h+aj-U,ai-T-d,at,ar)}}}}}}if(ah>=f&&h!=0){if(ai<d){GLLib.SetClip(W,R,Q,aC,ay,true);GLLib.ClipRect(W,0,g,h,d,true);if(true&&!M){GLLib.ClipRect(W,S[0],S[1],S[2],S[3],true)}if(G==0){aa.PaintFrameExec(W,av,aj-U-f,g+ai-T,y,at,ar)}else{if(G==1){GLLib.DrawRect(W,aj-U-f,g+ai-T,at,ar)}else{if(G==2){GLLib.FillRect(W,aj-U-f,g+ai-T,at,ar)}else{if(G==3){GLLib.AlphaRect_Draw(W,aj-U-f,g+ai-T,at,ar)}}}}}if(ag<d||g==0){continue}GLLib.SetClip(W,R,Q,aC,ay,true);GLLib.ClipRect(W,0,0,h,g,true);if(true&&!M){GLLib.ClipRect(W,S[0],S[1],S[2],S[3],true)}if(G==0){aa.PaintFrameExec(W,av,aj-U-f,ai-T-d,y,at,ar)}else{if(G==1){GLLib.DrawRect(W,aj-U-f,ai-T-d,at,ar)}else{if(G==2){GLLib.FillRect(W,aj-U-f,ai-T-d,at,ar)}else{if(G!=3){continue}GLLib.AlphaRect_Draw(W,aj-U-f,ai-T-d,at,ar)}}}}}}}}}GLLib.SetClip(W,R,Q,aC,ay,true);var K=N;var Z=ac;ASprite._graphicsWidth=K;ASprite._graphicsHeight=Z;if(false&&(false||false||false)&&ak){var O=null;if(!false){GLLib.Assert(false,"PFX_SetCustomBuffer: You need to enable pfx_useBlendToCustomBuffer to use this functionality")}if(false){GLLib.s_PFX_customBuffer=O}}if(false){var Y=GLLib.s_screenWidth;var J=GLLib.s_screenHeight;ASprite._graphicsWidth=Y;ASprite._graphicsHeight=J}};GLLibPlayer.Tileset_CleanBuffer_dup_IASpriteIIII=function(a,d,i,h,g,f){var l=d.GetFrameMinX(i);var j=d.GetFrameMinY(i);var k=d.GetFrameWidth(i);var e=d.GetFrameHeight(i);if((f&1)!=0){l=-l-k}if((f&2)!=0){j=-j-e}if((f&4)!=0){var c=l;l=-j-e;j=c;var b=k;k=e;e=b}GLLibPlayer.Tileset_CleanBuffer_dup_IIIII(a,h+l,g+j,k,e)};GLLibPlayer.Tileset_CleanBuffer_dup_IIIII=function(a,k,i,g,f){if(GLLibPlayer.isFlag(a,4)){if(false&&GLLibPlayer.isFlag(a,256)){GLLibPlayer.Tileset_CleanEmpyTilemapBuffer(a,k,i,g,f);return}var m=GLLibPlayer.s_TilesetLayerInfo[a];var e=gloft.casttoint(null);var d=gloft.casttoint(null);if(false){e=m[9]<<GLLibPlayer.s_TilesetInfo[3];d=m[10]<<GLLibPlayer.s_TilesetInfo[6]}else{e=m[9]*GLLibPlayer.s_TilesetInfo[2];d=m[10]*GLLibPlayer.s_TilesetInfo[5]}var c=e+m[7];var b=d+m[8];var r=k+g;if(i+f>d&&b>i&&r>e&&c>k){var q=gloft.casttoint(null);var p=gloft.casttoint(null);var o=gloft.casttoint(null);var l=gloft.casttoint(null);if(false){q=k>>GLLibPlayer.s_TilesetInfo[3];p=i>>GLLibPlayer.s_TilesetInfo[6];o=k+g-1>>GLLibPlayer.s_TilesetInfo[3];l=i+f-1>>GLLibPlayer.s_TilesetInfo[6]}else{var j=k;var h=i;if(j<0){j-=GLLibPlayer.s_TilesetInfo[2]}if(h<0){h-=GLLibPlayer.s_TilesetInfo[5]}q=gloft.casttoint(j/GLLibPlayer.s_TilesetInfo[2]);p=gloft.casttoint(h/GLLibPlayer.s_TilesetInfo[5]);o=gloft.casttoint((j+g-1)/GLLibPlayer.s_TilesetInfo[2]);l=gloft.casttoint((h+f-1)/GLLibPlayer.s_TilesetInfo[5])}if(q<m[9]){q=m[9]}if(p<m[10]){p=m[10]}if(o>m[11]){o=m[11]}if(l>m[12]){l=m[12]}GLLibPlayer.Tileset_UpdateBuffer(GLLibPlayer.s_TilesetLayerGraphics[a][0],a,q,p,o-q,l-p,0,0)}}};GLLibPlayer.Tileset_GetInfo=function(a){if(a<0||a>=8){GLLib.Assert(false,"Tileset_GetInfo: Passed index is out of bounds!")}if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetInfo: Tileset is not initialized!")}return GLLibPlayer.s_TilesetInfo[a]};GLLibPlayer.Tileset_GetTileIndexX=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetTileIndexX: Tileset is not initialized!")}if(false){return a>>GLLibPlayer.s_TilesetInfo[3]}return gloft.casttoint(a/GLLibPlayer.s_TilesetInfo[2])};GLLibPlayer.Tileset_GetTileIndexY=function(a){if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetTileIndexY: Tileset is not initialized!")}if(false){return a>>GLLibPlayer.s_TilesetInfo[6]}return gloft.casttoint(a/GLLibPlayer.s_TilesetInfo[5])};GLLibPlayer.Tileset_SetSprites=function(d,b,c){if(GLLibPlayer.s_TilesetMultiSprites==null){GLLib.Assert(false,"GLLibPlayer.Tileset_SetSprites.s_TilesetMultiSprites is null")}if(b<=0){GLLib.Assert(false,"GLLibPlayer.Tileset_SetSrpites.numSprites <= 0")}if(b>c.length){GLLib.Assert(false,"GLLibPlayer.Tileset_SetSprites.numSprites out of range of sprites")}GLLibPlayer.s_TilesetMultiSprites[d]=null;GLLibPlayer.s_TilesetMultiSprites[d]=gloft.ArrayCreation([b],null);for(var a=0;a<b;++a){GLLibPlayer.s_TilesetMultiSprites[d][a]=c[a]}};GLLibPlayer.Tileset_LoadMultiBlockHead=function(d){var c=6;if(GLLibPlayer.s_TilesetMultiBlockHeadInfo!=null){GLLibPlayer.s_TilesetMultiBlockHeadInfo=null}GLLibPlayer.s_TilesetMultiBlockHeadInfo=gloft.ArrayCreation([5],gloft.casttobyte(null));for(var b=0;b<5;++b){GLLibPlayer.s_TilesetMultiBlockHeadInfo[b]=GLLib.Mem_GetByte(d,c++)}if(GLLibPlayer.s_TilesetMultiBlockBlockInfo!=null){GLLibPlayer.s_TilesetMultiBlockBlockInfo=null}GLLibPlayer.s_TilesetMultiBlockBlockInfo=gloft.ArrayCreation([GLLibPlayer.s_TilesetMultiBlockHeadInfo[4]<<1],gloft.casttobyte(null));for(var a=0;a<GLLibPlayer.s_TilesetMultiBlockBlockInfo.length;++a){GLLibPlayer.s_TilesetMultiBlockBlockInfo[a]=GLLib.Mem_GetByte(d,c++)}GLLibPlayer.s_TilesetMultiBlockLayerData=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount,GLLibPlayer.s_TilesetMultiBlockHeadInfo[4],2],gloft.casttobyte(null));GLLibPlayer.s_TilesetMultiBlockBufferFirstIndex=0};GLLibPlayer.Tileset_UnloadMultiBlockData=function(){GLLibPlayer.s_TilesetMultiBlockHeadInfo=null;GLLibPlayer.s_TilesetMultiBlockBlockInfo=null;if(GLLibPlayer.s_TilesetMultiBlockLayerData!=null){for(var c=0;c<GLLibPlayer.s_TilesetMultiBlockLayerData.length;++c){if(GLLibPlayer.s_TilesetMultiBlockLayerData[c]!=null){for(var b=0;b<GLLibPlayer.s_TilesetMultiBlockLayerData[c].length;++b){if(GLLibPlayer.s_TilesetMultiBlockLayerData[c][b]!=null){for(var a=0;a<GLLibPlayer.s_TilesetMultiBlockLayerData[c][b].length;++a){GLLibPlayer.s_TilesetMultiBlockLayerData[c][b][a]=null}GLLibPlayer.s_TilesetMultiBlockLayerData[c][b]=null}}GLLibPlayer.s_TilesetMultiBlockLayerData[c]=null}}GLLibPlayer.s_TilesetMultiBlockLayerData=null}};GLLibPlayer.Tileset_GetMultiBlockBlockIndex=function(b,a){b=gloft.casttoint(b/GLLibPlayer.s_TilesetInfo[2]);a=gloft.casttoint(a/GLLibPlayer.s_TilesetInfo[5]);b=gloft.casttoint(b/GLLibPlayer.s_TilesetMultiBlockHeadInfo[2]);a=gloft.casttoint(a/GLLibPlayer.s_TilesetMultiBlockHeadInfo[3]);return b+a*GLLibPlayer.s_TilesetMultiBlockHeadInfo[0]};GLLibPlayer.Tileset_SetLayerData_dup_IIII=function(d,c,b,a){GLLibPlayer.Tileset_SetLayerData_dup_IIIIZ(d,c,b,a,false)};GLLibPlayer.Tileset_SetLayerData_dup_IIIIZ=function(a,j,h,f,p){if(false){var e=GLLibPlayer.s_TilesetLayerInfo[a][2];var d=h%e;var c=gloft.casttoint(h/e);var o=gloft.casttobyte((gloft.casttoint(d/GLLibPlayer.s_TilesetMultiBlockHeadInfo[2])));var m=gloft.casttobyte((gloft.casttoint(c/GLLibPlayer.s_TilesetMultiBlockHeadInfo[3])));var l=gloft.casttobyte((d%GLLibPlayer.s_TilesetMultiBlockHeadInfo[2]));var k=gloft.casttobyte((c%GLLibPlayer.s_TilesetMultiBlockHeadInfo[3]));var i=gloft.casttobyte((o+m*GLLibPlayer.s_TilesetMultiBlockHeadInfo[0]));var g=gloft.casttobyte((l+k*GLLibPlayer.s_TilesetMultiBlockBlockInfo[i<<1]));if(p){GLLib.Mem_SetShort(GLLibPlayer.s_TilesetMultiBlockLayerData[a][i][j],g<<1,gloft.casttoshort(f))}else{GLLibPlayer.s_TilesetMultiBlockLayerData[a][i][j][g]=gloft.casttobyte(f)}}else{if(p){GLLib.Mem_SetShort(GLLibPlayer.s_TilesetLayerData[a][j],h<<1,gloft.casttoshort(f))}else{GLLibPlayer.s_TilesetLayerData[a][j][h]=gloft.casttobyte(f)}}};GLLibPlayer.Tileset_GetLayerBlock_dup_III=function(d,c,b){var a=GLLibPlayer.s_TilesetLayerInfo[d][2];return GLLibPlayer.Tileset_GetLayerBlock_dup_IIII(d,c,b%a,gloft.casttoint(b/a))};GLLibPlayer.Tileset_GetLayerBlock_dup_IIII=function(d,c,b,a){if(false){return GLLibPlayer.s_TilesetMultiBlockLayerData[d][gloft.casttoint(b/GLLibPlayer.s_TilesetMultiBlockHeadInfo[2])+gloft.casttoint(a/GLLibPlayer.s_TilesetMultiBlockHeadInfo[3])*GLLibPlayer.s_TilesetMultiBlockHeadInfo[0]][c]}return GLLibPlayer.s_TilesetLayerData[d][c]};GLLibPlayer.Tileset_GetLayerData_dup_III=function(c,b,a){return GLLibPlayer.Tileset_GetLayerData_dup_IIIZ(c,b,a,false)};GLLibPlayer.Tileset_GetLayerData_dup_IIIZ=function(f,e,d,a){if(false){var c=GLLibPlayer.s_TilesetLayerInfo[f][2];return GLLibPlayer.Tileset_GetLayerData_dup_IIIIZ(f,e,d%c,gloft.casttoint(d/c),a)}if(a){return GLLib.Mem_GetShort(GLLibPlayer.s_TilesetLayerData[f][e],d<<1)&65535}if(false&&e==1){return GLLibPlayer.s_TilesetLayerData[f][e][d>>2]>>((d&3)<<1)&3}return GLLibPlayer.s_TilesetLayerData[f][e][d]&255};GLLibPlayer.Tileset_GetLayerData_dup_IIII=function(g,e,d,c){if(!false||GLLibPlayer.s_TilesetLayerInfo[g][20]==0){return GLLibPlayer.Tileset_GetLayerData_dup_IIIIZ(g,e,d,c,false)}var b=d-GLLibPlayer.s_TilesetLayerInfo[g][21];var a=c-GLLibPlayer.s_TilesetLayerInfo[g][22]+GLLibPlayer.s_TilesetLayerInfo[g][28];if(a>=GLLibPlayer.s_TilesetLayerInfo[g][26]){a-=GLLibPlayer.s_TilesetLayerInfo[g][26]}var f=b+GLLibPlayer.s_TilesetLayerInfo[g][27];if(f>=GLLibPlayer.s_TilesetLayerInfo[g][25]){f-=GLLibPlayer.s_TilesetLayerInfo[g][25]}if(e==0){return GLLibPlayer.s_TilesetLayerDataMapBuffer[g][a][f]&255}return GLLibPlayer.s_TilesetLayerDataFlipBuffer[g][a][f]&255};GLLibPlayer.Tileset_GetLayerData_dup_IIIIZ=function(a,i,h,g,l){if(!false){return GLLibPlayer.Tileset_GetLayerData_dup_IIIZ(a,i,g*GLLibPlayer.s_TilesetLayerInfo[a][2]+h,l)}var f=gloft.casttoint(h/GLLibPlayer.s_TilesetMultiBlockHeadInfo[2]);var e=gloft.casttoint(g/GLLibPlayer.s_TilesetMultiBlockHeadInfo[3]);var d=h%GLLibPlayer.s_TilesetMultiBlockHeadInfo[2];var c=g%GLLibPlayer.s_TilesetMultiBlockHeadInfo[3];var k=gloft.casttobyte((f+e*GLLibPlayer.s_TilesetMultiBlockHeadInfo[0]));var j=gloft.casttobyte((d+c*GLLibPlayer.s_TilesetMultiBlockBlockInfo[k<<1]));if(l){return GLLib.Mem_GetShort(GLLibPlayer.s_TilesetMultiBlockLayerData[a][k][i],j<<1)&65535}return GLLibPlayer.s_TilesetMultiBlockLayerData[a][k][i][j]&255};GLLibPlayer.Tileset_Init_dup_II=function(b,a){if(!false){GLLib.Assert(false,"Tileset_Init (int nDestWidth, int nDestHeight): you need to enable tileset_useEmptyTilemapLayer to use this functionality")}if(false){GLLibPlayer.Tileset_Init_dup_IIII(b,a,0,0)}};GLLibPlayer.Tileset_LoadEmpyTilemapLayer=function(a,i,h,g,f,e){if(!false){GLLib.Assert(false,"Tileset_LoadEmpyTilemapLayer: you need to enable tileset_useEmptyTilemapLayer to use this functionality")}if(false){if(!GLLibPlayer.s_bTilesetPlayerInitialized){return}GLLibPlayer.Tileset_Destroy_dup_IZ(a,false);GLLibPlayer.s_TilesetLayerInfo[a][2]=i;GLLibPlayer.s_TilesetLayerInfo[a][3]=h;GLLibPlayer.s_TilesetLayerInfo[a][4]=e;GLLibPlayer.s_TilesetLayerInfo[a][7]=GLLibPlayer.s_TilesetInfo[0]+i;GLLibPlayer.s_TilesetLayerInfo[a][8]=GLLibPlayer.s_TilesetInfo[1]+h;var d=GLLibPlayer.s_TilesetLayerInfo[a][7];if(d<g){d=g}var c=GLLibPlayer.s_TilesetLayerInfo[a][8];if(c<f){c=f}if(false&&ASprite.s_resizeOn){var j=GLLibPlayer.s_TilesetLayerImage[a];var b=0;var m=d;var l=false?(ASprite.s_resizeUseShifts?(m<<ASprite.s_resizeShiftX):(gloft.casttoint(m*ASprite.s_resizedWidth/ASprite.s_originalWidth))):m;var k=c;j[b]=javax.microedition.lcdui.Image.createImage(l,false?(ASprite.s_resizeUseShifts?(k<<ASprite.s_resizeShiftY):(gloft.casttoint(k*ASprite.s_resizedHeight/ASprite.s_originalHeight))):k)}else{if(false){GLLibPlayer.s_TilesetLayerImage[a][0]=javax.microedition.lcdui.Image.createImage(c,d)}else{GLLibPlayer.s_TilesetLayerImage[a][0]=javax.microedition.lcdui.Image.createImage(d,c)}}GLLibPlayer.s_TilesetLayerGraphics[a][0]=GLLibPlayer.s_TilesetLayerImage[a][0].getGraphics();if(true){GLLibPlayer.setFlag(a,64,true);GLLibPlayer.setFlag(a,128,true)}GLLibPlayer.setFlag(a,4,true);GLLibPlayer.setFlag(a,256,true);GLLibPlayer.s_TilesetLayerInfo[a][9]=1;GLLibPlayer.s_TilesetLayerInfo[a][10]=0;GLLibPlayer.s_TilesetLayerInfo[a][5]=0;GLLibPlayer.s_TilesetLayerInfo[a][6]=0;GLLibPlayer.s_TilesetLayerInfo[a][0]=1;GLLibPlayer.s_TilesetLayerInfo[a][1]=1;GLLibPlayer.s_TilesetLayerInfo[a][13]=0;GLLibPlayer.s_TilesetLayerInfo[a][14]=0}};GLLibPlayer.Tileset_UpdateEmptyTilemapLayer=function(y){var k=GLLibPlayer.s_TilesetLayerInfo[y];var q=k[13];var o=k[14];var l=GLLibPlayer.s_TilesetInfo[0];var i=GLLibPlayer.s_TilesetInfo[1];var g=k[5];var f=k[6];var e=g+k[7];var d=f+k[8];var w=k[2];var v=k[3];var I=k[9]>0;var u=q;if(q<0){u-=w-1}var t=gloft.casttoint(null);if((t=o)<0){t-=v-1}if(!I&&GLLib.Math_RectIntersect_dup_IIIIIIII(g,f,e-1,d-1,q,o,q+l-1,o+i-1)){var s=0;var r=0;if(q<g){var p=gloft.casttoint(u/w)*w;var m=gloft.casttoint(t/v)*v;var j=g-p;var h=k[8];s=j;r=j;GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(y,k[5]=p,m,j,h)}else{if(q+l>=e){var H=e;var G=gloft.casttoint(t/v)*v;var F=(gloft.casttoint((q+l-e)/w)+1)*w;var E=k[8];r=F;k[5]=gloft.casttoint(u/w)*w;GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(y,H,G,F,E)}}if(o<f){var D=gloft.casttoint(u/w)*w+s;var C=gloft.casttoint(t/v)*v;GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(y,D,k[6]=C,k[7]-r,f-C)}else{if(o+i>=d){var B=gloft.casttoint(u/w)*w+s;var A=d;var z=k[7]-r;var x=(gloft.casttoint((o+i-d)/v)+1)*v;k[6]=gloft.casttoint(t/v)*v;GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(y,B,A,z,x)}}k[10]=0}else{var c=gloft.casttoint(u/w)*w;var a=gloft.casttoint(t/v)*v;GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(y,c,a,k[7],k[8]);k[5]=c;k[6]=a;if(I){k[9]=0}k[10]=1}};GLLibPlayer.Tileset_IsWholeEmptyTilemapBufferRefreshed=function(a){return false&&GLLibPlayer.isFlag(a,256)&&GLLibPlayer.s_TilesetLayerInfo[a][10]==1};GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer=function(c,l,k,j,i){var g=GLLibPlayer.s_TilesetLayerGraphics[c][0];g.setColor(GLLibPlayer.s_TilesetLayerInfo[c][4]);var h=GLLibPlayer.s_TilesetLayerInfo[c][7];var f=GLLibPlayer.s_TilesetLayerInfo[c][8];if(false){var o=h;var b=f;ASprite._graphicsWidth=o;ASprite._graphicsHeight=b}var e=l%h;if(e<0){e+=h}var d=k%f;if(d<0){d+=f}if(e+j>h){var p=i;if(d+i>f){GLLib.FillRect(g,0,0,e+j-h,d+i-f);GLLibPlayer.Tileset_AddUpdatedArea(c,0,0,e+j-h,d+i-f);p=f-d}GLLib.FillRect(g,0,d,e+j-h,p);GLLibPlayer.Tileset_AddUpdatedArea(c,0,d,e+j-h,p);j=h-e}if(d+i>f){GLLib.FillRect(g,e,0,j,d+i-f);GLLibPlayer.Tileset_AddUpdatedArea(c,e,0,j,d+i-f);i=f-d}GLLib.FillRect(g,e,d,j,i);GLLibPlayer.Tileset_AddUpdatedArea(c,e,d,j,i);if(false){var m=GLLib.s_screenWidth;var a=GLLib.s_screenHeight;ASprite._graphicsWidth=m;ASprite._graphicsHeight=a}};GLLibPlayer.Tileset_CleanEmpyTilemapBuffer=function(a,i,h,g,f){var j=GLLibPlayer.s_TilesetLayerInfo[a];var e=j[5];var d=j[6];var c=e+j[7];var b=d+j[8];var l=i+g;var k=h+f;if(k>d&&b>h&&l>e&&c>i){if(i<e){g-=e-i;i=e}if(h<d){f-=d-h;h=d}if(l>c){g=c-i}if(k>b){f=b-h}GLLibPlayer.Tileset_UpdateEmpyTilemapBuffer(a,i,h,g,f)}};GLLibPlayer.Tileset_SetSpriteMasks_dup_IaaB=function(d,c){if(!false){GLLib.Assert(false,"Tileset_SetSpriteMasks: You need to enable tileset_useTilesetMask")}if(!false){GLLib.Assert(false,"Tileset_SetSpriteMasks: You need to enable tileset_useMultiSprites for adding more than one mask array per layer")}if(false&&false){for(var b=c.length,a=0;a<b;++a){GLLibPlayer.Tileset_SetSpriteMasks_dup_IIIaB(d,a,b,c[a])}}};GLLibPlayer.Tileset_SetSpriteMasks_dup_IaB=function(b,a){if(!false){GLLib.Assert(false,"Tileset_SetSpriteMasks: You need to enable tileset_useTilesetMask")}if(false){GLLibPlayer.Tileset_SetSpriteMasks_dup_IIIaB(b,0,1,a)}};GLLibPlayer.Tileset_SetSpriteMasks_dup_IIIaB=function(d,b,a,c){if(GLLibPlayer.s_TilesetMasks==null){GLLibPlayer.s_TilesetMasks=gloft.ArrayCreation([GLLibPlayer.s_TilesetMaxLayerCount],gloft.casttobyte(null))}if(d>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"")}if(GLLibPlayer.s_TilesetMasks[d]==null){GLLibPlayer.s_TilesetMasks[d]=gloft.ArrayCreation([a],gloft.casttobyte(null))}if(b>=a){GLLib.Assert(false,"")}GLLibPlayer.s_TilesetMasks[d][b]=c};GLLibPlayer.Tileset_ReleaseSpriteMasks=function(c){if(GLLibPlayer.s_TilesetMasks!=null&&GLLibPlayer.s_TilesetMasks[c]!=null){for(var b=GLLibPlayer.s_TilesetMasks[c].length,a=0;a<b;++a){GLLibPlayer.s_TilesetMasks[c][a]=null}GLLibPlayer.s_TilesetMasks[c]=null}};GLLibPlayer.Tileset_GetTileMask=function(g,f,d){if(!false){GLLib.Assert(false,"Tileset_GetTileMask: You need to enable tileset_useTilesetMask")}if(false){d=GLLibPlayer.Tileset_GetTranslatedOriginY(g,d);if(!GLLibPlayer.s_bTilesetPlayerInitialized){GLLib.Assert(false,"Tileset_GetTile: Tileset player is not initialized");return -1}if(g<0||g>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_GetTile: nLayer invalid : "+g);return -1}if(GLLibPlayer.s_TilesetLayerInfo[g][0]!=1||GLLibPlayer.s_TilesetLayerInfo[g][1]!=1){GLLib.Assert(false,"Tileset_GetTile: nLayer in not initialized or not enabled.");return -1}if(f<0||f>GLLibPlayer.s_TilesetLayerInfo[g][2]){GLLib.Assert(false,"Tileset_GetTile: x value out of bound ["+f+"]  0 <= x < "+GLLibPlayer.s_TilesetLayerInfo[g][2]);return -1}if(d<0||d>GLLibPlayer.s_TilesetLayerInfo[g][3]){GLLib.Assert(false,"Tileset_GetTile: y value out of bound ["+d+"]  0 <= y < "+GLLibPlayer.s_TilesetLayerInfo[g][3]);return -1}var e=255;if(false){e=65535}var c=GLLibPlayer.Tileset_GetLayerData_dup_IIIIZ(g,0,f,d,false);if(false){var b=GLLibPlayer.s_TilesetLayerInfo[g][4];var a=c>>b;if(a!=e){return GLLibPlayer.s_TilesetMasks[g][c&(1<<b)-1][a]}}else{if(c!=e){return GLLibPlayer.s_TilesetMasks[g][0][c]}}}return 0};GLLibPlayer.Tileset_MarkModulesFromLayer=function(a){if(!false){GLLib.Assert(false,"Tileset_MarkModulesFromLayer: Must enable sprite_useOperationMark to use this function!")}if(false){ASprite.SetOperationMode(3);var m=1;var e=null;var l=GLLibPlayer.Tileset_GetLayerTileCountWidth(a)-1;var k=GLLibPlayer.Tileset_GetLayerTileCountHeight(a)-1;var h=GLLibPlayer.s_TilesetLayerInfo[a][4];var f=gloft.casttoint(null);if(false){f=65535}else{f=255}if(!false){e=GLLibPlayer.s_TilesetSprite[a];m=((e.GetFrameCount()==0)?1:0)}for(var g=k;g>=0;--g){for(var d=l;d>=0;--d){var c=gloft.casttoint(null);var o=gloft.casttoboolean(null);if(false){c=GLLibPlayer.Tileset_GetLayerData_dup_IIIIZ(a,0,d,g,false);o=(c==f);if(!o){e=GLLibPlayer.s_TilesetMultiSprites[a][c&(1<<h)-1];m=((e.GetFrameCount()==0)?1:0);c>>=h}}else{c=GLLibPlayer.Tileset_GetTile(a,d,g);o=(c==f)}if(!o){if(m!=0){e.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIII(null,c,0,0,0)}else{e.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(null,c,0,0,0,0,0)}}}}ASprite.SetOperationMode(0)}};GLLibPlayer.Tileset_PadLayer=function(f,e,d,c,b,a){if(!false){GLLib.Assert(false,"Tileset_PadLayer: you must enable tileset_useLayerPadding to use this feature")}if(f<0||f>=GLLibPlayer.s_TilesetMaxLayerCount){GLLib.Assert(false,"Tileset_PadLayer: nLayer invalid : "+f)}if(e<0){GLLib.Assert(false,"Tileset_PadLayer: each padding must be greater than 0!")}if(d<0){GLLib.Assert(false,"Tileset_PadLayer: each padding must be greater than 0!")}if(c<0){GLLib.Assert(false,"Tileset_PadLayer: each padding must be greater than 0!")}if(b<0){GLLib.Assert(false,"Tileset_PadLayer: each padding must be greater than 0!")}if(GLLibPlayer.s_TilesetLayerPaddingInfo[f]==null){GLLibPlayer.s_TilesetLayerPaddingInfo[f]=gloft.ArrayCreation([5],gloft.casttoint(null))}GLLibPlayer.s_TilesetLayerPaddingInfo[f][0]=e;GLLibPlayer.s_TilesetLayerPaddingInfo[f][1]=d;GLLibPlayer.s_TilesetLayerPaddingInfo[f][2]=c;GLLibPlayer.s_TilesetLayerPaddingInfo[f][3]=b;GLLibPlayer.s_TilesetLayerPaddingInfo[f][4]=a;GLLibPlayer.s_TilesetLayerInfo[f][5]=(GLLibPlayer.s_TilesetLayerInfo[f][2]+e+d)*GLLibPlayer.s_TilesetInfo[2];GLLibPlayer.s_TilesetLayerInfo[f][6]=(GLLibPlayer.s_TilesetLayerInfo[f][3]+c+b)*GLLibPlayer.s_TilesetInfo[5]};GLLibPlayer.Tileset_GetLayerInfo=function(b,a){return GLLibPlayer.s_TilesetLayerInfo[b][a]};GLLibPlayer.Tileset_SetLayerInfo=function(c,b,a){GLLibPlayer.s_TilesetLayerInfo[c][b]=a};GLLibPlayer.k_animBaseFrameTime=gloft.casttoint(1000/14);GLLibPlayer.k_AnimNone=-1;GLLibPlayer.k_snd_nbChannel=GLLibConfiguration.sound_numberOfChannels;GLLibPlayer.s_snd_IgnoreSoundsOnInterrupt=false;GLLibPlayer.m_adpcm_index=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8];GLLibPlayer.m_adpcm_data=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];GLLibPlayer.s_bTilesetPlayerInitialized=false;GLLibPlayer.s_TilesetMaxLayerCount=6;GLLibPlayer.s_TilesetEffectLayer=-1;GLLibPlayer.s_TilesetAlphaLayer=-1;GLLibPlayer.s_TilesetEffectType=0;GLLibPlayer.k_TilesetLayerCOUNT=(false?29:20);GLLibPlayer.k_TilesetLayerAreaCount=6;GLLibPlayer.new_ctor_dup_=function(){var a=new GLLibPlayer();a.ctor_dup_.apply(a,arguments);return a};GLLibPlayer.new_ctor_dup_ASpriteII=function(){var a=new GLLibPlayer();a.ctor_dup_ASpriteII.apply(a,arguments);return a};