(function(q,k){var v=3.141592653589793;var h=2*v;var u=v/2;function l(x){return x>0&&((x-1)&x)===0}var b={length:function(x){return q.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])},normalize:function(x){var y=q.sqrt((x[0]*x[0])+(x[1]*x[1])+(x[2]*x[2]));if(y===0){return[0,0,0]}return[x[0]/y,x[1]/y,x[2]/y]},dot:function(y,x){return y[0]*x[0]+y[1]*x[1]+y[2]*x[2]},angle:function(y,x){return q.acos((y[0]*x[0]+y[1]*x[1]+y[2]*x[2])/(q.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])*q.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])))},cross:function(y,x){return[y[1]*x[2]-x[1]*y[2],y[2]*x[0]-x[2]*y[0],y[0]*x[1]-x[0]*y[1]]},multiply:function(y,x){return[y[0]*x,y[1]*x,y[2]*x]},add:function(y,x){return[y[0]+x[0],y[1]+x[1],y[2]+x[2]]},subtract:function(y,x){return[y[0]-x[0],y[1]-x[1],y[2]-x[2]]},equal:function(y,x){var z=1e-7;if((y===k)&&(x===k)){return true}if((y===k)||(x===k)){return false}return(q.abs(y[0]-x[0])<z&&q.abs(y[1]-x[1])<z&&q.abs(y[2]-x[2])<z)}};var m={identity:[1,0,0,0,1,0,0,0,1],multiply:function(y,x){var Q=y[0],P=y[1],O=y[2],N=y[3],M=y[4],L=y[5],K=y[6],J=y[7],I=y[8],H=x[0],G=x[1],F=x[2],E=x[3],D=x[4],C=x[5],B=x[6],A=x[7],z=x[8];x[0]=H*Q+E*P+B*O;x[1]=G*Q+D*P+A*O;x[2]=F*Q+C*P+z*O;x[3]=H*N+E*M+B*L;x[4]=G*N+D*M+A*L;x[5]=F*N+C*M+z*L;x[6]=H*K+E*J+B*I;x[7]=G*K+D*J+A*I;x[8]=F*K+C*J+z*I},mat3_multiply:function(y,x){var R=y[0],Q=y[1],P=y[2],O=y[3],N=y[4],M=y[5],L=y[6],K=y[7],J=y[8],I=x[0],G=x[1],F=x[2],E=x[3],D=x[4],C=x[5],B=x[6],A=x[7],z=x[8];var H=[];H[0]=I*R+E*Q+B*P;H[1]=G*R+D*Q+A*P;H[2]=F*R+C*Q+z*P;H[3]=I*O+E*N+B*M;H[4]=G*O+D*N+A*M;H[5]=F*O+C*N+z*M;H[6]=I*L+E*K+B*J;H[7]=G*L+D*K+A*J;H[8]=F*L+C*K+z*J;return H},vec2_multiply:function(z,y){var x=[];x[0]=y[0]*z[0]+y[3]*z[1]+y[6];x[1]=y[1]*z[0]+y[4]*z[1]+y[7];return x},transpose:function(x){return[x[0],x[3],x[6],x[1],x[4],x[7],x[2],x[5],x[8]]}};function s(x){return this.clearStack(x)}var d=16;s.prototype.clearStack=function(x){this.m_stack=[];this.m_cache=[];this.c_stack=0;this.valid=0;this.result=null;for(var y=0;y<d;y++){this.m_stack[y]=this.getIdentity()}if(x!==k){this.m_stack[0]=x}else{this.setIdentity()}};s.prototype.setIdentity=function(){this.m_stack[this.c_stack]=this.getIdentity();if(this.valid===this.c_stack&&this.c_stack){this.valid--}};s.prototype.getIdentity=function(){return[1,0,0,0,1,0,0,0,1]};s.prototype.getResult=function(){if(!this.c_stack){return this.m_stack[0]}var x=m.identity;if(this.valid>this.c_stack-1){this.valid=this.c_stack-1}for(var y=this.valid;y<this.c_stack+1;y++){x=m.multiply(this.m_stack[y],x);this.m_cache[y]=x}this.valid=this.c_stack-1;this.result=this.m_cache[this.c_stack];return this.result};s.prototype.pushMatrix=function(){this.c_stack++;this.m_stack[this.c_stack]=this.getIdentity()};s.prototype.popMatrix=function(){if(this.c_stack===0){return}this.c_stack--};var r=s.prototype.getIdentity();s.prototype.translate=function(z,A){r[6]=z;r[7]=A;m.multiply(r,this.m_stack[this.c_stack])};var j=s.prototype.getIdentity();s.prototype.scale=function(z,A){j[0]=z;j[4]=A;m.multiply(j,this.m_stack[this.c_stack])};var a=s.prototype.getIdentity();s.prototype.rotate=function(x){var y,z;y=q.sin(-x);z=q.cos(-x);a[0]=z;a[3]=y;a[1]=-y;a[4]=z;m.multiply(a,this.m_stack[this.c_stack])};var p=this.WebGL2D=function p(y,x){this.canvas=y;this.options=x||{};this.gl=k;this.fs=k;this.vs=k;this.shaderProgram=k;this.transform=new s();this.shaderPool=[];this.maxTextureSize=k;y.gl2d=this;y.$getContext=y.getContext;y.getContext=(function(z){return function(A){if((z.options.force||A==="webgl-2d")&&!(y.width===0||y.height===0)){if(z.gl){return z.gl}var B=z.gl=z.canvas.$getContext("webgl")||z.canvas.$getContext("experimental-webgl");z.initShaders();z.initShaders(i.texture);z.initShaders(i.texture|i.crop);z.initBuffers();z.initCanvas2DAPI();B.viewport(0,0,z.canvas.width,z.canvas.height);B.enable(B.BLEND);B.blendFuncSeparate(B.SRC_ALPHA,B.ONE_MINUS_SRC_ALPHA,B.ONE,B.ONE_MINUS_SRC_ALPHA);z.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE);return B}else{return z.canvas.$getContext(A)}}}(this));this.postInit()};p.enable=function(y,x){return y.gl2d||new p(y,x)};var i={texture:1,crop:2,};p.prototype.getFragmentShaderSource=function e(y){var x=["#ifdef GL_ES","precision mediump float;","#endif","#define hasTexture "+((y&i.texture)?"1":"0"),"#define hasCrop "+((y&i.crop)?"1":"0"),"varying vec4 vColor;","#if hasTexture","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","#if hasCrop","uniform vec4 uCropSource;","#endif","#endif","void main(void) {","#if hasTexture","#if hasCrop","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);","#else","gl_FragColor = texture2D(uSampler, vTextureCoord);","#endif","#else","gl_FragColor = vColor;","#endif","}"].join("\n");return x};p.prototype.getVertexShaderSource=function g(A){var y=2/this.canvas.width,z=-2/this.canvas.height;var x=["#define hasTexture "+((A&i.texture)?"1":"0"),"attribute vec4 aVertexPosition;","#if hasTexture","varying vec2 vTextureCoord;","#endif","uniform vec4 uColor;","uniform mat3 uTransforms;","varying vec4 vColor;","const mat4 pMatrix = mat4("+y+",0,0,0, 0,"+z+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);","void main(void) {","vec3 position = uTransforms * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);","vColor = uColor;","#if hasTexture","vTextureCoord = aVertexPosition.zw;","#endif","}"].join("\n");return x};p.prototype.initShaders=function w(z){var A=this.gl;z=z||0;var y=this.shaderPool[z];if(y){A.useProgram(y);this.shaderProgram=y;return y}else{var x=this.fs=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(this.fs,this.getFragmentShaderSource(z));A.compileShader(this.fs);if(!A.getShaderParameter(this.fs,A.COMPILE_STATUS)){throw"fragment shader error: "+A.getShaderInfoLog(this.fs)}var C=this.vs=A.createShader(A.VERTEX_SHADER);A.shaderSource(this.vs,this.getVertexShaderSource(z));A.compileShader(this.vs);if(!A.getShaderParameter(this.vs,A.COMPILE_STATUS)){throw"vertex shader error: "+A.getShaderInfoLog(this.vs)}var B=this.shaderProgram=A.createProgram();A.attachShader(B,x);A.attachShader(B,C);A.linkProgram(B);if(!A.getProgramParameter(B,A.LINK_STATUS)){throw"Could not initialise shaders."}A.useProgram(B);B.vertexPositionAttribute=A.getAttribLocation(B,"aVertexPosition");A.enableVertexAttribArray(B.vertexPositionAttribute);B.uColor=A.getUniformLocation(B,"uColor");B.uSampler=A.getUniformLocation(B,"uSampler");B.uCropSource=A.getUniformLocation(B,"uCropSource");B.uTransforms=A.getUniformLocation(B,"uTransforms");this.shaderPool[z]=B;return B}};var o;var f;var n=new Float32Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]);p.prototype.initBuffers=function t(){var x=this.gl;o=x.createBuffer();f=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,o);x.bufferData(x.ARRAY_BUFFER,n,x.STATIC_DRAW)};p.instances=[];p.prototype.postInit=function(){p.instances.push(this)};p.prototype.initCanvas2DAPI=function c(){var S=this,J=this.gl;var W=document.createElement("canvas");W.width=S.canvas.width;W.height=S.canvas.height;var N=W.getContext("2d");var M=/^rgb(a)?\(\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,?\s*(-?[\d\.]+)?\s*\)$/;var aA=/^hsl(a)?\(\s*(-?[\d\.]+)\s*,\s*(-?[\d\.]+)%\s*,\s*(-?[\d\.]+)%\s*,?\s*(-?[\d\.]+)?\s*\)$/;var aq=/^#([0-9A-Fa-f]{6})$/;var L=/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/;function ag(aH,aL,aG,aK){var aC,aI,aJ,aE,aD;aH=(((aH%360)+360)%360)/360;aL=aL>100?1:aL/100;aL=aL<0?0:aL;aG=aG>100?1:aG/100;aG=aG<0?0:aG;if(aL==0){aC=aI=aJ=aG}else{function aF(aO,aN,aM){if(aM<0){aM+=1}if(aM>1){aM-=1}if(aM<1/6){return aO+(aN-aO)*6*aM}if(aM<1/2){return aN}if(aM<2/3){return aO+(aN-aO)*(2/3-aM)*6}return aO}aD=aG<0.5?aG*(1+aL):aG+aL-aG*aL;aE=2*aG-aD;aC=aF(aE,aD,aH+1/3);aI=aF(aE,aD,aH);aJ=aF(aE,aD,aH-1/3)}return[aC,aI,aJ,aK]}function x(aL){var aM=[],aG,aI,aC,aF,aD,aH;if((aG=M.exec(aL))){aF=aG[1],aD=parseFloat(aG[8]);if((aF&&isNaN(aD))||(!aF&&!isNaN(aD))){return false}aH=aG[3];for(var aE=2;aE<8;aE+=2){aI=aG[aE],aC=aG[aE+1];if(aC!==aH){return false}if(aC){aI=aI>100?1:aI/100;aI=aI<0?0:aI}else{aI=aI>255?1:aI/255;aI=aI<0?0:aI}aM.push(aI)}aM.push(aF?aD:1)}else{if((aG=aA.exec(aL))){aF=aG[1],aD=parseFloat(aG[5]);aM=ag(aG[2],aG[3],aG[4],parseFloat(aF&&aD?aD:1))}else{if((aG=aq.exec(aL))){var aJ=parseInt(aG[1],16);aM=[((aJ&16711680)>>16)/255,((aJ&65280)>>8)/255,(aJ&255)/255,1]}else{if((aG=L.exec(aL))){var aK="#"+[aG[1],aG[1],aG[2],aG[2],aG[3],aG[3]].join("");aM=x(aK)}else{if(aL.toLowerCase() in Y){aM=x(Y[aL.toLowerCase()])}else{if(aL.toLowerCase()==="transparent"){aM=[0,0,0,0]}else{return false}}}}}}return aM}function P(aC){return"rgba("+(aC[0]*255)+", "+(aC[1]*255)+", "+(aC[2]*255)+", "+parseFloat(aC[3])+")"}var Y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var az={},aB=[];function z(aE){var aD={};for(var aC in aE){if(aE.hasOwnProperty(aC)){aD[aC]=aE[aC]}}return aD}function al(){var aC={fillStyle:[az.fillStyle[0],az.fillStyle[1],az.fillStyle[2],az.fillStyle[3]],strokeStyle:[az.strokeStyle[0],az.strokeStyle[1],az.strokeStyle[2],az.strokeStyle[3]],globalAlpha:az.globalAlpha,globalCompositeOperation:az.globalCompositeOperation,lineCap:az.lineCap,lineJoin:az.lineJoin,lineWidth:az.lineWidth,miterLimit:az.miterLimit,shadowColor:az.shadowColor,shadowBlur:az.shadowBlur,shadowOffsetX:az.shadowOffsetX,shadowOffsetY:az.shadowOffsetY,textAlign:az.textAlign,font:az.font,textBaseline:az.textBaseline};aB.push(aC)}function Q(){if(aB.length){az=aB.pop()}}az.fillStyle=[0,0,0,1];Object.defineProperty(J,"fillStyle",{get:function(){return P(az.fillStyle)},set:function(aC){az.fillStyle=x(aC)||az.fillStyle}});az.strokeStyle=[0,0,0,1];Object.defineProperty(J,"strokeStyle",{get:function(){return P(az.strokeStyle)},set:function(aC){az.strokeStyle=x(aC)||drawStyle.strokeStyle}});J.$lineWidth=J.lineWidth;az.lineWidth=1;Object.defineProperty(J,"lineWidth",{get:function(){return az.lineWidth},set:function(aC){J.$lineWidth(aC);az.lineWidth=aC}});az.lineCap="butt";Object.defineProperty(J,"lineCap",{get:function(){return az.lineCap},set:function(aC){az.lineCap=aC}});az.lineJoin="miter";Object.defineProperty(J,"lineJoin",{get:function(){return az.lineJoin},set:function(aC){az.lineJoin=aC}});az.miterLimit=10;Object.defineProperty(J,"miterLimit",{get:function(){return az.miterLimit},set:function(aC){az.miterLimit=aC}});az.shadowOffsetX=0;Object.defineProperty(J,"shadowOffsetX",{get:function(){return az.shadowOffsetX},set:function(aC){az.shadowOffsetX=aC}});az.shadowOffsetY=0;Object.defineProperty(J,"shadowOffsetY",{get:function(){return az.shadowOffsetY},set:function(aC){az.shadowOffsetY=aC}});az.shadowBlur=0;Object.defineProperty(J,"shadowBlur",{get:function(){return az.shadowBlur},set:function(aC){az.shadowBlur=aC}});az.shadowColor="rgba(0, 0, 0, 0.0)";Object.defineProperty(J,"shadowColor",{get:function(){return az.shadowColor},set:function(aC){az.shadowColor=aC}});az.font="10px sans-serif";Object.defineProperty(J,"font",{get:function(){return az.font},set:function(aC){N.font=aC;az.font=aC}});az.textAlign="start";Object.defineProperty(J,"textAlign",{get:function(){return az.textAlign},set:function(aC){az.textAlign=aC}});az.textBaseline="alphabetic";Object.defineProperty(J,"textBaseline",{get:function(){return az.textBaseline},set:function(aC){az.textBaseline=aC}});az.globalAlpha=1;Object.defineProperty(J,"globalAlpha",{get:function(){return az.globalAlpha},set:function(aC){az.globalAlpha=aC}});az.globalCompositeOperation="source-over";Object.defineProperty(J,"globalCompositeOperation",{get:function(){return az.globalCompositeOperation},set:function(aC){az.globalCompositeOperation=aC}});J.fillText=function ar(aD,aC,aE){};J.strokeText=function X(){};J.measureText=function ap(){return 1};var af=document.createElement("canvas");var am=af.getContext("2d");J.save=function T(){S.transform.pushMatrix();al()};J.restore=function V(){S.transform.popMatrix();Q()};J.translate=function B(aC,aD){S.transform.translate(aC,aD)};J.rotate=function ay(aC){S.transform.rotate(aC)};J.scale=function ah(aC,aD){S.transform.scale(aC,aD)};J.createImageData=function ae(aD,aC){return am.createImageData(aD,aC)};J.getImageData=function ax(aN,aM,aC,aP){var aG=am.createImageData(aC,aP);var aE=new Uint8Array(aC*aP*4);J.readPixels(aN,aM,aC,aP,J.RGBA,J.UNSIGNED_BYTE,aE);var aO=aC*4,aH=aP;for(var aF=0,aL=aH/2;aF<aL;++aF){for(var aD=0,aK=aO;aD<aK;++aD){var aJ=aF*aO+aD;var aI=(aH-aF-1)*aO+aD;aG.data[aJ]=aE[aI];aG.data[aI]=aE[aJ]}}return aG};J.putImageData=function an(aE,aC,aD){J.drawImage(aE,aC,aD)};J.transform=function ab(aG,aF,aI,aH,aE,aD){var aC=S.transform.m_stack[S.transform.c_stack];aC[0]*=aG;aC[1]*=aI;aC[2]*=aE;aC[3]*=aF;aC[4]*=aH;aC[5]*=aD;aC[6]=0;aC[7]=0};function E(aG){var aC=S.transform.m_stack;var aF=aC[0];for(var aE=0,aD=S.transform.c_stack+1;aE<aD;++aE){aF=m.mat3_multiply(aF,aC[aD-1-aE])}J.uniformMatrix3fv(aG.uTransforms,false,aF)}J.setTransform=function C(aF,aE,aH,aG,aD,aC){S.transform.setIdentity();J.transform.apply(this,arguments)};J.fillRect=function au(aD,aH,aF,aC){var aE=S.transform;var aG=S.initShaders(0);J.bindBuffer(J.ARRAY_BUFFER,o);J.vertexAttribPointer(aG.vertexPositionAttribute,4,J.FLOAT,false,0,0);aE.pushMatrix();aE.translate(aD,aH);aE.scale(aF,aC);E(aG);J.uniform4f(aG.uColor,az.fillStyle[0],az.fillStyle[1],az.fillStyle[2],az.fillStyle[3]);J.drawArrays(J.TRIANGLE_FAN,0,4);aE.popMatrix()};J.strokeRect=function Z(aD,aH,aF,aC){var aE=S.transform;var aG=S.initShaders(0);J.bindBuffer(J.ARRAY_BUFFER,o);J.vertexAttribPointer(aG.vertexPositionAttribute,4,J.FLOAT,false,0,0);aE.pushMatrix();aE.translate(aD,aH);aE.scale(aF,aC);E(aG);J.uniform4f(aG.uColor,az.strokeStyle[0],az.strokeStyle[1],az.strokeStyle[2],az.strokeStyle[3]);J.drawArrays(J.LINE_LOOP,0,4);aE.popMatrix()};J.clearRect=function F(aD,aF,aE,aC){};var H=[];function U(aC,aD){this.closed=false;this.verts=[aC,aD,0,0]}J.beginPath=function aj(){H.length=0};J.closePath=function K(){if(H.length){var aE=H[H.length-1],aD=aE.verts[0],aC=aE.verts[1];aE.closed=true;var aF=new U(aD,aC);H.push(aF)}};J.moveTo=function y(aC,aD){H.push(new U(aC,aD))};J.lineTo=function aw(aC,aD){if(H.length){H[H.length-1].verts.push(aC,aD,0,0)}else{J.moveTo(aC,aD)}};J.quadraticCurveTo=function av(aE,aD,aC,aF){};J.bezierCurveTo=function ai(aE,aD,aG,aF,aC,aH){};J.arcTo=function G(){};J.rect=function ad(aC,aF,aD,aE){J.moveTo(aC,aF);J.lineTo(aC+aD,aF);J.lineTo(aC+aD,aF+aE);J.lineTo(aC,aF+aE);J.closePath()};J.arc=function aa(aD,aH,aC,aF,aE,aG){};function I(aE){var aD=S.transform;var aG=S.initShaders(0);var aC=H[aE];var aF=aC.verts;J.bindBuffer(J.ARRAY_BUFFER,f);J.bufferData(J.ARRAY_BUFFER,new Float32Array(aF),J.STATIC_DRAW);J.vertexAttribPointer(aG.vertexPositionAttribute,4,J.FLOAT,false,0,0);aD.pushMatrix();E(aG);J.uniform4f(aG.uColor,az.fillStyle[0],az.fillStyle[1],az.fillStyle[2],az.fillStyle[3]);J.drawArrays(J.TRIANGLE_FAN,0,aF.length/4);aD.popMatrix()}J.fill=function O(){for(var aC=0;aC<H.length;aC++){I(aC)}};function at(aE){var aD=S.transform;var aG=S.initShaders(0);var aC=H[aE];var aF=aC.verts;J.bindBuffer(J.ARRAY_BUFFER,f);J.bufferData(J.ARRAY_BUFFER,new Float32Array(aF),J.STATIC_DRAW);J.vertexAttribPointer(aG.vertexPositionAttribute,4,J.FLOAT,false,0,0);aD.pushMatrix();E(aG);J.uniform4f(aG.uColor,az.strokeStyle[0],az.strokeStyle[1],az.strokeStyle[2],az.strokeStyle[3]);if(aC.closed){J.drawArrays(J.LINE_LOOP,0,aF.length/4)}else{J.drawArrays(J.LINE_STRIP,0,aF.length/4)}aD.popMatrix()}J.stroke=function ac(){for(var aC=0;aC<H.length;aC++){at(aC)}};J.clip=function ak(){};J.isPointInPath=function R(){};J.drawFocusRing=function ao(){};var D=function(aC){--aC;for(var aD=1;aD<32;aD<<=1){aC=aC|aC>>aD}return aC+1};J.handleLoadedTexture=function(aF){if(aF.width>S.maxTextureSize||aF.height>S.maxTextureSize){throw new Error("the texture size is too large!")}aF.m_Texture2D=aF.m_Texture2D||J.createTexture();J.bindTexture(J.TEXTURE_2D,aF.m_Texture2D);J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true);J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,aF);var aD=J.RGBA;var aK=J.RGBA;var aJ=J.UNSIGNED_BYTE;var aG=l(aF.width)&&l(aF.height);var aM=false;var aI=false;var aH="";var aC=true;if(!aG&&aI){var aE=document.createElement("canvas");aE.width=D(aF.width);aE.height=D(aF.height);var aL=aE.getContext("2d");aL.webkitImageSmoothingEnabled=aC;aL.mozImageSmoothingEnabled=aC;aL.msImageSmoothingEnabled=aC;aL.imageSmoothingEnabled=aC;aL.drawImage(aF,0,0,aF.width,aF.height,0,0,aE.width,aE.height);J.texImage2D(J.TEXTURE_2D,0,aD,aK,aJ,aE)}else{J.texImage2D(J.TEXTURE_2D,0,aD,aK,aJ,aF)}if(aI){if(aH==="repeat-x"){J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.REPEAT);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE)}else{if(aH==="repeat-y"){J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.REPEAT)}else{J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.REPEAT);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.REPEAT)}}}else{J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE)}if(aC){J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR);if(aG&&aM){J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR_MIPMAP_LINEAR);J.generateMipmap(J.TEXTURE_2D)}else{J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR)}}else{J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST)}J.bindTexture(J.TEXTURE_2D,null);return true};J.drawImage=function A(aE,aO,aN,aM,aL,aJ,aI,aH,aG){var aD=S.transform;aD.pushMatrix();var aF=i.texture;var aP=false;var aK=aE.m_Texture2D;if(!aK){throw new Error("invalid!")}if(aE.graphics){if(!aE.graphics["_lastSyncTexture"]||aE.graphics["_lastDrawCall"]>aE.graphics["_lastSyncTexture"]){J.handleLoadedTexture(aE);aE.graphics["_lastSyncTexture"]=Date.now();gloft.warn("The texture is updating directly.")}}if(aM==k){aD.translate(aO,aN);aD.scale(aE.width,aE.height)}else{if(aJ==k){aD.translate(aO,aN);aD.scale(aM,aL)}else{aD.translate(aJ,aI);aD.scale(aH,aG);if(aO!=0||aN!=0||aM!=aE.width||aL!=aE.height){aF=aF|i.crop;aP=true}}}var aC=S.initShaders(aF);if(aP){J.uniform4f(aC.uCropSource,aO/aE.width,aN/aE.height,aM/aE.width,aL/aE.height)}J.bindBuffer(J.ARRAY_BUFFER,o);J.vertexAttribPointer(aC.vertexPositionAttribute,4,J.FLOAT,false,0,0);J.bindTexture(J.TEXTURE_2D,aK);J.activeTexture(J.TEXTURE0);J.uniform1i(aC.uSampler,0);E(aC);J.drawArrays(J.TRIANGLE_FAN,0,4);aD.popMatrix()}}}(Math));