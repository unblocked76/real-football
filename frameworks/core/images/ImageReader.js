gloft.FMT_JPG=0;gloft.FMT_PNG=1;gloft.FMT_TIFF=2;gloft.FMT_RAWDATA=3;gloft.FMT_WEBP=4;gloft.FMT_UNKNOWN=5;gloft.getImageFormatByData=function(a){if(a.length>8&&a[0]===137&&a[1]===80&&a[2]===78&&a[3]===71&&a[4]===13&&a[5]===10&&a[6]===26&&a[7]===10){return gloft.FMT_PNG}if(a.length>2&&((a[0]===73&&a[1]===73)||(a[0]===77&&a[1]===77)||(a[0]===255&&a[1]===216))){return gloft.FMT_TIFF}return gloft.FMT_UNKNOWN};gloft.decodeImageData=function(e){var d=gloft.getImageFormatByData(e);if(d!==gloft.FMT_PNG&&d!==gloft.FMT_TIFF){throw new Error("unknown image format with Data")}var a=document.createElement("canvas");if(d===gloft.FMT_PNG){var b=new gloft.PNGReader(e);b.render(a)}else{gloft.warn("decoding tiff file...");var c=gloft.tiffReader;c.parseTIFF(e,a)}return a};