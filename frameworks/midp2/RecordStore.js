"use strict";var _p=window;var javax=_p.javax=_p.javax||{};var microedition=_p.javax.microedition=_p.javax.microedition||{};var rms=_p.javax.microedition.rms=_p.javax.microedition.rms||{};var RecordStore=_p.javax.microedition.rms.RecordStore=gloft.Class.extend({listRecordID:[],lastRecordID:0,recordStoreName:"",ctor:function(b,h){this.recordStoreName=b;var j=gloft.sys.localStorage.getItem(this.recordStoreName);if(j==null&&h===false){throw new Error("RecordStoreNotFoundException")}if(j!=null){var a=gloft.base64ToArrayBuffer(j);var f=0;var g=function(i){return gloft.casttoint((a[f++]&255)|((a[f++]&255)<<8)|((a[f++]&255)<<16)|((a[f++]&255)<<24))};this.lastRecordID=g();var e=g();this.listRecordID=[];for(var d=0;d<e;d++){var c=g();this.listRecordID.push(c)}}else{this.lastRecordID=0;this.listRecordID=[]}},getNumRecords:function(){return this.listRecordID.length},closeRecordStore:function(){this.saveRecordStoreState()},addRecord:function(d,b,c){var a=++this.lastRecordID;this.listRecordID.push(a);this.setRecordImpl(this.recordStoreName+"_"+a,d,b,c);this.saveRecordStoreState();return this.lastRecordID},setRecord:function(a,d,b,c){this.setRecordImpl(this.recordStoreName+"_"+a,d,b,c);this.saveRecordStoreState()},getRecord:function(f,c,h){var g=3;if(c==undefined){g=1}var d=gloft.sys.localStorage.getItem(this.recordStoreName+"_"+f);if(d==null){throw new Error("RecordStoreNotFoundException")}var b=gloft.base64ToArrayBuffer(d);if(g==3){if(c.length<h+b.length){throw new Error("OutOfBound")}var e=0,a=b.length;for(;e<a;e++){c[e+h]=b[e]}return a}else{return b}},setRecordImpl:function(a,d,b,c){gloft.sys.localStorage.setItem(a,gloft.arrayBufferToBase64(d,b,c))},saveRecordStoreState:function(){var d=[];var a=0;var c=function(e){d[a++]=gloft.casttobyte(e&255);e>>=8;d[a++]=gloft.casttobyte(e&255);e>>=8;d[a++]=gloft.casttobyte(e&255);e>>=8;d[a++]=gloft.casttobyte(e&255)};c(this.lastRecordID);c(this.listRecordID.length);for(var b=0;b<this.listRecordID.length;b++){c(this.listRecordID[b])}gloft.sys.localStorage.setItem(this.recordStoreName,gloft.arrayBufferToBase64(d))},});RecordStore.openRecordStore=function(g,f,e,d){var j;var c;var a;var i;var b;var h;if(d!=undefined){j=g;c="";a="";i=f;b=e;h=d}else{if(e!=undefined){j=g;c=f;a=e;i=false;b=0;h=false}else{if(f!=undefined){j=g;c="";a="";i=f;b=0;h=true}}}return RecordStore.open(j,c,a,i,b,h)};RecordStore.open=function(h,d,a,g,b,f){var c=["\\","/",":","*","?","<",">","|"];for(var e=0;e<c.length;e++){h=h.replace(c[e],"_");a=a.replace(c[e],"_")}var j="__rs__"+a+"__"+h;return new RecordStore(window.productKey+j,g)};