"use strict";var ASprite=gloft.Class.extend({_cur_pal:gloft.casttoint(null),_cur_pool:gloft.casttoint(null),_palBlend_srcA:gloft.casttoint(null),_palBlend_srcB:gloft.casttoint(null),_palBlend_dest:gloft.casttoint(null),_palBlend_current:gloft.casttoint(null),_palBlend_UseOneColor:gloft.casttoboolean(null),_palBlend_ModuleState:null,_bRotatedFont:gloft.casttoboolean(null),_nLineHeight:gloft.casttoint(null),_nLineSpacing:gloft.casttoint(null),_nCharSpacing:gloft.casttoint(null),_nSpaceWidth:gloft.casttoint(null),_nCharYOffset:gloft.casttoint(null),_nFontAscent:gloft.casttoint(null),_bUnderline:gloft.casttoboolean(null),_bBold:gloft.casttoboolean(null),_pMapChar:null,_pMapCharShort:null,_nDivider:gloft.casttoshort(null),_pMapCharInt:null,_nDividerInt:gloft.casttoint(null),m_scaleAccelerator:gloft.casttoint(null),nALetterRect:null,_isExtraPaletteExist:gloft.casttoboolean(null),_aryPrecomputedImages:null,_aryPrecomputedX:null,_aryPrecomputedY:null,_aryPrecomputedSizeX:null,_aryPrecomputedSizeY:null,_aryPrecomputedImgX:null,_aryPrecomputedImgY:null,_aryPrecomputedFlags:null,_nModules:gloft.casttoint(null),_modules_x_byte:null,_modules_y_byte:null,_modules_x_short:null,_modules_y_short:null,_modules_w_scaled:null,_modules_h_scaled:null,_modules_w_short:null,_modules_h_short:null,_modules_w_byte:null,_modules_h_byte:null,_modules_extra_info:null,_modules_extra_pointer:null,_frames_nfm_byte:null,_frames_nfm_short:null,_frames_fm_start:null,_frames_rc:null,_frames_rc_short:null,_frames_col:null,_frames_col_short:null,_frames_rects:null,_frames_rects_short:null,_frames_rects_start:null,_fmodules:null,_fmodules_id_byte:null,_fmodules_id_short:null,_fmodules_flags:null,_fmodules_ox_short:null,_fmodules_oy_short:null,_fmodules_ox_byte:null,_fmodules_oy_byte:null,_fmodules_pal:null,_fmodules_blend_mode:null,_fmodules_blend_opacity:null,_anims_naf_byte:null,_anims_naf_short:null,_anims_af_start:null,_aframes:null,_aframes_frame_byte:null,_aframes_frame_short:null,_aframes_time:null,_aframes_ox_short:null,_aframes_oy_short:null,_aframes_ox_byte:null,_aframes_oy_byte:null,_aframes_flags:null,_map:null,_cur_map:gloft.casttoint(null),_frameMapping_index:null,_frameMapping_config_sprite:null,_frameMapping_config_palId:null,_frameMapping_config_frameOff:null,_w_pos:null,_header_size:null,_gifHeader:null,_modules_data:null,_modules_data_off_short:null,_modules_data_off_int:null,_modules_data_array:null,_bs_flags:gloft.casttoint(null),_bs_extraFlags0:gloft.casttoint(null),_pal_short:null,_pal_int:null,_transp:null,_pal_data:null,_palettes:gloft.casttoint(null),_loadedPalettes:gloft.casttoint(null),_colors:null,_crt_pal:gloft.casttoint(null),_alpha:gloft.casttoboolean(null),_multiAlpha:gloft.casttoboolean(null),_flags:gloft.casttoint(null),_data_format:gloft.casttoshort(null),_i64rle_color_mask:null,_i64rle_color_bits:null,_bTraceNow:gloft.casttoboolean(null),_modules_image_shortAAA:null,_module_image_imageAAA:null,_module_image_intAAA:null,_module_image_imageAA:null,_module_image_byteAA:null,_frame_image_intAAA:null,_frame_image_imageAAA:null,_frame_image_byteAAA:null,_frame_image_byteAA:null,_main_image:null,_PNG_packed_PLTE_CRC:null,_PNG_packed_tRNS_CRC:null,_PNG_packed_IHDR_CRC:null,_PNG_packed_IDAT_ADLER:null,_PNG_packed_IDAT_CRC:null,_module_types:null,_module_img:null,_module_colors_byte:null,_module_colors_int:null,_modules_usage:null,_number_image:gloft.casttobyte(null),_pal_data_array:null,_cachedFrameIsOpaque:gloft.casttoboolean(null),_palTransparencyIndex:gloft.casttoint(null),_frame_data:null,unload:function(){if(true){this._modules_y_short=null;this._modules_x_short=null}else{this._modules_x_byte=null;this._modules_y_byte=null}if(true){this._modules_w_short=null;this._modules_h_short=null}else{this._modules_w_byte=null;this._modules_h_byte=null}if(false){this._fmodules_id_short=null}else{if(true){this._fmodules_id_short=null;this._fmodules_id_byte=null}else{this._fmodules_id_byte=null}}if(false){this._frames_nfm_short=null}else{if(true){this._frames_nfm_short=null;this._frames_nfm_byte=null}else{this._frames_nfm_byte=null}}if(false){this._aframes_frame_short=null}else{if(true){this._aframes_frame_short=null;this._aframes_frame_byte=null}else{this._aframes_frame_byte=null}}if(false){this._anims_naf_short=null}else{if(true){this._anims_naf_short=null;this._anims_naf_byte=null}else{this._anims_naf_byte=null}}this._frames_fm_start=null;this._frames_rc=null;this._frames_rc_short=null;this._frames_col=null;this._frames_col_short=null;this._frames_rects=null;this._frames_rects_short=null;this._frames_rects_start=null;this._fmodules=null;this._anims_af_start=null;this._aframes=null;if(this._map!=null){for(var d=0;d<this._map.length;++d){this._map[d]=null}this._map=null}if(this._transp!=null){for(var c=0;c<this._transp.length;++c){this._transp[c]=null}this._transp=null}if(false){if(this._pal_short!=null){for(var b=0;b<this._pal_short.length;++b){this._pal_short[b]=null}this._pal_short=null}}else{if(true&&this._pal_int!=null){for(var a=0;a<this._pal_int.length;++a){this._pal_int[a]=null}this._pal_int=null}}this.FreeCachedModules();this._main_image=null;this._PNG_packed_PLTE_CRC=null;this._PNG_packed_tRNS_CRC=null;this._PNG_packed_IHDR_CRC=null;this._PNG_packed_IDAT_ADLER=null;this._PNG_packed_IDAT_CRC=null},Load_dup_aBI:function(b,a){this.Load_dup_aBIIIjavaxmicroeditionlcduiImage(b,a,16777215,1,null)},Load_dup_aBIII:function(d,c,b,a){if(false){this.Load_dup_aBIIIjavaxmicroeditionlcduiImage(d,c,b,a,null)}},Load_dup_aBIjavaxmicroeditionlcduiImage:function(c,b,a){if(false){this.Load_dup_aBIIIjavaxmicroeditionlcduiImage(c,b,16777215,1,a)}},InitMultipleModuleTypes:function(b){if(this._module_types==null){this._module_types=gloft.ArrayCreation([b],gloft.casttobyte(null));for(var a=0;a<b;++a){this._module_types[a]=0}}if(false){if(this._module_colors_byte==null){this._module_colors_byte=gloft.ArrayCreation([b],gloft.casttobyte(null))}}else{if(this._module_colors_int==null){this._module_colors_int=gloft.ArrayCreation([b],gloft.casttoint(null))}}},LoadModules:function(s,o){this._nModules=gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)));if(false){GLLib.Dbg("nModules = "+this._nModules)}if(this._nModules>0){if(true&&(!true||(this._bs_flags&32)!=0)){this._modules_x_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null));this._modules_y_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{if(false&&(!true||(this._bs_flags&2)!=0)){this._modules_x_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));this._modules_y_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}}if(true){this._modules_w_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null));this._modules_h_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{this._modules_w_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));this._modules_h_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}var r=0;var q=0;var y=null;if(true&&(this._bs_flags&4)!=0){this._module_img=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}var x=false;var k=false;var h=false;var f=false;for(var u=0;u<this._nModules;++u){var d=false;var c=false;var a=false;if(true){if((o[s]&255)==0){++s;x=false;k=true;h=true;if((this._bs_flags&4)!=0){this._module_img[u]=o[s++]}}else{if((o[s]&255)==255){if(false){GLLib.Assert(false,"Sprite contains a RECT MODULE TYPE, so you can't set sprite_disableModuleType_Rect")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=1;x=true;k=false;h=true}else{if((o[s]&255)==254){if(false){GLLib.Assert(false,"Sprite contains a FILL RECT MODULE TYPE, so you can't set sprite_disableModuleType_FillRect")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=2;x=true;k=false;h=true}else{if((o[s]&255)==253){if(false){GLLib.Assert(false,"Sprite contains a MARKER MODULE TYPE, so you can't set sprite_disableModuleType_Marker")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=5;x=false;k=false;h=true}else{if((o[s]&255)==252){if(false){GLLib.Assert(false,"Sprite contains a ARC MODULE TYPE, so you can't set sprite_disableModuleType_Arc")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=3;x=true;k=false;h=true;d=true}else{if((o[s]&255)==251){if(false){GLLib.Assert(false,"Sprite contains a FILL ARC MODULE TYPE, so you can't set sprite_disableModuleType_FillArc")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=4;x=true;k=false;h=true;d=true}else{if((o[s]&255)==250){if(false){GLLib.Assert(false,"Sprite contains a TRIANGLE MODULE TYPE, so you can't set sprite_disableModuleType_Triangle")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=6;x=true;k=false;h=false;c=true}else{if((o[s]&255)==249){if(false){GLLib.Assert(false,"Sprite contains a FILL TRIANGLE MODULE TYPE, so you can't set sprite_disableModuleType_FillTriangle")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=7;x=true;k=false;h=false;c=true}else{if((o[s]&255)==248){if(false){GLLib.Assert(false,"Sprite contains a LINE MODULE TYPE, so you can't set sprite_disableModuleType_Line")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=8;x=true;k=false;h=true;c=false}else{if((o[s]&255)==247){if(false){GLLib.Assert(false,"Sprite contains a FILL RECT GRAD MODULE TYPE, so you can't set sprite_disableModuleType_FillRectGradient")}++s;this.InitMultipleModuleTypes(this._nModules);this._module_types[u]=9;x=true;a=true;k=false;h=true;c=false}else{GLLib.Assert(false,"Invalid module type : "+(o[s]&255)+"   module #"+u)}}}}}}}}}}}else{if((o[s]&255)==0){++s;x=false;k=true;h=true}else{if(false&&(o[s]&255)==253){++s;x=false;k=true;h=true;f=true;GLLib.Dbg("Warning: Converting from MD_MARKER to MD_IMAGE!!")}else{GLLib.Assert(false,"Invalid module type : "+(o[s]&255)+"   module #"+u)}}}if(true){if(x){if(false){this._module_colors_byte[u]=o[s++];s+=3}else{this._module_colors_int[u]=(o[s++]&255)+((o[s++]&255)<<8)+((o[s++]&255)<<16)+((o[s++]&255)<<24)}}if(a){if(y==null){y=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}var w=gloft.ArrayCreation([3],gloft.casttoshort(null));var p=(o[s++]&255)+((o[s++]&255)<<8)+((o[s++]&255)<<16)+((o[s++]&255)<<24);w[0]=gloft.casttoshort((p&65535));w[1]=gloft.casttoshort((p>>16&65535));w[2]=o[s++];y[u]=w;++r;q+=3}}if(k){if(true&&(!true||(this._bs_flags&32)!=0)){this._modules_x_short[u]=gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)));this._modules_y_short[u]=gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)))}else{if(false&&(!true||(this._bs_flags&2)!=0)){this._modules_x_byte[u]=o[s++];this._modules_y_byte[u]=o[s++]}}}if(h){if(true){if(true&&(this._bs_flags&16)==0){this._modules_w_short[u]=gloft.casttoshort((o[s++]&255));this._modules_h_short[u]=gloft.casttoshort((o[s++]&255))}else{this._modules_w_short[u]=gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)));this._modules_h_short[u]=gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)))}}else{this._modules_w_byte[u]=o[s++];this._modules_h_byte[u]=o[s++]}if(false&&!true&&f){if(true){this._modules_w_short[u]=0;this._modules_h_short[u]=0}else{this._modules_w_byte[u]=0;this._modules_h_byte[u]=0}}}if(true){if(d){if(y==null){y=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}y[u]=[gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8))),gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)))];++r;q+=2}if(c){if(y==null){y=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}y[u]=[gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8))),gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8))),gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8))),gloft.casttoshort(((o[s++]&255)+((o[s++]&255)<<8)))];++r;q+=4}}}if(true){if(r>0){this._modules_extra_info=gloft.ArrayCreation([q],gloft.casttoshort(null));this._modules_extra_pointer=gloft.ArrayCreation([r<<1],gloft.casttoshort(null));var m=0;var l=0;for(var g=0;g<this._nModules;++g){var e=gloft.casttoint(null);if((!false&&this._module_types[g]==3)||(!false&&this._module_types[g]==4)){e=2}else{if((!false&&this._module_types[g]==6)||(!false&&this._module_types[g]==7)){e=4}else{if(!false&&this._module_types[g]==9){e=3}else{e=-1}}}if(e>0){this._modules_extra_pointer[(m<<1)+0]=g;this._modules_extra_pointer[(m<<1)+1]=l;for(var t=0;t<e;++t){this._modules_extra_info[l]=y[g][t];++l}y[g]=null;++m}}}var v=null}}if(false){if(false){GLLib.Dbg("Module Usage: offset = "+s+" _nModules = "+this._nModules)}if(!true||(this._bs_flags&64)!=0){java.lang.System.arraycopy(o,s,this._modules_usage=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null)),0,this._nModules);s+=this._nModules}}return s},LoadFModules:function(d,c){var b=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)));if(false){GLLib.Dbg("nFModules = "+b)}if(b>0){if(false){java.lang.System.arraycopy(c,d,this._fmodules=gloft.ArrayCreation([b<<2],gloft.casttobyte(null)),0,this._fmodules.length);d+=this._fmodules.length}else{if(false||(true&&(this._bs_flags&1048576)!=0)){this._fmodules_id_short=gloft.ArrayCreation([b],gloft.casttoshort(null))}else{this._fmodules_id_byte=gloft.ArrayCreation([b],gloft.casttobyte(null))}if(false||(true&&(this._bs_flags&1024)!=0)){this._fmodules_ox_short=gloft.ArrayCreation([b],gloft.casttoshort(null));this._fmodules_oy_short=gloft.ArrayCreation([b],gloft.casttoshort(null))}else{this._fmodules_ox_byte=gloft.ArrayCreation([b],gloft.casttobyte(null));this._fmodules_oy_byte=gloft.ArrayCreation([b],gloft.casttobyte(null))}this._fmodules_flags=gloft.ArrayCreation([b],gloft.casttobyte(null));if(true&&(!true||(this._bs_flags&16384)!=0)){this._fmodules_pal=gloft.ArrayCreation([b],gloft.casttobyte(null))}if(false&&false&&(this._bs_extraFlags0&16)!=0){this._fmodules_blend_mode=gloft.ArrayCreation([b],gloft.casttobyte(null));this._fmodules_blend_opacity=gloft.ArrayCreation([b],gloft.casttobyte(null))}for(var a=0;a<b;++a){if((false||true)&&(this._bs_flags&1048576)!=0){this._fmodules_id_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)))}else{if(false){this._fmodules_id_short[a]=gloft.casttoshort((c[d++]&255))}else{this._fmodules_id_byte[a]=c[d++]}}if(false||(true&&(this._bs_flags&1024)!=0)){if(!true&&true&&(this._bs_flags&1024)==0){this._fmodules_ox_short[a]=c[d++];this._fmodules_oy_short[a]=c[d++]}else{this._fmodules_ox_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)));this._fmodules_oy_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)))}}else{this._fmodules_ox_byte[a]=c[d++];this._fmodules_oy_byte[a]=c[d++]}if(true&&(!true||(this._bs_flags&16384)!=0)){this._fmodules_pal[a]=c[d++]}this._fmodules_flags[a]=c[d++];if(false&&false&&(this._bs_extraFlags0&16)!=0){this._fmodules_blend_mode[a]=c[d++];this._fmodules_blend_opacity[a]=c[d++]}}}}return d},LoadFrames:function(h,r){if(true&&(this._bs_flags&32768)!=0){var a=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)));if((this._bs_flags&1024)==0){java.lang.System.arraycopy(r,h,this._frames_rects=gloft.ArrayCreation([a<<2],gloft.casttobyte(null)),0,a<<2);h+=a<<2}else{this._frames_rects_short=gloft.ArrayCreation([a<<2],gloft.casttoshort(null));h=this.readArray2Short(r,h,this._frames_rects_short,0,a<<2,false,false)}}var q=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)));if(false){GLLib.Dbg("nFrames = "+q+"    @ offset "+(h-2))}if(q>0){if(false||(true&&(this._bs_flags&2048)!=0)){this._frames_nfm_short=gloft.ArrayCreation([q],gloft.casttoshort(null))}else{this._frames_nfm_byte=gloft.ArrayCreation([q],gloft.casttobyte(null))}this._frames_fm_start=gloft.ArrayCreation([q],gloft.casttoshort(null));var p=0;if(true&&(this._bs_flags&32768)!=0){this._frames_rects_start=gloft.ArrayCreation([q+1],gloft.casttoshort(null))}var o=0;for(var m=0;m<q;++m){if(false){GLLib.Dbg("    "+m+"    @ offset "+h)}if((false||true)&&(this._bs_flags&2048)!=0){this._frames_nfm_short[m]=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)))}else{if(false){this._frames_nfm_short[m]=gloft.casttoshort((r[h++]&255))}else{this._frames_nfm_byte[m]=r[h++]}}if(false){this._frames_fm_start[m]=p;p+=gloft.casttoshort(this.GetFModules(m))}else{this._frames_fm_start[m]=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)))}if(true&&(this._bs_flags&32768)!=0&&(this._bs_flags&32768)!=0){this._frames_rects_start[m]=o;o+=r[h++]}}if(true&&(this._bs_flags&32768)!=0){this._frames_rects_start[this._frames_rects_start.length-1]=o}if(!false&&(this._bs_flags&4096)==0){if(true){var f=q<<2;if((this._bs_flags&1024)==0){this._frames_rc=gloft.ArrayCreation([f],gloft.casttobyte(null));for(var g=0;g<f;++g){this._frames_rc[g]=r[h++]}}else{this._frames_rc_short=gloft.ArrayCreation([f],gloft.casttoshort(null));for(var e=0;e<f;++e){this._frames_rc_short[e]=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)))}}}else{if((this._bs_flags&1024)==0){h+=q<<2}else{h+=q<<3}}}if(false&&(!true||(this._bs_flags&8192)!=0)){var d=q<<2;if((this._bs_flags&1024)==0){this._frames_col=gloft.ArrayCreation([d],gloft.casttobyte(null));for(var c=0;c<d;++c){this._frames_col[c]=r[h++]}}else{this._frames_col_short=gloft.ArrayCreation([d],gloft.casttoshort(null));for(var b=0;b<d;++b){this._frames_col_short[b]=gloft.casttoshort(((r[h++]&255)+((r[h++]&255)<<8)))}}}}return h},LoadAFrames:function(d,c){var b=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)));if(false){GLLib.Dbg("nAFrames = "+b)}if(b>0){if(false){java.lang.System.arraycopy(c,d,this._aframes=gloft.ArrayCreation([b*5],gloft.casttobyte(null)),0,this._aframes.length);d+=this._aframes.length}else{if(false||(true&&(this._bs_flags&2097152)!=0)){this._aframes_frame_short=gloft.ArrayCreation([b],gloft.casttoshort(null))}else{this._aframes_frame_byte=gloft.ArrayCreation([b],gloft.casttobyte(null))}this._aframes_time=gloft.ArrayCreation([b],gloft.casttobyte(null));if(true&&(this._bs_flags&262144)!=0){this._aframes_ox_short=gloft.ArrayCreation([b],gloft.casttoshort(null));this._aframes_oy_short=gloft.ArrayCreation([b],gloft.casttoshort(null))}else{this._aframes_ox_byte=gloft.ArrayCreation([b],gloft.casttobyte(null));this._aframes_oy_byte=gloft.ArrayCreation([b],gloft.casttobyte(null))}this._aframes_flags=gloft.ArrayCreation([b],gloft.casttobyte(null));for(var a=0;a<b;++a){if((false||true)&&(this._bs_flags&2097152)!=0){this._aframes_frame_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)))}else{if(false){this._aframes_frame_short[a]=gloft.casttoshort((c[d++]&255))}else{this._aframes_frame_byte[a]=c[d++]}}this._aframes_time[a]=c[d++];if(true&&(this._bs_flags&262144)!=0){if(true&&(this._bs_flags&262144)==0){this._aframes_ox_short[a]=c[d++];this._aframes_oy_short[a]=c[d++]}else{this._aframes_ox_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)));this._aframes_oy_short[a]=gloft.casttoshort(((c[d++]&255)+((c[d++]&255)<<8)))}}else{this._aframes_ox_byte[a]=c[d++];this._aframes_oy_byte[a]=c[d++]}this._aframes_flags[a]=c[d++]}}}return d},LoadAnims:function(e,d){var c=gloft.casttoshort(((d[e++]&255)+((d[e++]&255)<<8)));if(false){GLLib.Dbg("nAnims = "+c)}if(c>0){if(false||(true&&(this._bs_flags&524288)!=0)){this._anims_naf_short=gloft.ArrayCreation([c],gloft.casttoshort(null))}else{this._anims_naf_byte=gloft.ArrayCreation([c],gloft.casttobyte(null))}this._anims_af_start=gloft.ArrayCreation([c],gloft.casttoshort(null));var b=0;for(var a=0;a<c;++a){if((false||true)&&(this._bs_flags&524288)!=0){this._anims_naf_short[a]=gloft.casttoshort(((d[e++]&255)+((d[e++]&255)<<8)))}else{if(false){this._anims_naf_short[a]=gloft.casttoshort((d[e++]&255))}else{this._anims_naf_byte[a]=d[e++]}}if(false){this._anims_af_start[a]=b;b+=gloft.casttoshort(this.GetAFrames(a))}else{this._anims_af_start[a]=gloft.casttoshort(((d[e++]&255)+((d[e++]&255)<<8)))}}}return e},Load_dup_aBIIIjavaxmicroeditionlcduiImage:function(k,a,h,g,m){try{if(k==null){GLLib.Assert(false,"Cant load sprite, file[] is null");return}if(false){GLLib.Dbg("ASprite.Load("+k.length+" bytes, "+a+")..."+this)}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}var f=gloft.casttoshort(((k[a++]&255)+((k[a++]&255)<<8)));if(false){GLLib.Dbg("  bs_version = 0x"+java.lang.Integer.toHexString(f))}if(f!=1503){GLLib.Assert(false,"ASprite.Load.Invalid BSprite version !  GLLib supports only (0x"+java.lang.Integer.toHexString(1503)+")    this sprite version (0x"+java.lang.Integer.toHexString(f)+")")}this._bs_flags=(k[a++]&255)+((k[a++]&255)<<8)+((k[a++]&255)<<16)+((k[a++]&255)<<24);if(false){GLLib.Dbg("  bs_flags = 0x"+java.lang.Integer.toHexString(this._bs_flags))}ASprite.AssertFlags(this._bs_flags);if(false&&(this._bs_flags&4194304)!=0){this._bs_extraFlags0=(k[a++]&255)+((k[a++]&255)<<8)+((k[a++]&255)<<16)+((k[a++]&255)<<24);if(false){GLLib.Dbg("  bs_extra_flags0 = 0x"+java.lang.Integer.toHexString(this._bs_extraFlags0))}ASprite.AssertExtraFlags0(this._bs_extraFlags0)}if(false){a=this.LoadModules_NI(a,k);a=this.LoadFModules_NI(a,k);a=this.LoadFrames_NI(a,k);a=this.LoadAFrames_NI(a,k);a=this.LoadAnims_NI(a,k)}else{a=this.LoadModules(a,k);a=this.LoadFModules(a,k);a=this.LoadFrames(a,k);a=this.LoadAFrames(a,k);a=this.LoadAnims(a,k)}if(this._nModules<=0){if(false){GLLib.Dbg("WARNING: sprite with num modules = "+this._nModules)}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}return}if(true&&(!true||(this._bs_flags&16777216)!=0)){a=this.LoadData_useModuleImages(a,k,h,g)}if(false&&(!true||(this._bs_flags&536870912)!=0)){a=this.LoadData_useSingleImages(a,k,h,g)}if(false&&(!true||(this._bs_flags&8)!=0)){a=this.LoadData_useRAW(a,k)}if(false){(this._main_image=gloft.ArrayCreation([100],null))[0]=m}this._loadedPalettes=this._palettes;if(true){this._map=gloft.ArrayCreation([16],gloft.casttoshort(null));this._cur_map=-1}if(false&&!false){if(false){this._pal_short=null}else{this._pal_int=null}}if(true&&(false||(this._bs_flags&4096)!=0)){var b=this.GetFrameCount();if(b>0){var e=0;if((this._bs_flags&1024)==0&&(this._flags&4)==0){this._frames_rc=gloft.ArrayCreation([b<<2],gloft.casttobyte(null));for(var d=0;d<b;++d){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,d,0,0,0,false);this._frames_rc[e++]=gloft.casttobyte(ASprite.s_rc[0]);this._frames_rc[e++]=gloft.casttobyte(ASprite.s_rc[1]);this._frames_rc[e++]=gloft.casttobyte((ASprite.s_rc[2]-ASprite.s_rc[0]));this._frames_rc[e++]=gloft.casttobyte((ASprite.s_rc[3]-ASprite.s_rc[1]))}}else{this._frames_rc_short=gloft.ArrayCreation([b<<2],gloft.casttoshort(null));for(var c=0;c<b;++c){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,c,0,0,0,false);this._frames_rc_short[e++]=gloft.casttoshort(ASprite.s_rc[0]);this._frames_rc_short[e++]=gloft.casttoshort(ASprite.s_rc[1]);this._frames_rc_short[e++]=gloft.casttoshort((ASprite.s_rc[2]-ASprite.s_rc[0]));this._frames_rc_short[e++]=gloft.casttoshort((ASprite.s_rc[3]-ASprite.s_rc[1]))}}}}else{if((this._flags&4)!=0){GLLib.Dbg("SetForceShortFrameRC: You need to enable sprite_alwaysBsSkipFrameRc or export the sprite with BS_SKIP_FRAME_RC sprite flag to use this functionality!");this.SetForceShortFrameRC(false)}}if(false){GLLib.Dbg("ASprite.Load --- ok!")}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}}catch(l){if(false){GLLib.Dbg("ASprite.Load()."+l)}l.printStackTrace();GLLib.Assert(false,"Asprite.Load. error while loading sprite : "+l)}if(ASprite.temp!=null){this.GetModuleRect(null,0,0,0,0)}},FreeCacheData:function(a){if(false){return}if(false){if(false){--ASprite._images_count;ASprite._images_size-=this.GetModuleData_dup_I(0).length}if(!true||(this._bs_flags&536870912)!=0){this._pal_data=null}}this._pal_data=null;this._pal_short=null;this._pal_int=null;if(false){if(a){if(this._modules_data_array!=null){for(var e=0;e<this._modules_data_array.length;++e){this._modules_data_array[e]=null}this._modules_data_array=null}}else{this.ReleaseUnmarkedModuleCompressedData(true)}}else{if(!a){GLLib.Assert(false,"FreeCacheData: Param is FALSE, but can't free partial compressed data unless sprite_useDoubleArrayForModuleData is TRUE!")}this._modules_data=null;if(false){this._modules_data_off_short=null}else{this._modules_data_off_int=null}}if(false||false){this._modules_usage=null}if(false&&(this._bs_flags&8)!=0&&!false&&(!true||(this._flags&1)==0)){if(false){GLLib.Dbg("FreeCacheData: Releasing the RAW data since we should have an image cache.")}if(this._module_image_intAAA!=null){for(var d=0;d<this._module_image_intAAA.length;++d){if(this._module_image_intAAA[d]!=null){for(var c=0;c<this._module_image_intAAA[d].length;++c){this._module_image_intAAA[d][c]=null}}this._module_image_intAAA[d]=null}this._module_image_intAAA=null}}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}},GetModulesUsage:function(u){if(false&&!false){var f=this._nModules;if(false){if(this._fmodules!=null){var m=gloft.casttoshort((gloft.casttoint(this._fmodules.length/4)))}}else{if(false||(true&&(this._bs_flags&1048576)!=0)){if(this._fmodules_id_short!=null){var k=gloft.casttoshort(this._fmodules_id_short.length)}}else{if(this._fmodules_id_byte!=null){var h=gloft.casttoshort(this._fmodules_id_byte.length)}}}var e=gloft.casttoshort(this.GetFrameCount());if(false){if(this._aframes!=null){var d=gloft.casttoshort((gloft.casttoint(this._aframes.length/5)))}}else{if(false||(true&&(this._bs_flags&2097152)!=0)){if(this._aframes_frame_short!=null){var c=gloft.casttoshort(this._aframes_frame_short.length)}}else{if(this._aframes_frame_byte!=null){var b=gloft.casttoshort(this._aframes_frame_byte.length)}}}var a=gloft.casttoshort(this.GetAnimationCount());var g=gloft.ArrayCreation([f],gloft.casttobyte(null));for(var t=0;t<e;++t){this.GetModulesUsageInFrame(t,0,u,g)}for(var s=0;s<a;++s){var r=this._anims_af_start[s];var w=this.GetAFrames(s);for(var q=0;q<w;++q){var p=gloft.casttoshort((q+r));var o=gloft.casttoint(null);var l=gloft.casttoint(null);if(false){o=(this._aframes[p*5+4]&255);l=(this._aframes[p*5]&255)}else{o=(this._aframes_flags[p]&255);if(false||(true&&(this._bs_flags&2097152)!=0)){l=this._aframes_frame_short[p]}else{l=(this._aframes_frame_byte[p]&255)}}if(true&&!false&&(!true||(this._bs_flags&2097152)==0)){l|=(o&192)<<2}this.GetModulesUsageInFrame(l,o,u,g)}}for(var v=0;v<f;++v){var x=g;var j=v;x[j]|=gloft.casttobyte(u)}return g}return null},GetModulesUsageInFrame:function(a,m,l,o){if(false&&!false){var k=this._frames_fm_start[a]&65535;var h=gloft.casttoint(null);if(false||(true&&(this._bs_flags&2048)!=0)){h=this._frames_nfm_short[a]}else{h=(this._frames_nfm_byte[a]&255)}for(var g=0;g<h;++g){var f=k+g;var d=gloft.casttoint(null);var c=gloft.casttoint(null);if(false){d=(this._fmodules[f*4+3]&255);c=(this._fmodules[f*4]&255)}else{d=(this._fmodules_flags[f]&255);if(false||(true&&(this._bs_flags&1048576)!=0)){c=this._fmodules_id_short[f]}else{c=(this._fmodules_id_byte[f]&255)}}if(true&&!false&&(!true||(this._bs_flags&1048576)==0)){c|=(d&192)<<2}for(var e=0;e<3;++e){if((l&1<<e)!=0){var b=m^e;if(c<o.length){var p=c;o[p]|=gloft.casttobyte((1<<((d^b)&7)))}}}}}},SetModuleMapping:function(d,c){if(true){if(this._map[d]==null){this._map[d]=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null));for(var b=0;b<this._nModules;++b){this._map[d][b]=gloft.casttoshort(b)}}if(c==null){return}for(var a=0;a<c.length;this._map[d][(c[a++]&255)+((c[a++]&255)<<8)]=gloft.casttoshort(((c[a++]&255)+((c[a++]&255)<<8)))){}}},SetCurrentMMapping:function(a){if(true){this._cur_map=a}},GetCurrentMMapping:function(){if(true){return this._cur_map}return -1},GetMaxMMappingsLoaded:function(){var a=0;if(true&&this._map!=null){for(a=16-1;a>=0&&this._map[a]==null;--a){}++a}return a},CopyMMappingCachedFrames:function(a,k,h,g,f){if(!true){GLLib.Assert(false,"CopyMMappingCachedFrames: You need to enable sprite_useModuleMapping to use this function")}if(!true){GLLib.Assert(false,"CopyMMappingCachedFrames: You need to enable sprite_useCachedFrames to use this function")}if(g<0){GLLib.Assert(false,"CopyMMappingCachedFrames: First frame index is "+g+", it can't be negative!")}if(h<0){GLLib.Assert(false,"CopyMMappingCachedFrames: Palette index is "+h+", it can't be negative!")}if(true&&true){++a;var m=gloft.casttoint(null);var d=m=k+1;if(k<0){d=0;m=this.GetMaxMMappingsLoaded()}var b=this.GetFrameCount();if(f<0||f>=b){f=b-1}if(false||(true&&(this._flags&1)!=0)){GLLib.Dbg("CopyMMappingCachedFrames is not supported yet for ARGB cache. You can request it through the GLLib mailing list.")}else{if(false&&(this._flags&8)!=0){GLLib.Dbg("CopyMMappingCachedFrames is not supported yet for PaletteIndex cache. You can request it through the GLLib mailing list.")}else{if(this._frame_image_imageAAA==null||this._frame_image_imageAAA[h]==null||this._frame_image_imageAAA[h][a]==null){GLLib.Assert(false,"CopyMMappingCachedFrames: there are no cached frames with the palette and mmapping specified")}for(var e=d;e<=m;++e){if(e!=a){if(this._frame_image_imageAAA[h][e]==null){this._frame_image_imageAAA[h][e]=gloft.ArrayCreation([b],null)}for(var c=g;c<=f;++c){var l=this._frame_image_imageAAA[h][a][c];if(l!=null){this._frame_image_imageAAA[h][e][c]=l}}}}}}}},SetFrameMapping:function(f,e,c){if(!false){GLLib.Assert(false,"ASprite.SetFrameMapping: you should enable sprite_useFrameMapping for using this functionality.")}if(e>=this.GetFrameCount()){GLLib.Assert(false,"ASprite.SetFrameMapping: frame0 is out of bounds")}if(c>=this.GetFrameCount()){GLLib.Assert(false,"ASprite.SetFrameMapping: frame1 is out of bounds")}if(false){if(this._frameMapping_index==null){var a=this.GetFrameCount();this._frameMapping_index=gloft.ArrayCreation([a],gloft.casttobyte(null));for(var d=0;d<a;++d){this._frameMapping_index[d]=-1}}for(var b=e;b<=c;++b){this._frameMapping_index[b]=gloft.casttobyte(f)}}},IsFrameMappingEnabled:function(a){if(!false){GLLib.Assert(false,"ASprite.IsFrameMappingEnabled: you should enable sprite_useFrameMapping for using this functionality.")}return false&&this._frameMapping_index!=null&&this.GetFrameMappingConfigId(a)>=0},GetFrameMappingConfigId:function(a){if(!false){GLLib.Assert(false,"ASprite.GetFrameMappingConfigId: you should enable sprite_useFrameMapping for using this functionality.")}if(this._frameMapping_index==null){GLLib.Assert(false,"ASprite.GetFrameMappingConfigId: frame mapping is not enabled for this sprite.")}if(false){return this._frameMapping_index[a]}return -1},IsFrameMappingVisible:function(a){if(!false){GLLib.Assert(false,"ASprite.IsFrameMappingEnabled: you should enable sprite_useFrameMapping for using this functionality.")}return false&&this.GetFrameMappingConfigSprite(a)!=null},GetFrameMappingConfigSprite:function(a){if(!false){GLLib.Assert(false,"ASprite.GetFrameMappingConfigSprite: you should enable sprite_useFrameMapping for using this functionality.")}if(this._frameMapping_config_sprite==null||a>=this._frameMapping_config_sprite.length){GLLib.Assert(false,"ASprite.GetFrameMappingConfigSprite: frame mapping data is not set or it has not the correct size.")}if(false){return this._frameMapping_config_sprite[a]}return null},GetFrameMappingConfigPaletteId:function(a){if(!false){GLLib.Assert(false,"ASprite.GetFrameMappingConfigPaletteId: you should enable sprite_useFrameMapping for using this functionality.")}if(this._frameMapping_config_palId==null||a>=this._frameMapping_config_palId.length){GLLib.Assert(false,"ASprite.GetFrameMappingConfigPaletteId: frame mapping data is not set or it has not the correct size.")}if(false){return this._frameMapping_config_palId[a]&255}return 0},GetFrameMappingConfigFrameOff:function(a){if(!false){GLLib.Assert(false,"ASprite.GetFrameMappingConfigFrameOff: you should enable sprite_useFrameMapping for using this functionality.")}if(this._frameMapping_config_frameOff==null||a>=this._frameMapping_config_frameOff.length){GLLib.Assert(false,"ASprite.GetFrameMappingConfigFrameOff: frame mapping data is not set or it has not the correct size.")}if(false){return this._frameMapping_config_frameOff[a]}return 0},GetAFrameTime:function(b,a){if(false){return this._aframes[(this._anims_af_start[b]+a)*5+1]&255}return this._aframes_time[this._anims_af_start[b]+a]&255},GetAFrameFlags_dup_II:function(b,a){if(false){return this._aframes[(this._anims_af_start[b]+a)*5+4]&15}return this._aframes_flags[this._anims_af_start[b]+a]&15},GetAFrameFlags_dup_III:function(d,c,b){var a=gloft.casttoint(null);if(false){a=(this._aframes[(this._anims_af_start[d]+c)*5+4]&15)}else{a=(this._aframes_flags[this._anims_af_start[d]+c]&15)}if(true){if((b&1)!=0){a=(ASprite.TRANSFORM_FLIP_X[a&7]|(a&-8))}if((b&2)!=0){a=(ASprite.TRANSFORM_FLIP_Y[a&7]|(a&-8))}if((b&4)!=0){a=(ASprite.TRANSFORM_ROT_90[a&7]|(a&-8))}}else{a^=b}return a},GetAFrames:function(a){if(false||(true&&(this._bs_flags&524288)!=0)){return this._anims_naf_short[a]}return this._anims_naf_byte[a]&255},GetFModules:function(a){if(false||(true&&(this._bs_flags&2048)!=0)){return this._frames_nfm_short[a]}return this._frames_nfm_byte[a]&255},GetModuleX:function(a){if(true&&(!true||(this._bs_flags&32)!=0)){return this._modules_x_short[a]&65535}if(false&&(!true||(this._bs_flags&2)!=0)){return this._modules_x_byte[a]&255}return 0},GetModuleY:function(a){if(true&&(!true||(this._bs_flags&32)!=0)){return this._modules_y_short[a]&65535}if(false&&(!true||(this._bs_flags&2)!=0)){return this._modules_y_byte[a]&255}return 0},GetAFramesOX_dup_I:function(a){if(true&&(this._bs_flags&262144)!=0){return this._aframes_ox_short[a]}return this._aframes_ox_byte[a]},GetAFramesOX_dup_II:function(b,a){if(false){return this._aframes[(this._anims_af_start[b]+a)*5+2]}return this.GetAFramesOX_dup_I(this._anims_af_start[b]+a)},GetAFramesOY_dup_I:function(a){if(true&&(this._bs_flags&262144)!=0){return this._aframes_oy_short[a]}return this._aframes_oy_byte[a]},GetAFramesOY_dup_II:function(b,a){if(false){return this._aframes[(this._anims_af_start[b]+a)*5+3]}return this.GetAFramesOY_dup_I(this._anims_af_start[b]+a)},GetFModuleOX:function(a){if(false||(true&&(this._bs_flags&1024)!=0)){return this._fmodules_ox_short[a]}return this._fmodules_ox_byte[a]},GetFModuleOY:function(a){if(false||(true&&(this._bs_flags&1024)!=0)){return this._fmodules_oy_short[a]}return this._fmodules_oy_byte[a]},GetFrameWidth:function(a){if(!true){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,a,0,0,0,false);return ASprite.s_rc[2]-ASprite.s_rc[0]}if((this._bs_flags&1024)==0&&(this._flags&4)==0){return this._frames_rc[(a<<2)+2]&255}return this._frames_rc_short[(a<<2)+2]&65535},GetFrameHeight:function(a){if(!true){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,a,0,0,0,false);return ASprite.s_rc[3]-ASprite.s_rc[1]}if((this._bs_flags&1024)==0&&(this._flags&4)==0){return this._frames_rc[(a<<2)+3]&255}return this._frames_rc_short[(a<<2)+3]&65535},GetFrameMinX:function(a){if(!true){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,a,0,0,0,false);return ASprite.s_rc[0]}if((this._bs_flags&1024)==0&&(this._flags&4)==0){return this._frames_rc[(a<<2)+0]}return this._frames_rc_short[(a<<2)+0]},GetFrameMinY:function(a){if(!true){this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,a,0,0,0,false);return ASprite.s_rc[1]}if((this._bs_flags&1024)==0&&(this._flags&4)==0){return this._frames_rc[(a<<2)+1]}return this._frames_rc_short[(a<<2)+1]},GetFrameModule:function(f,e){var c=gloft.casttoint(null);var b=gloft.casttoint(null);if(false){var d=this._frames_fm_start[f]+e<<2;c=(this._fmodules[d+3]&255);b=(this._fmodules[d]&255)}else{var a=this._frames_fm_start[f]+e;c=(this._fmodules_flags[a]&255);if(false||(true&&(this._bs_flags&1048576)!=0)){b=this._fmodules_id_short[a]}else{b=(this._fmodules_id_byte[a]&255)}}if(true&&!false&&(!true||(this._bs_flags&1048576)==0)){b|=(c&192)<<2}return b},GetFrameModuleFlags_dup_II:function(b,a){if(false){return this._fmodules[(this._frames_fm_start[b]+a<<2)+3]&255}return this._fmodules_flags[this._frames_fm_start[b]+a]&255},GetFrameModuleFlags_dup_III:function(d,c,b){var a=gloft.casttoint(null);if(false){a=(this._fmodules[(this._frames_fm_start[d]+c<<2)+3]&255)}else{a=(this._fmodules_flags[this._frames_fm_start[d]+c]&255)}if(true){if((b&1)!=0){a=(ASprite.TRANSFORM_FLIP_X[a&7]|(a&-8))}if((b&2)!=0){a=(ASprite.TRANSFORM_FLIP_Y[a&7]|(a&-8))}if((b&4)!=0){a=(ASprite.TRANSFORM_ROT_90[a&7]|(a&-8))}}else{a^=b}return a},GetFrameModulePalette:function(d,c){var a=gloft.casttoint(null);if(true&&(!true||(this._bs_flags&16384)!=0)){var b=gloft.casttoint(null);if(false){b=this._frames_fm_start[d]+c<<2}else{b=this._frames_fm_start[d]+c}a=this._fmodules_pal[b]}else{a=this.GetCurrentPalette_dup_()}return a},GetFrameModuleX:function(b,a){if(false){return this._fmodules[(this._frames_fm_start[b]+a<<2)+1]}return this.GetFModuleOX(this._frames_fm_start[b]+a)},GetFrameModuleY:function(b,a){if(false){return this._fmodules[(this._frames_fm_start[b]+a<<2)+2]}return this.GetFModuleOY(this._frames_fm_start[b]+a)},GetAnimFrame:function(e,d){var b=gloft.casttoint(null);if(false){var c=(this._anims_af_start[e]+d)*5;b=(this._aframes[c]&255);if(true){b|=(this._aframes[c+4]&192)<<2}}else{var a=this._anims_af_start[e]+d;if(false||(true&&(this._bs_flags&2097152)!=0)){b=this._aframes_frame_short[a]}else{b=(this._aframes_frame_byte[a]&255)}if(true&&!false&&(!true||(this._bs_flags&2097152)==0)){b|=(this._aframes_flags[a]&192)<<2}}return b},GetAFrameRect_dup_aIIIIII:function(g,f,e,d,c,a){var b=null;ASprite._rectX1=java.lang.Integer.MAX_VALUE;ASprite._rectY1=java.lang.Integer.MAX_VALUE;ASprite._rectX2=java.lang.Integer.MIN_VALUE;ASprite._rectY2=java.lang.Integer.MIN_VALUE;ASprite._operation=1;this.PaintAFrame(b,f,e,d,c,a,0,0);g[ASprite._operation=0]=ASprite._rectX1;g[1]=ASprite._rectY1;g[2]=ASprite._rectX2;g[3]=ASprite._rectY2},GetFrameRect_dup_aIIIIIZ:function(g,f,e,d,c,a){this.GetFrameRect_dup_aIIIIIZZ(g,f,e,d,c,a,true)},GetFrameRect_dup_aIIIIIZZ:function(j,a,i,h,g,l,k){if(true&&!k){var p=this.GetFrameMinX(a);var m=this.GetFrameMinY(a);var o=this.GetFrameWidth(a);var f=this.GetFrameHeight(a);if((g&1)!=0){p=-p-o}if((g&2)!=0){m=-m-f}if((g&4)!=0){var e=p;p=-m-f;m=e;var d=o;o=f;f=d}ASprite._rectX1=i+p;ASprite._rectY1=h+m;ASprite._rectX2=ASprite._rectX1+o;ASprite._rectY2=ASprite._rectY1+f}else{var c=null;ASprite._rectX1=java.lang.Integer.MAX_VALUE;ASprite._rectY1=java.lang.Integer.MAX_VALUE;ASprite._rectX2=java.lang.Integer.MIN_VALUE;ASprite._rectY2=java.lang.Integer.MIN_VALUE;ASprite._operation=1;this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,a,i,h,g,0,0);ASprite._operation=0}if(false&&l){j[0]=ASprite._rectY1;j[1]=GLLib.s_screenHeight-ASprite._rectX2;j[2]=ASprite._rectY2;j[3]=GLLib.s_screenHeight-ASprite._rectX1}else{j[0]=ASprite._rectX1;j[1]=ASprite._rectY1;j[2]=ASprite._rectX2;j[3]=ASprite._rectY2}},GetFModuleRect:function(i,a,h,g,f,e,d,b){var c=null;ASprite._rectX1=java.lang.Integer.MAX_VALUE;ASprite._rectY1=java.lang.Integer.MAX_VALUE;ASprite._rectX2=java.lang.Integer.MIN_VALUE;ASprite._rectY2=java.lang.Integer.MIN_VALUE;ASprite._operation=1;this.PaintFModule(c,a,h,g,f,e,0,0);i[ASprite._operation=0]=ASprite._rectX1;i[1]=ASprite._rectY1;i[2]=ASprite._rectX2;i[3]=ASprite._rectY2},GetModuleRect:function(i,a,h,g,f){i[0]=h;i[1]=g;i[2]=h;i[3]=g;if((f&4)==0){var e=2;i[e]+=(true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255));var d=3;i[d]+=(true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))}else{var c=2;i[c]+=(true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255));var b=3;i[b]+=(true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255))}},GetRect_dup_aIIIII:function(e,d,c,b,a){this.GetFrameRect_dup_aIIIIIZZ(e,d,c,b,a,false,false)},GetRect_dup_aIIIIII:function(i,b,h,f,e,d){if(true){var g=this.GetAFrameFlags_dup_III(b,h,d);var k=this.GetAnimFrame(b,h);var a=this.GetAFramesOX_dup_II(b,h);var j=this.GetAFramesOY_dup_II(b,h);if((d&1)!=0){a=-a}if((d&2)!=0){j=-j}if((d&4)!=0){var c=a;a=-j;j=c}this.GetFrameRect_dup_aIIIIIZZ(i,k,f+a,e+j,g,false,false)}else{this.GetAFrameRect_dup_aIIIIII(i,b,h,f,e,d)}},GetModuleImageIndex:function(a){return(this._module_img==null)?0:this._module_img[a]},GetModuleImage:function(b,a){if(this._module_image_imageAA!=null&&a>=0&&a<this._module_image_imageAA.length&&this._module_image_imageAA[a]!=null&&b>=0&&b<this._module_image_imageAA[a].length){return this._module_image_imageAA[a][b]}if(this._module_image_imageAAA!=null&&a>=0&&a<this._module_image_imageAAA.length&&this._module_image_imageAAA[a]!=null&&b>=0&&b<this._module_image_imageAAA[a].length){return this._module_image_imageAAA[a][b][0]}return null},GetModuleData_dup_II:function(b,a){if(this._modules_image_shortAAA!=null&&this._modules_image_shortAAA[a]!=null){return this._modules_image_shortAAA[a][b]}return null},GetPaletteColor_dup_II:function(b,a){return this.GetPaletteColor_dup_III(0,b,a)},GetPaletteColor_dup_III:function(c,b,a){if(false){return(this.GetPalette_dup_II(0,b))[a]}return(this.GetPalette_dup_II(0,b))[a]},GetPalette_dup_I:function(a){return this.GetPalette_dup_II(0,a)},GetPalette_dup_II:function(b,a){if(a>=0&&a<this._palettes){if(false&&(!true||(this._bs_flags&536870912)!=0)){return this.Palette_GetPaletteFromPNG(a)}if(false){if(this._pal_short!=null&&a<this._pal_short[b].length){return this._pal_short[b][a]}}else{if(this._pal_int!=null&&a<this._pal_int[b].length){return this._pal_int[b][a]}}}return null},GetAnimationCount:function(){if(false||(true&&(this._bs_flags&524288)!=0)){if(this._anims_naf_short==null){return 0}return this._anims_naf_short.length}else{if(this._anims_naf_byte==null){return 0}return this._anims_naf_byte.length}},GetFrameCount:function(){if(false||(true&&(this._bs_flags&2048)!=0)){if(this._frames_nfm_short==null){return 0}return this._frames_nfm_short.length}else{if(this._frames_nfm_byte==null){return 0}return this._frames_nfm_byte.length}},CountFrameModules:function(e){var d=gloft.casttoint(null);for(var b=d=this.GetFModules(e),a=0;a<b;++a){var c=this.GetFrameModule(e,a);if((this.GetFrameModuleFlags_dup_II(e,a)&16)!=0){d=d-1+this.CountFrameModules(c)}}return d},IsModuleDataValid:function(a){if(false){if(this._modules_data_array==null){return false}if(this._modules_data_array[a]==null){return false}}else{if(false){if(this._modules_data_off_short==null){return false}}else{if(this._modules_data_off_int==null){return false}}if(this._modules_data==null){return false}}return true},GetModuleData_dup_I:function(a){if(!false){return this._modules_data}if(this._modules_data_array==null){return null}return this._modules_data_array[a]},GetStartModuleData:function(b,a){if(false){return 0}if(false){if(this._modules_data_off_short!=null){return this._modules_data_off_short[b]&65535}return -1}else{if(this._modules_data_off_int!=null){return this._modules_data_off_int[b]}return -1}},GetLenModuleData:function(b,a){if(false){return this._modules_data_array[b].length}if(false){return(b+1==this._modules_data_off_short.length)?(this._modules_data.length-this._modules_data_off_short[b]&65535):((this._modules_data_off_short[b+1]&65535)-this._modules_data_off_short[b]&65535)}return(b+1==this._modules_data_off_int.length)?(this._modules_data.length-this._modules_data_off_int[b]):(this._modules_data_off_int[b+1]-this._modules_data_off_int[b])},GetNumFrameMarkers:function(h,e){if(true){if(!false){var g=this.GetFModules(h);var c=0;for(var d=0;d<g;++d){var f=this.GetFrameModule(h,d);if((this.GetFrameModuleFlags_dup_II(h,d)&16)==0){var b=f;if(((true&&this._module_types!=null)?this._module_types[b]:0)==5){if(e!=-1){var a=f;if(e!=(true?a:-1)){continue}}++c}}}return c}GLLib.Assert(false,"GetNumFrameMarkers: can't set sprite_disableModuleType_Marker if you want to use this functionality")}return 0},GetFrameMarkers:function(r,h,l,k){if(true&&!false){var m=this.GetNumFrameMarkers(r,k);if(m>0){var j=0;var v=h;var g=(m<<1+(l&1))+((l>1)?1:0);if(v==null||v.length<g){v=gloft.ArrayCreation([g],gloft.casttoint(null))}var f=this.GetFModules(r);if(l>1){l-=2;v[j]=m;++j}for(var t=0;t<f;++t){var a=this.GetFrameModule(r,t);if((this.GetFrameModuleFlags_dup_II(r,t)&16)==0){var e=a;if(((true&&this._module_types!=null)?this._module_types[e]:0)==5){if(k!=-1){var d=a;if(k!=(true?d:-1)){continue}}v[j]=this.GetFrameModuleX(r,t);v[j+1]=this.GetFrameModuleY(r,t);if(l==0){j+=2}else{var u=v;var c=j+2;var b=a;u[c]=(true?b:-1);v[j+3]=t;j+=4}}}}return v}return null}else{if(h==null){return null}var q=0;var s=this.GetFModules(r);var w=h.length;var p=0;for(var o=0;o<s&&q<w;++o){if(k==this.GetFrameModule(r,o)){h[q]=this.GetFrameModuleX(r,o);h[q+1]=this.GetFrameModuleY(r,o);q+=2;++p}}if(p==0){return null}return h}},GetAFrameMarkers:function(t,l,g,j,h){if(t<0){GLLib.Assert(false,"GetAFrameMarkers.anim out of range")}if(t>=this.GetAnimationCount()){GLLib.Assert(false,"GetAFrameMarkers.anim out of range")}if(l<0){GLLib.Assert(false,"GetAFrameMarkers.aframe out of range")}if(l>=this.GetAFrames(t)){GLLib.Assert(false,"GetAFrameMarkers.aframe out of range")}var k=this.GetAnimFrame(t,l);var r=this.GetFrameMarkers(k,g,j,h);if(r!=null){var f=(j==2||j==3)?r[0]:this.GetNumFrameMarkers(k,h);var c=this.GetAFrameFlags_dup_II(t,l);var m=this.GetAFramesOX_dup_II(t,l);var y=this.GetAFramesOY_dup_II(t,l);if((c&4)!=0){GLLib.Assert(false,"GetAFrameMarkers.function does not support rotation in aframe, please request this be added!")}var e=(j==2||j==3)?1:0;var d=(j==0||j==2)?2:4;for(var u=0;u<f;++u){var B=r;var b=e+0;B[b]+=m;var A=r;var a=e+1;A[a]+=y;if((c&1)!=0){var z=r;var s=e+0;z[s]*=-1;var x=r;var q=e+0;x[q]+=m<<1}if((c&2)!=0){var w=r;var p=e+1;w[p]*=-1;var v=r;var o=e+1;v[o]+=y<<1}e+=d}}return r},GetFrameRectCount:function(a){if(true&&this._frames_rects_start!=null){return this._frames_rects_start[a+1]-this._frames_rects_start[a]}return 0},GetFrameRect_dup_IIaII:function(g,e,f,d){if(true&&this._frames_rects_start!=null&&f!=null){var c=this._frames_rects_start[g];var b=gloft.casttoshort((this._frames_rects_start[g+1]-c));if(b>0&&e<b){var a=c+e<<2;if((false||true)&&(this._bs_flags&1024)!=0){if(this._frames_rects_short!=null){f[0]=this._frames_rects_short[a+0];f[1]=this._frames_rects_short[a+1];f[2]=(this._frames_rects_short[a+2]&65535);f[3]=(this._frames_rects_short[a+3]&65535)}}else{if(this._frames_rects!=null){f[0]=this._frames_rects[a+0];f[1]=this._frames_rects[a+1];f[2]=(this._frames_rects[a+2]&255);f[3]=(this._frames_rects[a+3]&255)}}if((d&1)!=0){f[0]=-f[0]-f[2]}if((d&2)!=0){f[1]=-f[1]-f[3]}}else{f[1]=(f[0]=0);f[3]=(f[2]=0)}}},GetAFrameRect_dup_IIIaIIZ:function(a,j,i,k,h,o){if(true){if(false){var g=(this._anims_af_start[a]+j)*5;var f=this._aframes[g]&255;if(true){f|=(this._aframes[g+4]&192)<<2}this.GetFrameRect_dup_IIaII(f,i,k,h^(this._aframes[g+4]&15));if(o){var e=0;k[e]+=this._aframes[g+2];var d=1;k[d]+=this._aframes[g+3]}}else{var c=this._anims_af_start[a]+j;var p=gloft.casttoint(null);if(false||(true&&(this._bs_flags&2097152)!=0)){p=this._aframes_frame_short[c]}else{p=(this._aframes_frame_byte[c]&255)}if(true&&!false&&(!true||(this._bs_flags&2097152)==0)){p|=(this._aframes_flags[c]&192)<<2}this.GetFrameRect_dup_IIaII(p,i,k,h^(this._aframes_flags[c]&15));if(o){var m=0;k[m]+=this.GetAFramesOX_dup_I(c);var l=1;k[l]+=this.GetAFramesOY_dup_I(c)}}}},GetModuleColor:function(a){if(true){if(((true&&this._module_types!=null)?this._module_types[a]:0)!=0){if(false){if(this._module_colors_byte!=null){return this._module_colors_byte[a]}}else{if(this._module_colors_int!=null){return this._module_colors_int[a]}}}}else{GLLib.Dbg("GetModuleColor: sprite_useMultipleModuleTypes is FALSE so no modules can have color!")}return 0},DoesPaletteHaveARGBCache:function(a){return a>=0&&(false||true)&&this._module_image_intAAA!=null&&a<this._module_image_intAAA.length&&this._module_image_intAAA[a]!=null},DoesPaletteHaveImageCache:function(a){if(a<0){return false}if(false){return this._module_image_imageAAA!=null&&a<this._module_image_imageAAA.length&&this._module_image_imageAAA[a]!=null}return this._module_image_imageAA!=null&&a<this._module_image_imageAA.length&&this._module_image_imageAA[a]!=null},SetUseCacheRGB:function(a){if(true){if(a){this._flags|=1}else{this._flags&=-2}}else{GLLib.Dbg("SetUseCacheRGB: You need to enable sprite_useManualCacheRGBArrays to use this functionality!")}},SetUsePaletteIndexCache:function(a){if(false){if(a){this._flags|=8}else{this._flags&=-9}}else{GLLib.Dbg("SetUsePaletteIndexCache: You need to enable sprite_usePaletteIndexCache to use this functionality!")}},SetUseModuleMasking:function(a){if(false){if(a){this._flags|=2}else{this._flags&=-3}}else{GLLib.Dbg("SetUseModuleMasking: You need to enable sprite_allowModuleMarkerMasking to use this functionality!")}},SetUseMakerCallback:function(a){if(false){if(a){this._flags|=32}else{this._flags&=-33}}else{GLLib.Dbg("SetUseMakerCallback: You need to enable sprite_allowModuleMarkerCallback to use this functionality!")}},SetForceShortFrameRC:function(a){if(true){if(a){this._flags|=4}else{this._flags&=-5}}else{GLLib.Dbg("SetForceShortFrameRC: You need to enable sprite_usePrecomputedFrameRect to use this functionality!")}},SetForceCurrentPalette:function(a){if(true){if(a){this._flags|=16}else{this._flags&=-17}}else{GLLib.Dbg("SetForceCurrentPalette: You need to enable sprite_useFMPalette to use this functionality!")}},SetPalette_dup_IaI:function(b,a){this.SetPalette_dup_IIaI(0,b,a)},SetPalette_dup_IIaI:function(c,a,b){if(false&&(!true||(this._bs_flags&536870912)!=0)){if(a>=this._palettes){GLLib.Assert(false,"SetPalette: new palette slot has not been allocated yet. Use AllocateExtraPalette")}this.Palette_AddPaletteToPNG_dup_IaI(a,b)}else{if(this._pal_int==null){GLLib.Assert(false,"SetPalette: Palette Array has not been initialized!")}if(a<0){GLLib.Assert(false,"SetPalette: Palette Index to set is invalid: "+a)}if(a>=this._pal_int[c].length){GLLib.Assert(false,"SetPalette: Palette Index to set is invalid: "+a)}this._pal_int[c][a]=b}},SetPalette_dup_IaS:function(b,a){this.SetPalette_dup_IIaS(0,b,a)},SetPalette_dup_IIaS:function(c,a,b){if(false&&(!true||(this._bs_flags&536870912)!=0)){if(a>=this._palettes){GLLib.Assert(false,"SetPalette: new palette slot has not been allocated yet. Use AllocateExtraPalette")}this.Palette_AddPaletteToPNG_dup_IaS(a,b)}else{if(this._pal_short==null){GLLib.Assert(false,"SetPalette: Palette Array has not been initialized!")}if(a<0){GLLib.Assert(false,"SetPalette: Palette Index to set is invalid: "+a)}if(a>=this._pal_short.length){GLLib.Assert(false,"SetPalette: Palette Index to set is invalid: "+a)}this._pal_short[c][a]=b}},SetModuleX:function(b,a){if(true&&(!true||(this._bs_flags&32)!=0)){this._modules_x_short[b]=gloft.casttoshort(a)}else{if(false&&(!true||(this._bs_flags&2)!=0)){this._modules_x_byte[b]=gloft.casttobyte(a)}}},SetModuleY:function(b,a){if(true&&(!true||(this._bs_flags&32)!=0)){this._modules_y_short[b]=gloft.casttoshort(a)}else{if(false&&(!true||(this._bs_flags&2)!=0)){this._modules_y_byte[b]=gloft.casttobyte(a)}}},SetFrameModule:function(g,e,d){if(false){var c=this._frames_fm_start[g]+e<<2;var b=this._fmodules[c+3]&255;this._fmodules[c]=gloft.casttobyte(d)}else{var a=this._frames_fm_start[g]+e;var f=this._fmodules_flags[a]&255;if(false||(true&&(this._bs_flags&1048576)!=0)){this._fmodules_id_short[a]=gloft.casttoshort(d)}else{this._fmodules_id_byte[a]=gloft.casttobyte(d)}}},SetAFramesOX:function(d,c,b){if(false){this._aframes[(this._anims_af_start[d]+c)*5+2]=gloft.casttobyte(b)}else{var a=this._anims_af_start[d]+c;if(true&&(this._bs_flags&262144)!=0){this._aframes_ox_short[a]=gloft.casttoshort(b)}else{this._aframes_ox_byte[a]=gloft.casttobyte(b)}}},SetAFramesOY:function(d,c,b){if(false){this._aframes[(this._anims_af_start[d]+c)*5+3]=gloft.casttobyte(b)}else{var a=this._anims_af_start[d]+c;if(true&&(this._bs_flags&262144)!=0){this._aframes_oy_short[a]=gloft.casttoshort(b)}else{this._aframes_oy_byte[a]=gloft.casttobyte(b)}}},SetFModuleOX:function(b,a){if(false||(true&&(this._bs_flags&1024)!=0)){this._fmodules_ox_short[b]=gloft.casttoshort(a)}else{this._fmodules_ox_byte[b]=gloft.casttobyte(a)}},SetFModuleOY:function(b,a){if(false||(true&&(this._bs_flags&1024)!=0)){this._fmodules_oy_short[b]=gloft.casttoshort(a)}else{this._fmodules_oy_byte[b]=gloft.casttobyte(a)}},SetPaletteColor_dup_III:function(c,b,a){this.SetPaletteColor_dup_IIII(0,c,b,a)},SetPaletteColor_dup_IIII:function(d,c,b,a){this.Palette_SetColor(d,c,b,a)},PaintAFrame:function(c,u,l,k,i,g,e,d){if(true){var b=this._anims_af_start[u]+l;var a=gloft.casttoint(null);if(false||(true&&(this._bs_flags&2097152)!=0)){a=this._aframes_frame_short[b]}else{if(false){a=(this._aframes[b*5]&255);if(true){a|=(this._aframes[b*5+4]&192)<<2}}else{a=(this._aframes_frame_byte[b]&255)}}if(true&&!false&&(!true||(this._bs_flags&2097152)==0)){a|=(this._aframes_flags[b]&192)<<2}var t=gloft.casttoint(null);var s=gloft.casttoint(null);var r=gloft.casttoint(null);if(false){t=this.GetAFramesOX_dup_II(u,l);s=this.GetAFramesOY_dup_II(u,l);r=(this._aframes[b*5+4]&255)}else{t=this.GetAFramesOX_dup_I(b);s=this.GetAFramesOY_dup_I(b);r=(this._aframes_flags[b]&15)}if((g&1)!=0){r=(ASprite.TRANSFORM_FLIP_X[r&7]|(r&-8));t=-t}if((g&2)!=0){r=(ASprite.TRANSFORM_FLIP_Y[r&7]|(r&-8));s=-s}if((g&4)!=0){r=(ASprite.TRANSFORM_ROT_90[r&7]|(r&-8));var q=t;t=-s;s=q}if(true&&(GLLib.s_PFX_type&1<<13)!=0){var p=GLLib.s_PFX_params[13][1];var o=(p!=100)?p:GLLib.s_PFX_params[13][3];var m=GLLib.s_PFX_params[13][1];var j=(m!=100)?m:GLLib.s_PFX_params[13][4];t=gloft.casttoint(o*t/100);s=gloft.casttoint(j*s/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var h=GLLib.s_PFX_params[17][1];var f=(h!=100)?h:GLLib.s_PFX_params[17][3];var A=GLLib.s_PFX_params[17][1];var z=(A!=100)?A:GLLib.s_PFX_params[17][4];t=gloft.casttoint(f*t/100);s=gloft.casttoint(z*s/100)}}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,a,k+t,i+s,r,e,d)}else{if(false){var y=(this._anims_af_start[u]+l)*5;var x=this._aframes[y]&255;if(true){x|=(this._aframes[y+4]&192)<<2}if(!false&&true){if((g&1)!=0){e+=this._aframes[y+2]}else{e-=this._aframes[y+2]}if((g&2)!=0){d+=this._aframes[y+3]}else{d-=this._aframes[y+3]}}else{e-=this._aframes[y+2];d-=this._aframes[y+3]}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,x,k-e,i-d,g^(this._aframes[y+4]&15),e,d)}else{var w=this._anims_af_start[u]+l;var v=gloft.casttoint(null);if(false||(true&&(this._bs_flags&2097152)!=0)){v=this._aframes_frame_short[w]}else{v=(this._aframes_frame_byte[w]&255)}if(true&&!false&&(!true||(this._bs_flags&2097152)==0)){v|=(this._aframes_flags[w]&192)<<2}if(!false&&true){if((g&1)!=0){e+=this.GetAFramesOX_dup_I(w)}else{e-=this.GetAFramesOX_dup_I(w)}if((g&2)!=0){d+=this.GetAFramesOY_dup_I(w)}else{d-=this.GetAFramesOY_dup_I(w)}}else{e-=this.GetAFramesOX_dup_I(w);d-=this.GetAFramesOY_dup_I(w)}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,v,k-e,i-d,g^(this._aframes_flags[w]&15),e,d)}}},PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIIII:function(d,h,f,e,c,b,a,g){if(true){if((this._bs_flags&1024)==0&&(this._flags&4)==0){ASprite.s_rc[0]=this._frames_rc[h<<2];ASprite.s_rc[1]=this._frames_rc[(h<<2)+1];ASprite.s_rc[2]=(this._frames_rc[(h<<2)+2]&255)+ASprite.s_rc[0];ASprite.s_rc[3]=(this._frames_rc[(h<<2)+3]&255)+ASprite.s_rc[1]}else{ASprite.s_rc[0]=this._frames_rc_short[h<<2];ASprite.s_rc[1]=this._frames_rc_short[(h<<2)+1];ASprite.s_rc[2]=(this._frames_rc_short[(h<<2)+2]&65535)+ASprite.s_rc[0];ASprite.s_rc[3]=(this._frames_rc_short[(h<<2)+3]&65535)+ASprite.s_rc[1]}}else{if(false){if((this._bs_flags&1024)==0){ASprite.s_rc[0]=this._frames_col[h<<2];ASprite.s_rc[1]=this._frames_col[(h<<2)+1];ASprite.s_rc[2]=(this._frames_col[(h<<2)+2]&255)+ASprite.s_rc[0];ASprite.s_rc[3]=(this._frames_col[(h<<2)+3]&255)+ASprite.s_rc[1]}else{ASprite.s_rc[0]=this._frames_col_short[h<<2];ASprite.s_rc[1]=this._frames_col_short[(h<<2)+1];ASprite.s_rc[2]=(this._frames_col_short[(h<<2)+2]&65535)+ASprite.s_rc[0];ASprite.s_rc[3]=(this._frames_col_short[(h<<2)+3]&65535)+ASprite.s_rc[1]}}else{if(!false){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,h,f,e,c,b,a);return}this.GetFrameRect_dup_aIIIIIZ(ASprite.s_rc,h,0,0,0,false)}}if((g&4)!=0){f-=ASprite.s_rc[0]}else{if((g&1)!=0){f-=ASprite.s_rc[0]+(ASprite.s_rc[2]-ASprite.s_rc[0]>>1)}else{if((g&8)!=0){f-=ASprite.s_rc[2]}}}if((g&16)!=0){e-=ASprite.s_rc[1]}else{if((g&2)!=0){e-=ASprite.s_rc[1]+(ASprite.s_rc[3]-ASprite.s_rc[1]>>1)}else{if((g&32)!=0){e-=ASprite.s_rc[3]}}}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,h,f,e,c,b,a)},PaintFrameOnRect:function(d,h,f,e,c,b,a){var g=ASprite.s_rc;this.GetFrameRect_dup_IIaII(h,b,g,0);if(g[2]-g[0]!=0&&g[3]-g[1]!=0){if((a&4)!=0){f-=g[0]}else{if((a&1)!=0){f-=g[0]+(g[2]-g[0]>>1)}else{if((a&8)!=0){f-=g[2]}}}if((a&16)!=0){e-=g[1]}else{if((a&2)!=0){e-=g[1]+(g[3]-g[1]>>1)}else{if((a&32)!=0){e-=g[3]}}}}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,h,f,e,c,0,0)},PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII:function(c,a,i,h,g,e,d){if(false&&this.IsFrameMappingEnabled(a)){var k=this.GetFrameMappingConfigId(a);if(this.IsFrameMappingVisible(k)){var b=this.GetFrameMappingConfigSprite(k);var f=this.GetFrameMappingConfigPaletteId(k);var j=this.GetFrameMappingConfigFrameOff(k);b.SetCurrentPalette_dup_I(f);b.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,a+j,i,h,g,e,d)}}else{if(false&&ASprite._renderToTilesetBackBufferEnabled!=0&&ASprite._operation==0){GLLibPlayer.Tileset_PaintSpriteFrame_dup_IASpriteIIIIIIZ(ASprite._renderToTilesetBackBufferEnabled&65535,this,a,i,h,g,e,d,(ASprite._renderToTilesetBackBufferEnabled&1048576)!=0)}else{this.PaintFrameExec(c,a,i,h,g,e,d)}}},PaintFrameExec:function(d,p,l,k,h,g,f){if(false&&ASprite._operation==0){var e=l+this.GetFrameMinX(p);var c=k+this.GetFrameMinY(p);var t=GLLib.GetClipX(d,true);var s=GLLib.GetClipY(d,true);if(!GLLib.Math_RectIntersect_dup_IIIIIIII(e,c,e+this.GetFrameWidth(p)-1,c+this.GetFrameHeight(p)-1,t,s,t+GLLib.GetClipWidth(d,true)-1,s+GLLib.GetClipHeight(d,true)-1)){return}}var b=-1;if(true&&ASprite._operation==0&&this.IsFrameCached(p,this._crt_pal)){if(false&&(this._flags&2)!=0){GLLib.Dbg("PaintFrame: Frame is cached but because module masking is enabled it is not being used!");b=this.GetFModules(p)}else{if(!this.PaintCachedFrame(d,p,l,k,h)){b=this.GetFModules(p)}}}else{b=this.GetFModules(p)}if(b>0){if(false&&(ASprite.s_moduleBufferState&java.lang.Integer.MIN_VALUE)==0){ASprite.s_moduleBufferState=268435455}if(false&&(this._flags&2)!=0){var o=0;for(var r=0;r<b;++r){var a=gloft.casttoint(null);var m=a=this.GetFrameModule(p,r);if(((true&&this._module_types!=null)?this._module_types[a]:0)==5&&m<32){o=1<<m;if(false&&(this._flags&32)!=0){ASprite.m_bMarkerCallbackEnabled=true;ASprite.m_bMarkerCallbackID=m;ASprite.m_bMarkerCallbackVisible=((o&ASprite.s_moduleMask)!=0);this.PaintFModule(d,p,r,l,k,h,g,f)}}else{if((o&ASprite.s_moduleMask)!=0){this.PaintFModule(d,p,r,l,k,h,g,f)}}}}else{for(var q=0;q<b;++q){if(false&&(this._flags&32)!=0){var u=this.GetFrameModule(p,q);if(((true&&this._module_types!=null)?this._module_types[u]:0)==5){ASprite.m_bMarkerCallbackEnabled=true;ASprite.m_bMarkerCallbackID=u;ASprite.m_bMarkerCallbackVisible=true}this.PaintFModule(d,p,q,l,k,h,g,f)}else{this.PaintFModule(d,p,q,l,k,h,g,f)}}}if(false&&(this._flags&32)!=0&&ASprite.m_bMarkerCallbackLastID>=0){GLLib.ModuleMarkerCallback_End(this,p,ASprite.m_bMarkerCallbackLastID,ASprite.m_bMarkerCallbackLastPosX,ASprite.m_bMarkerCallbackLastPosY,ASprite.m_bMarkerCallbackLastVisible);ASprite.m_bMarkerCallbackLastID=-1}if(false&&(ASprite.s_moduleBufferState&java.lang.Integer.MIN_VALUE)==0){ASprite.s_moduleBufferState=268435455}}},PaintFModule:function(M,W,K,v,t,J,I,H){var G=gloft.casttoint(null);var F=gloft.casttoint(null);var E=gloft.casttoint(null);if(false){G=this._frames_fm_start[W]+K<<2;F=(this._fmodules[G+3]&255);E=(this._fmodules[G]&255)}else{G=this._frames_fm_start[W]+K;F=(this._fmodules_flags[G]&255);if(false||(true&&(this._bs_flags&1048576)!=0)){E=this._fmodules_id_short[G]}else{E=(this._fmodules_id_byte[G]&255)}}if(true&&!false&&(!true||(this._bs_flags&1048576)==0)){E|=(F&192)<<2}if(true&&(!true||(this._bs_flags&16384)!=0)&&(this._flags&16)==0){this._crt_pal=(this._fmodules_pal[G]&255)}var x=0;if(false&&false){x=this.EnableFMBlendMode(G)}var D=E;if(true&&(!true||(F&16)==0)&&this._cur_map>=0){E=this._map[this._cur_map][E]}var V=0;var U=0;if(!true||(F&16)==0){var T=E;V=(true?(this._modules_w_short[T]&65535):(this._modules_w_byte[T]&255));var S=E;U=(true?(this._modules_h_short[S]&65535):(this._modules_h_byte[S]&255))}var R=V;var Q=U;var P=gloft.casttoint(null);var O=gloft.casttoint(null);if(true){if(false){P=this._fmodules[G+1];O=this._fmodules[G+2]}else{P=this.GetFModuleOX(G);O=this.GetFModuleOY(G)}if((F&4)!=0){var N=V;V=U;U=N}if((J&1)!=0){F=(ASprite.TRANSFORM_FLIP_X[F&7]|(F&-8));P=-P-V}if((J&2)!=0){F=(ASprite.TRANSFORM_FLIP_Y[F&7]|(F&-8));O=-O-U}if((J&4)!=0){F=(ASprite.TRANSFORM_ROT_90[F&7]|(F&-8));var Y=gloft.casttobyte(P);P=-O-U;O=Y}}else{if((F&4)!=0&&(J&3)!=0){GLLib.Dbg("Warning: Applying FLIP to frame that contains a ROTATED module! This will not work correctly, please enable sprite_useTransMappings to have this work properly!")}F^=J;if((F&4)!=0){var C=gloft.casttobyte(V);V=U;U=C}if(false){if(!false&&true&&(J&4)!=0){if(!false&&true){if((J&1)!=0){O=-(this._fmodules[G+1]+U)}else{O=this._fmodules[G+1]}if((J&2)!=0){P=this._fmodules[G+2]+V}else{P=-(this._fmodules[G+2]+V)}}else{O=this._fmodules[G+1];P=-(this._fmodules[G+2]+V)}}else{if(!false&&true){if((J&1)!=0){P=-(this._fmodules[G+1]+V)}else{P=this._fmodules[G+1]}if((J&2)!=0){O=-(this._fmodules[G+2]+U)}else{O=this._fmodules[G+2]}}else{P=this._fmodules[G+1];O=this._fmodules[G+2]}}}else{if(!false&&true&&(J&4)!=0){if(!false&&true){if((J&1)!=0){O=-(this.GetFModuleOX(G)+U)}else{O=this.GetFModuleOX(G)}if((J&2)!=0){P=this.GetFModuleOY(G)+V}else{P=-(this.GetFModuleOY(G)+V)}}else{O=this.GetFModuleOX(G);P=-(this.GetFModuleOY(G)+V)}}else{if(!false&&true){if((J&1)!=0){P=-(this.GetFModuleOX(G)+V)}else{P=this.GetFModuleOX(G)}if((J&2)!=0){O=-(this.GetFModuleOY(G)+U)}else{O=this.GetFModuleOY(G)}}else{P=this.GetFModuleOX(G);O=this.GetFModuleOY(G)}}}}if(true&&(GLLib.s_PFX_type&1<<13)!=0&&(!false||ASprite._operation!=1)){var L=GLLib.s_PFX_params[13][1];var w=(L!=100)?L:GLLib.s_PFX_params[13][3];var u=GLLib.s_PFX_params[13][1];var s=(u!=100)?u:GLLib.s_PFX_params[13][4];P=gloft.casttoint(w*P/100);O=gloft.casttoint(s*O/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0&&(!false||ASprite._operation!=1)){var q=GLLib.s_PFX_params[17][1];var p=(q!=100)?q:GLLib.s_PFX_params[17][3];var o=GLLib.s_PFX_params[17][1];var m=(o!=100)?o:GLLib.s_PFX_params[17][4];P=gloft.casttoint(p*P/100);O=gloft.casttoint(m*O/100)}}if(false&&(GLLib.s_PFX_type&1<<16)!=0&&(!false||ASprite._operation!=1)){var l=GLLib.s_PFX_params[16][0];var B=gloft.casttobyte(V);var A=gloft.casttobyte(U);var r=ASprite.s_rc;var z=A;var y=B;var k=l;if(GLLib.s_math_cosTable==null){GLLib.Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}GLLib.PFX_Rotate_GetRotatedRectSize(GLLib.Math_Cos(GLLib.Math_Angle90-k),GLLib.Math_Cos(k),y,z,r);var j=ASprite.s_rc[0];var i=ASprite.s_rc[1];var h=l;var g=P+(V>>1);var f=O+(U>>1);var X=ASprite.s_rc;var e=f;var d=g;var c=h;if(GLLib.s_math_cosTable==null){GLLib.Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}GLLib.PFX_Rotate_GetRotatedPoint(GLLib.Math_Cos(GLLib.Math_Angle90-c),GLLib.Math_Cos(c),d,e,X);P=ASprite.s_rc[0]-(j>>1);O=ASprite.s_rc[1]-(i>>1)}v+=P;t+=O;if(false&&(this._flags&32)!=0&&ASprite.m_bMarkerCallbackEnabled){ASprite.m_bMarkerCallbackEnabled=false;if(ASprite.m_bMarkerCallbackLastID>=0){GLLib.ModuleMarkerCallback_End(this,W,ASprite.m_bMarkerCallbackLastID,ASprite.m_bMarkerCallbackLastPosX,ASprite.m_bMarkerCallbackLastPosY,ASprite.m_bMarkerCallbackLastVisible)}GLLib.ModuleMarkerCallback_Start(this,W,ASprite.m_bMarkerCallbackID,F&15,v,t,ASprite.m_bMarkerCallbackVisible);ASprite.m_bMarkerCallbackLastID=ASprite.m_bMarkerCallbackID;ASprite.m_bMarkerCallbackLastPosX=v;ASprite.m_bMarkerCallbackLastPosY=t;ASprite.m_bMarkerCallbackLastVisible=ASprite.m_bMarkerCallbackVisible}if(true&&(F&16)!=0){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(M,E,v,t,F&15,I,H)}else{this.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIII(M,D,v,t,F&15,R,Q)}if(false&&false){var a=x;if(a!=0){GLLib.PFX_DisableEffect(a,false)}}},RenderTilesetEffect_dup_javaxmicroeditionlcduiGraphicsIjavaxmicroeditionlcduiImageIIIIII:function(c,a,i,h,g,f,e,d,b){if(true){if(i==null){GLLib.Dbg("RenderTilesetEffect: Image is null! Layer effect is applied to must be on the backbuffer!")}var j=ASprite.GetPixelBuffer_int_dup_aI(null);GLLib.GetRGB(i,j,0,e,g,f,e,d);this.RenderTilesetEffect_dup_javaxmicroeditionlcduiGraphicsIaIIIIIII(c,a,j,h,g,f,e,d,b)}},RenderTilesetEffect_dup_javaxmicroeditionlcduiGraphicsIaIIIIIII:function(d,a,j,i,h,g,f,e,c){if(true){if(this._module_image_intAAA==null||this._module_image_intAAA[0]==null){GLLib.Dbg("RenderTilesetEffect: Alpha Module "+a+" does not have an int cache!!")}var k=this._module_image_intAAA[0][a];if(k==null){GLLib.Dbg("RenderTilesetEffect: Alpha Module "+a+" does not have an int cache!!")}var b=0;if(i==2){b|=32}if(i==3){b|=64}if(i==4){b|=128}if(i==5){b|=256}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(d,GLLib.PFX_ProcessPixelEffect_dup_javaxmicroeditionlcduiGraphicsaIaIIIIIIIIIZ(d,k,j,h,g,f,e,c,b,255,0,false),0,f,h,g,f,e,false,false,0)}},PaintAFrameScaled_dup_javaxmicroeditionlcduiGraphicsIIIIII:function(d,g,f,e,c,b,a){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,a);GLLib.PFX_SetParam(13,3,a);GLLib.PFX_SetParam(13,4,a);this.PaintAFrame(d,g,f,e,c,b,0,0);GLLib.PFX_DisableEffect(13,false)}else{GLLib.Dbg("PaintAFrameScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},PaintAFrameScaled_dup_javaxmicroeditionlcduiGraphicsIIIIIII:function(d,h,f,e,c,b,a,g){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,100);GLLib.PFX_SetParam(13,3,a);GLLib.PFX_SetParam(13,1,100);GLLib.PFX_SetParam(13,4,g);this.PaintAFrame(d,h,f,e,c,b,0,0);GLLib.PFX_DisableEffect(13,false)}else{GLLib.Dbg("PaintAFrameScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},PaintFrameRotated:function(c,f,e,d,b,a){if(false){GLLib.PFX_EnableEffect(16,false);GLLib.PFX_SetParam(16,0,a);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,f,e,d,b,0,0);GLLib.PFX_DisableEffect(16,false)}else{GLLib.Dbg("PaintFrameRotated: Functionality is not enabled, you must set pfx_useSpriteEffectRotate to TRUE!")}},PaintFrameScaled_dup_javaxmicroeditionlcduiGraphicsIIIII:function(c,f,e,d,b,a){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,a);GLLib.PFX_SetParam(13,3,a);GLLib.PFX_SetParam(13,4,a);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,f,e,d,b,0,0);GLLib.PFX_DisableEffect(13,false)}else{GLLib.Dbg("PaintFrameScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},PaintFrameScaled_dup_javaxmicroeditionlcduiGraphicsIIIIII:function(d,g,f,e,c,b,a){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,100);GLLib.PFX_SetParam(13,3,b);GLLib.PFX_SetParam(13,1,100);GLLib.PFX_SetParam(13,4,a);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,g,f,e,c,0,0);GLLib.PFX_DisableEffect(13,false)}else{GLLib.Dbg("PaintFrameScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},PaintFramePerspectiveY:function(d,a,i,h,g,f,e,c,b){if(true){GLLib.PFX_EnableEffect(15,false);GLLib.PFX_SetParam(15,0,2);GLLib.PFX_SetParam(15,1,g);GLLib.PFX_SetParam(15,2,f);GLLib.PFX_SetParam(15,4,e);GLLib.PFX_SetParam(15,6,c);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,a,i,h,b,0,0);GLLib.PFX_DisableEffect(15,false)}else{GLLib.Dbg("PaintFramePerspectiveY: Functionality is not enabled, you must set pfx_useSpriteEffectPerspective to TRUE!")}},PaintFramePerspectiveX:function(d,a,i,h,g,f,e,c,b){if(true){GLLib.PFX_EnableEffect(15,false);GLLib.PFX_SetParam(15,0,1);GLLib.PFX_SetParam(15,1,g);GLLib.PFX_SetParam(15,3,f);GLLib.PFX_SetParam(15,4,e);GLLib.PFX_SetParam(15,5,c);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(d,a,i,h,b,0,0);GLLib.PFX_DisableEffect(15,false)}else{GLLib.Dbg("PaintFramePerspectiveY: Functionality is not enabled, you must set pfx_useSpriteEffectPerspective to TRUE!")}},PaintFrameBlended:function(c,f,e,d,b,a){if(true){GLLib.PFX_EnableEffect(12,false);GLLib.PFX_SetParam(12,1,a);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,f,e,d,b,0,0);GLLib.PFX_DisableEffect(12,false)}else{GLLib.Dbg("PaintFrameBlended: Functionality is not enabled, you must set pfx_useSpriteEffectBlend to TRUE!")}},PaintCachedFrame:function(H,U,E,D,C){var W=false;var h=this.GetFrameWidth(U);var A=this.GetFrameHeight(U);var N=this.GetFrameMinX(U);var L=this.GetFrameMinY(U);if((C&4)!=0){var B=N;N=L;L=B}if((C&1)!=0){N=-N-h}if((C&2)!=0){L=-L-A}if((C&4)!=0){var z=N;N=-L-A;L=z}E+=N;D+=L;if(true&&(GLLib.s_PFX_type&1<<13)!=0){var y=GLLib.s_PFX_params[13][1];var x=(y!=100)?y:GLLib.s_PFX_params[13][3];var w=GLLib.s_PFX_params[13][1];var T=(w!=100)?w:GLLib.s_PFX_params[13][4];N-=gloft.casttoint(x*N/100);L-=gloft.casttoint(T*L/100);E-=N;D-=L}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var S=GLLib.s_PFX_params[17][1];var R=(S!=100)?S:GLLib.s_PFX_params[17][3];var Q=GLLib.s_PFX_params[17][1];var P=(Q!=100)?Q:GLLib.s_PFX_params[17][4];N-=gloft.casttoint(R*N/100);L-=gloft.casttoint(P*L/100);E-=N;D-=L}}if(false&&(GLLib.s_PFX_type&1<<16)!=0){var O=GLLib.s_PFX_params[16][0];var M=h;var J=A;var t=ASprite.s_rc;var I=J;var G=M;var v=O;if(GLLib.s_math_cosTable==null){GLLib.Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}GLLib.PFX_Rotate_GetRotatedRectSize(GLLib.Math_Cos(GLLib.Math_Angle90-v),GLLib.Math_Cos(v),G,I,t);var u=ASprite.s_rc[0];var s=ASprite.s_rc[1];var r=O;var q=N+(h>>1);var p=L+(A>>1);var V=ASprite.s_rc;var o=p;var m=q;var l=r;if(GLLib.s_math_cosTable==null){GLLib.Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}GLLib.PFX_Rotate_GetRotatedPoint(GLLib.Math_Cos(GLLib.Math_Angle90-l),GLLib.Math_Cos(l),m,o,V);N-=ASprite.s_rc[0]-(u>>1);L-=ASprite.s_rc[1]-(s>>1);E-=N;D-=L}if(true&&(GLLib.s_PFX_type&1<<15)!=0){E-=N;D-=L}if(!false&&((true&&ASprite._customGraphics!=null)||H!=null)&&!ASprite.CheckVisibility(H,E,D,h,A)){return true}if(false){if((C&1)==0||(C&2)==0){if((C&1)!=0){C&=-2;C|=2}else{if((C&2)!=0){C&=-3;C|=1}}}var k=A;if(true&&(GLLib.s_PFX_type&1<<13)!=0){var g=k;var f=GLLib.s_PFX_params[13][1];k=gloft.casttoint(g*((f!=100)?f:GLLib.s_PFX_params[13][4])/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var e=k;var d=GLLib.s_PFX_params[17][1];k=gloft.casttoint(e*((d!=100)?d:GLLib.s_PFX_params[17][4])/100)}}var c=E;E=ASprite._graphicsHeight-D-k;D=c;var a=h;h=A;A=a}if(false&&(this._flags&8)!=0&&this._frame_image_byteAA!=null&&this._frame_image_byteAA[U]!=null){if(!GLLib.pfx_useSpriteEffects||(GLLib.s_PFX_type&260064)==0||!this.PaintPaletteIndexCachedFramePFX(H,U,E,D,h,A,C)){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(H,this.GetPalIndexCachedFrameRGB(U,this._crt_pal),0,h,E,D,h,A,this._alpha,this._multiAlpha,C,this._palTransparencyIndex,false)}W=true}else{if(true&&(this._flags&1)!=0){var K=this.GetFrameRGB_dup_II(U,this._crt_pal);if(K!=null){if(!GLLib.pfx_useSpriteEffects||(GLLib.s_PFX_type&260064)==0||!this.PaintCachedFramePFX(H,K,null,E,D,h,A,C)){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(H,K,0,h,E,D,h,A,!this._cachedFrameIsOpaque,true,C,this._palTransparencyIndex,false)}W=true}else{var j=this.GetFrameImage(U,this._crt_pal);if(j!=null){if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0&&this.PaintCachedFramePFX(H,null,j,E,D,h,A,C)){W=true}else{if(C==0){H.drawImage(j,E,D,0);W=true}else{if(false){H.drawImage(javax.microedition.lcdui.Image.createImage(j,0,0,h,A,ASprite.midp2_flags[C&7]),E,D,0);W=true}else{H.drawRegion(j,0,0,h,A,ASprite.midp2_flags[C&7],E,D,0);W=true}}}}}}else{var i=this.GetFrameImage(U,this._crt_pal);if(i!=null){if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0&&this.PaintCachedFramePFX(H,null,i,E,D,h,A,C)){W=true}else{if(C==0){H.drawImage(i,E,D,0);W=true}else{if(false){H.drawImage(javax.microedition.lcdui.Image.createImage(i,0,0,h,A,ASprite.midp2_flags[C&7]),E,D,0);W=true}else{H.drawRegion(i,0,0,h,A,ASprite.midp2_flags[C&7],E,D,0);W=true}}}}else{var F=this.GetFrameRGB_dup_II(U,this._crt_pal);if(F!=null){if(!GLLib.pfx_useSpriteEffects||(GLLib.s_PFX_type&260064)==0||!this.PaintCachedFramePFX(H,F,null,E,D,h,A,C)){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(H,F,0,h,E,D,h,A,!this._cachedFrameIsOpaque,true,C)}W=true}}}}return W},PaintPaletteIndexCachedFramePFX:function(d,h,f,e,c,b,a){var g=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaBaIIIIIIZZZ(d,this._frame_image_byteAA[h],this.GetPalette_dup_II(0,this.GetCurrentPalette_dup_I(0)),f,e,c,b,a,this._alpha,this._multiAlpha,true);if(g!=null){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(d,g,0,GLLib.s_PFX_sizeX,f,e,GLLib.s_PFX_sizeX,GLLib.s_PFX_sizeY,GLLib.s_PFX_hasAlpha,true,0,-1,false)}return true},PaintCachedFramePFX:function(b,g,h,a,f,e,d,c){var i=null;if(g!=null&&h==null){i=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaIIIIIIZZZ(b,g,a,f,e,d,c,this._alpha,this._multiAlpha,true)}else{if(h==null||g!=null){return false}i=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsjavaxmicroeditionlcduiImageIIIIIZZ(b,h,a,f,e,d,c,this._alpha,this._multiAlpha)}if(i!=null){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(b,i,0,GLLib.s_PFX_sizeX,a,f,GLLib.s_PFX_sizeX,GLLib.s_PFX_sizeY,GLLib.s_PFX_hasAlpha,true,0,-1,false)}return true},EnableFMBlendMode:function(c){if((this._bs_extraFlags0&16)!=0){var b=this.GetFModuleBlendMode(c);if(b>=0){var a=this._fmodules_blend_opacity[c]&255;if(true&&b==0){GLLib.PFX_EnableEffect(12,false);GLLib.PFX_SetParam(12,1,a);return 12}if(false&&b==24){GLLib.PFX_EnableEffect(5,false);GLLib.PFX_SetParam(5,0,a);return 5}if(false&&b==29){GLLib.PFX_EnableEffect(6,false);GLLib.PFX_SetParam(6,0,a);return 6}if(false&&b==9){GLLib.PFX_EnableEffect(7,false);GLLib.PFX_SetParam(7,0,a);GLLib.PFX_SetParam(7,1,0);return 7}if(false&&b==13){GLLib.PFX_EnableEffect(8,false);GLLib.PFX_SetParam(8,0,a);return 8}}}return 0},GetFModuleBlendMode:function(a){if(this._fmodules_blend_mode[a]!=-1){return this._fmodules_blend_mode[a]&255}return -1},LoadModules_NI:function(b,a){this._nModules=gloft.casttoshort(((a[b++]&255)+((a[b++]&255)<<8)));if(false){GLLib.Dbg("nModules = "+this._nModules)}if(this._nModules>0){if(true&&(!true||(this._bs_flags&32)!=0)){this._modules_x_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null));this._modules_y_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{if(false&&(!true||(this._bs_flags&2)!=0)){this._modules_x_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));this._modules_y_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}}if(true){this._modules_w_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null));this._modules_h_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{this._modules_w_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));this._modules_h_byte=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}if(true){this.InitMultipleModuleTypes(this._nModules)}if(true&&(!true||(this._bs_flags&4)!=0)){java.lang.System.arraycopy(a,b,this._module_types,0,this._nModules);b+=this._nModules}if(true&&(!true||(this._bs_flags&32)!=0)){b=this.readArray2Short(a,b,this._modules_x_short,0,this._nModules,false,false);b=this.readArray2Short(a,b,this._modules_y_short,0,this._nModules,false,false)}else{if(false&&(!true||(this._bs_flags&2)!=0)){java.lang.System.arraycopy(a,b,this._modules_x_byte,0,this._nModules);b+=this._nModules;java.lang.System.arraycopy(a,b,this._modules_y_byte,0,this._nModules);b+=this._nModules}}if(true){if(true&&(this._bs_flags&16)==0){b=this.readArray2Short(a,b,this._modules_w_short,0,this._nModules,true,true);b=this.readArray2Short(a,b,this._modules_h_short,0,this._nModules,true,true)}else{b=this.readArray2Short(a,b,this._modules_w_short,0,this._nModules,false,false);b=this.readArray2Short(a,b,this._modules_h_short,0,this._nModules,false,false)}}else{java.lang.System.arraycopy(a,b,this._modules_w_byte,0,this._nModules);b+=this._nModules;java.lang.System.arraycopy(a,b,this._modules_h_byte,0,this._nModules);b+=this._nModules}}if(false){if(false){GLLib.Dbg("Module usage... offset = "+b+" _nModules = "+this._nModules)}if(!true||(this._bs_flags&64)!=0){java.lang.System.arraycopy(a,b,this._modules_usage=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null)),0,this._nModules);b+=this._nModules}}return b},LoadFModules_NI:function(c,b){var a=gloft.casttoshort(((b[c++]&255)+((b[c++]&255)<<8)));if(false){GLLib.Dbg("nFModules = "+a)}if(a>0){if(false){this._fmodules=gloft.ArrayCreation([a<<2],gloft.casttobyte(null));c=this.readByteArrayNi(b,c,this._fmodules,a,0,4);c=this.readByteArrayNi(b,c,this._fmodules,a,1,4);c=this.readByteArrayNi(b,c,this._fmodules,a,2,4);c=this.readByteArrayNi(b,c,this._fmodules,a,3,4)}else{if(false||(true&&(this._bs_flags&1048576)!=0)){this._fmodules_id_short=gloft.ArrayCreation([a],gloft.casttoshort(null))}else{this._fmodules_id_byte=gloft.ArrayCreation([a],gloft.casttobyte(null))}if(false||(true&&(this._bs_flags&1024)!=0)){this._fmodules_ox_short=gloft.ArrayCreation([a],gloft.casttoshort(null));this._fmodules_oy_short=gloft.ArrayCreation([a],gloft.casttoshort(null))}else{this._fmodules_ox_byte=gloft.ArrayCreation([a],gloft.casttobyte(null));this._fmodules_oy_byte=gloft.ArrayCreation([a],gloft.casttobyte(null))}this._fmodules_flags=gloft.ArrayCreation([a],gloft.casttobyte(null));if((false||true)&&(this._bs_flags&1048576)!=0){c=this.readArray2Short(b,c,this._fmodules_id_short,0,a,false,false)}else{if(false){c=this.readArray2Short(b,c,this._fmodules_id_short,0,a,true,false)}else{java.lang.System.arraycopy(b,c,this._fmodules_id_byte,0,a);c+=a}}if(false||(true&&(this._bs_flags&1024)!=0)){if(!true&&true&&(this._bs_flags&1024)==0){c=this.readArray2Short(b,c,this._fmodules_ox_short,0,a,true,true);c=this.readArray2Short(b,c,this._fmodules_oy_short,0,a,true,true)}else{c=this.readArray2Short(b,c,this._fmodules_ox_short,0,a,false,false);c=this.readArray2Short(b,c,this._fmodules_oy_short,0,a,false,false)}}else{java.lang.System.arraycopy(b,c,this._fmodules_ox_byte,0,a);c+=a;java.lang.System.arraycopy(b,c,this._fmodules_oy_byte,0,a);c+=a}if(true&&(!true||(this._bs_flags&16384)!=0)){java.lang.System.arraycopy(b,c,this._fmodules_pal=gloft.ArrayCreation([a],gloft.casttobyte(null)),0,a);c+=a}java.lang.System.arraycopy(b,c,this._fmodules_flags,0,a);c+=a}}return c},LoadFrames_NI:function(a,j){if(true&&(this._bs_flags&32768)!=0){var i=gloft.casttoshort(((j[a++]&255)+((j[a++]&255)<<8)));if((this._bs_flags&1024)==0){java.lang.System.arraycopy(j,a,this._frames_rects=gloft.ArrayCreation([i<<2],gloft.casttobyte(null)),0,i<<2);a+=i<<2}else{this._frames_rects_short=gloft.ArrayCreation([i<<2],gloft.casttoshort(null));a=this.readArray2Short(j,a,this._frames_rects_short,0,i<<2,false,false)}}var h=gloft.casttoshort(((j[a++]&255)+((j[a++]&255)<<8)));if(false){GLLib.Dbg("nFrames = "+h)}if(h>0){if(false||(true&&(this._bs_flags&2048)!=0)){this._frames_nfm_short=gloft.ArrayCreation([h],gloft.casttoshort(null))}else{this._frames_nfm_byte=gloft.ArrayCreation([h],gloft.casttobyte(null))}this._frames_fm_start=gloft.ArrayCreation([h],gloft.casttoshort(null));var g=0;if((false||true)&&(this._bs_flags&2048)!=0){a=this.readArray2Short(j,a,this._frames_nfm_short,0,h,false,false)}else{if(false){a=this.readArray2Short(j,a,this._frames_nfm_short,0,h,true,true)}else{java.lang.System.arraycopy(j,a,this._frames_nfm_byte,0,h);a+=h}}if(false){for(var f=0;f<h;++f){this._frames_fm_start[f]=g;g+=gloft.casttoshort(this.GetFModules(f))}}else{a=this.readArray2Short(j,a,this._frames_fm_start,0,h,false,false)}if(true&&(this._bs_flags&32768)!=0){this._frames_rects_start=gloft.ArrayCreation([h+1],gloft.casttoshort(null));var e=0;for(var d=0;d<h;++d){this._frames_rects_start[d]=e;e+=j[a++]}this._frames_rects_start[this._frames_rects_start.length-1]=e}if(!false){if(true){var c=h<<2;if((this._bs_flags&1024)==0){this._frames_rc=gloft.ArrayCreation([c],gloft.casttobyte(null));a=this.readByteArrayNi(j,a,this._frames_rc,h,0,4);a=this.readByteArrayNi(j,a,this._frames_rc,h,1,4);a=this.readByteArrayNi(j,a,this._frames_rc,h,2,4);a=this.readByteArrayNi(j,a,this._frames_rc,h,3,4)}}else{if((this._bs_flags&1024)==0){a+=h<<2}else{a+=h<<3}}}else{if(true){}}if(false&&(!true||(this._bs_flags&8192)!=0)){var b=h<<2;if((this._bs_flags&1024)==0){this._frames_col=gloft.ArrayCreation([b],gloft.casttobyte(null));a=this.readByteArrayNi(j,a,this._frames_col,h,0,4);a=this.readByteArrayNi(j,a,this._frames_col,h,1,4);a=this.readByteArrayNi(j,a,this._frames_col,h,2,4);a=this.readByteArrayNi(j,a,this._frames_col,h,3,4)}}}return a},LoadAFrames_NI:function(c,b){var a=gloft.casttoshort(((b[c++]&255)+((b[c++]&255)<<8)));if(false){GLLib.Dbg("nAFrames = "+a)}if(a>0){if(false){this._aframes=gloft.ArrayCreation([a*5],gloft.casttobyte(null));c=this.readByteArrayNi(b,c,this._aframes,a,0,5);c=this.readByteArrayNi(b,c,this._aframes,a,1,5);c=this.readByteArrayNi(b,c,this._aframes,a,2,5);c=this.readByteArrayNi(b,c,this._aframes,a,3,5);c=this.readByteArrayNi(b,c,this._aframes,a,4,5)}else{if(false||(true&&(this._bs_flags&2097152)!=0)){this._aframes_frame_short=gloft.ArrayCreation([a],gloft.casttoshort(null))}else{this._aframes_frame_byte=gloft.ArrayCreation([a],gloft.casttobyte(null))}this._aframes_time=gloft.ArrayCreation([a],gloft.casttobyte(null));if(true&&(this._bs_flags&262144)!=0){this._aframes_ox_short=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aframes_oy_short=gloft.ArrayCreation([a],gloft.casttoshort(null))}else{this._aframes_ox_byte=gloft.ArrayCreation([a],gloft.casttobyte(null));this._aframes_oy_byte=gloft.ArrayCreation([a],gloft.casttobyte(null))}this._aframes_flags=gloft.ArrayCreation([a],gloft.casttobyte(null));if((false||true)&&(this._bs_flags&2097152)!=0){c=this.readArray2Short(b,c,this._aframes_frame_short,0,a,false,false)}else{if(false){c=this.readArray2Short(b,c,this._aframes_frame_short,0,a,true,true)}else{java.lang.System.arraycopy(b,c,this._aframes_frame_byte,0,a);c+=a}}java.lang.System.arraycopy(b,c,this._aframes_time,0,a);c+=a;if(true&&(this._bs_flags&262144)!=0){if(true&&(this._bs_flags&262144)==0){c=this.readArray2Short(b,c,this._aframes_ox_short,0,a,true,false);c=this.readArray2Short(b,c,this._aframes_oy_short,0,a,true,false)}else{c=this.readArray2Short(b,c,this._aframes_ox_short,0,a,false,false);c=this.readArray2Short(b,c,this._aframes_oy_short,0,a,false,false)}}else{java.lang.System.arraycopy(b,c,this._aframes_ox_byte,0,a);c+=a;java.lang.System.arraycopy(b,c,this._aframes_oy_byte,0,a);c+=a}java.lang.System.arraycopy(b,c,this._aframes_flags,0,a);c+=a}}return c},LoadAnims_NI:function(e,d){var c=gloft.casttoshort(((d[e++]&255)+((d[e++]&255)<<8)));if(false){GLLib.Dbg("nAnims = "+c)}if(c>0){if(false||(true&&(this._bs_flags&524288)!=0)){this._anims_naf_short=gloft.ArrayCreation([c],gloft.casttoshort(null))}else{this._anims_naf_byte=gloft.ArrayCreation([c],gloft.casttobyte(null))}this._anims_af_start=gloft.ArrayCreation([c],gloft.casttoshort(null));var b=0;if((false||true)&&(this._bs_flags&524288)!=0){e=this.readArray2Short(d,e,this._anims_naf_short,0,c,false,false)}else{if(false){e=this.readArray2Short(d,e,this._anims_naf_short,0,c,true,true)}else{java.lang.System.arraycopy(d,e,this._anims_naf_byte,0,c);e+=c}}if(false){for(var a=0;a<c;++a){this._anims_af_start[a]=b;b+=gloft.casttoshort(this.GetAFrames(a))}}else{e=this.readArray2Short(d,e,this._anims_af_start,0,c,false,false)}}return e},LoadData_useModuleImages:function(F,ad,aw,av){if(!true||(this._bs_flags&16777216)!=0){if(F>=ad.length){return F}var au=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(false){GLLib.Dbg("_pixel_format = 0x"+java.lang.Integer.toHexString(au))}var at=1;if((this._bs_flags&1073741824)!=0){at=gloft.casttobyte((ad[F++]&255))}if(this._colors==null){this._colors=gloft.ArrayCreation([at],gloft.casttoint(null))}for(var L=0;L<at;++L){var H=ad[F++]&255;if(this._palettes!=H&&L>0){GLLib.Assert(false,"You must use same palettes number for all images in sprite!")}this._palettes=H;if(false){GLLib.Dbg("_palettes = "+this._palettes)}if(this._palettes>100){GLLib.Assert(false,"Sprite is using more palettes than MAX_SPRITE_PALETTES, please increase this value in GLLibConfig!")}var ar=ad[F++]&255;if((true||true||true)&&ar==0){ar=256}this._colors[L]=ar;if(false){GLLib.Dbg("colors = "+ar)}this.InitPalettesArray(at);var X=null;var V=null;for(var K=0;K<this._palettes;++K){if(false&&(aw&1<<K)==0){F+=((au==-30584)?(ar*4):(ar*2))}else{if(false){this._pal_short[L][K]=gloft.ArrayCreation([ar],gloft.casttoshort(null));X=this._pal_short[L][K]}else{this._pal_int[L][K]=gloft.ArrayCreation([ar],gloft.casttoint(null));V=this._pal_int[L][K]}if(true&&au==-30584){for(var J=0;J<ar;++J){if(false){var aq=((ad[F++]&240)>>4)+(ad[F++]&240)+((ad[F++]&240)<<4)+((ad[F++]&240)<<8);if((aq&61440)!=61440){this._alpha=true;if((aq&61440)!=0){this._multiAlpha=true}}X[J]=gloft.casttoshort((aq&65535))}else{var ap=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24);if((ap&-16777216)!=-16777216){this._alpha=true;if((ap&-16777216)!=0){this._multiAlpha=true}}V[J]=ap}}}else{if(false&&au==17476){for(var I=0;I<ar;++I){var an=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if((an&61440)!=61440){this._alpha=true;if((an&61440)!=0){this._multiAlpha=true}}if(false){X[I]=gloft.casttoshort((an&65535))}else{V[I]=((an&61440)<<16|(an&61440)<<12|(an&3840)<<12|(an&3840)<<8|(an&240)<<8|(an&240)<<4|(an&15)<<4|(an&15))}}}else{if(true&&au==21781){for(var D=0;D<ar;++D){var C=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));var B=-16777216;if((C&32768)!=32768){B=0;this._alpha=true}if(false){var A=B|(C&31744)<<9|(C&992)<<6|(C&31)<<3;X[D]=gloft.casttoshort(((A>>24&240)<<8|(A>>16&240)<<4|(A>>8&240)|(A&240)>>4))}else{var z=B|(C&31744)<<9|(C&992)<<6|(C&31)<<3;if(z==16253176){z=16711935}V[D]=z}}}else{if(false&&au==25861){for(var y=0;y<ar;++y){var x=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));var w=-16777216;if((x&65535)==63519){w=0;this._alpha=true}if(false){var v=w|(x&63488)<<8|(x&2016)<<5|(x&31)<<3;X[y]=gloft.casttoshort(((v>>24&240)<<8|(v>>16&240)<<4|(v>>8&240)|(v&240)>>4))}else{var u=w|(x&63488)<<8|(x&2016)<<5|(x&31)<<3;if(u==16253176){u=16711935}V[y]=u}}}else{if(false&&au==12803){for(var t=0;t<ar;++t){var s=ad[F++]&255;var r=-16777216;if(s==192){r=0;this._alpha=true}if(false){var q=r|(s&224)<<16|(s&28)<<11|(s&3)<<6;X[t]=gloft.casttoshort(((q>>24&240)<<8|(q>>16&240)<<4|(q>>8&240)|(q&240)>>4))}else{V[t]=(r|(s&224)<<16|(s&28)<<11|(s&3)<<6)}}}else{if(false&&au==-30712){this._multiAlpha=false;for(var p=0;p<ar;++p){if(false){var o=((ad[F++]&240)>>4)+(ad[F++]&240)+((ad[F++]&240)<<4);if(o==3855){this._alpha=true}else{o|=61440}X[p]=gloft.casttoshort((o&65535))}else{var m=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16);if(m==16711935){this._alpha=true}else{m|=-16777216}V[p]=m}}}else{GLLib.Assert(false,"Sprite Pixel Format Error: Unsupported format! Format ID: 0x"+java.lang.Integer.toHexString(au))}}}}}}if(au==-30584){if(!true){GLLib.Assert(false,"Sprite Pixel Format Error: Using 8888 but it is not enabled! Set sprite_usePixelFormat8888 to TRUE!")}}else{if(au==-30712){if(!false){GLLib.Assert(false,"Sprite Pixel Format Error: Using 0888 but it is not enabled! Set sprite_usePixelFormat0888 to TRUE!")}}else{if(au==17476){if(!false){GLLib.Assert(false,"Sprite Pixel Format Error: Using 4444 but it is not enabled! Set sprite_usePixelFormat4444 to TRUE!")}}else{if(au==21781){if(!true){GLLib.Assert(false,"Sprite Pixel Format Error: Using 1555 but it is not enabled! Set sprite_usePixelFormat1555 to TRUE!")}}else{if(au==25861){if(!false){GLLib.Assert(false,"Sprite Pixel Format Error: Using 0565 but it is not enabled! Set sprite_usePixelFormat0565 to TRUE!")}}else{if(au==12803&&!false){GLLib.Assert(false,"Sprite Pixel Format Error: Using 0332 but it is not enabled! Set sprite_usePixelFormat0332 to TRUE!")}}}}}}}}}this._data_format=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(false){GLLib.Dbg("_data_format = 0x"+java.lang.Integer.toHexString(this._data_format))}if((true&&this._data_format==-22976)||(true&&this._data_format==-24281)||(true&&this._data_format==-23978)||(false&&this._data_format==-24476)||(false&&this._data_format==-24280)||(true&&this._data_format==-23198)||(false&&this._data_format==933)||(false&&this._data_format==1443)){this._alpha=true;this._multiAlpha=true}if((true||true)&&(this._data_format==25840||this._data_format==-22976)){if(this._i64rle_color_mask==null){this._i64rle_color_mask=gloft.ArrayCreation([at],gloft.casttoint(null));this._i64rle_color_bits=gloft.ArrayCreation([at],gloft.casttoint(null))}for(var h=0;h<at;++h){var g=this._colors[h]-1;this._i64rle_color_mask[h]=1;this._i64rle_color_bits[h]=0;while(g!=0){g>>=1;var f=this._i64rle_color_mask;var e=h;f[e]<<=1;var E=this._i64rle_color_bits;var d=h;++E[d]}var G=this._i64rle_color_mask;var c=h;--G[c]}}if(this._nModules>0){if(false){if(!false&&(true||true)){if(!false&&false){GLLib.Dbg("GLLibConfig.sprite_useOperationMark = true must be defined!")}this.MarkTransformedModules(true,av);if(this._module_image_imageAAA==null){this._module_image_imageAAA=gloft.ArrayCreation([this._palettes],null)}}else{if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null)}}for(var a=0;a<this._palettes;++a){if(!false&&(true||true)){if((aw&1<<a)!=0&&this._module_image_imageAAA[a]==null){this._module_image_imageAAA[a]=gloft.ArrayCreation([this._nModules],null);for(var aD=0;aD<this._nModules;++aD){var aC=1;for(var aB=0;aB<3;++aB){if(false&&(this._modules_usage[aD]&1<<aB)!=0){aC=aB+1}}this._module_image_imageAAA[a][aD]=gloft.ArrayCreation([aC],null)}}}else{if((aw&1<<a)!=0&&this._module_image_imageAA[a]==null){this._module_image_imageAA[a]=gloft.ArrayCreation([this._nModules],null)}}}if(false){if(false){GLLib.Dbg("LoadData with sprite_usePrecomputedCRC")}if(false){this._modules_data_array=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}else{if(false){this._modules_data_off_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{this._modules_data_off_int=gloft.ArrayCreation([this._nModules],gloft.casttoint(null))}var aA=0;var az=F;for(var ay=0;ay<this._nModules;++ay){var ax=gloft.casttoint(null);if((this._bs_flags&128)!=0){ax=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}else{ax=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(ax<0){GLLib.Assert(false,"LoadingModules: module "+ay+" size read as short is negative. You need to add BS_IMAGE_SIZE_INT to this sprites export flags")}}if(false){this._modules_data_off_short[ay]=gloft.casttoshort(aA)}else{this._modules_data_off_int[ay]=aA}aA+=ax;F+=ax}F=az;this._modules_data=gloft.ArrayCreation([aA],gloft.casttobyte(null))}for(var ao=0;ao<this._nModules;++ao){var am=gloft.casttoint(null);if((this._bs_flags&128)!=0){am=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}else{am=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(am<0){GLLib.Assert(false,"LoadingModules: module "+ao+" size read as short is negative. You need to add BS_IMAGE_SIZE_INT to this sprites export flags")}}if(false){GLLib.Dbg("module["+ao+"] size = "+am)}if(false){this._modules_data_array[ao]=gloft.ArrayCreation([am],gloft.casttobyte(null))}java.lang.System.arraycopy(ad,F,this.GetModuleData_dup_I(ao),this.GetStartModuleData(ao,0),am);F+=am}if(!true||(this._bs_flags&33554432)!=0){this._PNG_packed_PLTE_CRC=gloft.ArrayCreation([this._palettes],gloft.casttoint(null));this._PNG_packed_tRNS_CRC=gloft.ArrayCreation([this._palettes],gloft.casttoint(null));this._PNG_packed_IHDR_CRC=gloft.ArrayCreation([this._nModules],gloft.casttoint(null));this._PNG_packed_IDAT_ADLER=gloft.ArrayCreation([this._nModules],gloft.casttoint(null));this._PNG_packed_IDAT_CRC=gloft.ArrayCreation([this._nModules],gloft.casttoint(null));for(var al=0;al<this._palettes;++al){this._PNG_packed_PLTE_CRC[al]=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}for(var ak=0;ak<this._palettes;++ak){this._PNG_packed_tRNS_CRC[ak]=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}for(var aj=0;aj<this._nModules;++aj){this._PNG_packed_IHDR_CRC[aj]=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}for(var ai=0;ai<this._nModules;++ai){this._PNG_packed_IDAT_ADLER[ai]=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}for(var ah=0;ah<this._nModules;++ah){this._PNG_packed_IDAT_CRC[ah]=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}}}else{if(false){GLLib.Dbg("LoadData WITHOUT sprite_usePrecomputedCRC")}var ag=F;for(var af=0;af<this._palettes;++af){if((aw&1<<af)!=0){var M=false;F=ag;for(var ae=0;ae<this._nModules;++ae){var ac=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));var ab=F;var aa=ae;var Z=true?(this._modules_w_short[aa]&65535):(this._modules_w_byte[aa]&255);var Y=ae;var W=true?(this._modules_h_short[Y]&65535):(this._modules_h_byte[Y]&255);var T=null;if(!false&&(true||true)){for(var U=0;U<3&&U<this._module_image_imageAAA[af][ae].length;++U){if((!false||(1<<U&this._modules_usage[ae])!=0)&&this._module_image_imageAAA[af][ae][U]==null){if(T==null){T=this.DecodeImage_byte_dup_IaBIII(this.GetModuleImageIndex(ae),ad,F,Z,W)}if(false){Z+=Z%2;W+=W%2}this._module_image_imageAAA[af][ae][U]=this.BuildPNG8_dup_IZaBIII(af,M,T,Z,W,U);M=true}}}else{if(this._module_image_imageAA[af][ae]==null){if(T==null){T=this.DecodeImage_byte_dup_IaBIII(this.GetModuleImageIndex(ae),ad,F,Z,W)}if(false){Z+=Z%2;W+=W%2}this._module_image_imageAA[af][ae]=this.BuildPNG8_dup_IZaBIII(af,M,T,Z,W,0);M=true}}F=ab+ac}}}}}else{if(false){GLLib.Dbg("LoadData: Loading Module Offsets")}if(false){this._modules_data_array=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}else{if(false){this._modules_data_off_short=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}else{this._modules_data_off_int=gloft.ArrayCreation([this._nModules],gloft.casttoint(null))}var S=0;var R=F;for(var Q=0;Q<this._nModules;++Q){var P=gloft.casttoint(null);if((this._bs_flags&128)!=0){P=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}else{P=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(P<0){GLLib.Assert(false,"LoadingModules: module "+Q+" size read as short is negative. You need to add BS_IMAGE_SIZE_INT to this sprites export flags")}}if(false){GLLib.Dbg("    Module["+Q+"] is located at offset "+S+" and has image data size: "+P)}if(false){if(S>65535){GLLib.Assert(false,"Module data offset is larger than a short! This means your sprite image data is larger than 64K and you need to set sprite_useModuleDataOffAsShort to FALSE.")}this._modules_data_off_short[Q]=gloft.casttoshort(S)}else{this._modules_data_off_int[Q]=S}S+=P;F+=P}if(false){GLLib.Dbg("LoadData: Loading Module Data")}F=R;this._modules_data=gloft.ArrayCreation([S],gloft.casttobyte(null))}for(var O=0;O<this._nModules;++O){var N=gloft.casttoint(null);if((this._bs_flags&128)!=0){N=(ad[F++]&255)+((ad[F++]&255)<<8)+((ad[F++]&255)<<16)+((ad[F++]&255)<<24)}else{N=gloft.casttoshort(((ad[F++]&255)+((ad[F++]&255)<<8)));if(N<0){GLLib.Assert(false,"LoadingModules: module "+O+" size read as short is negative. You need to add BS_IMAGE_SIZE_INT to this sprites export flags")}}if(false){GLLib.Dbg("module["+O+"] size = "+N)}if(false){this._modules_data_array[O]=gloft.ArrayCreation([N],gloft.casttobyte(null))}java.lang.System.arraycopy(ad,F,this.GetModuleData_dup_I(O),this.GetStartModuleData(O,0),N);F+=N}}}}return F},LoadData_useSingleImages:function(V,K,J,I){if(!true||(this._bs_flags&536870912)!=0){if((this._bs_flags&1073741824)!=0){this._number_image=K[V++];this._pal_data_array=gloft.ArrayCreation([this._number_image],gloft.casttobyte(null))}else{this._number_image=1}this._colors=gloft.ArrayCreation([this._number_image],gloft.casttoint(null));this._modules_data_array=gloft.ArrayCreation([this._number_image],gloft.casttobyte(null));for(var Z=0;Z<this._number_image;++Z){if((this._bs_flags&1073741824)!=0){var H=gloft.casttoshort(((K[V++]&255)+((K[V++]&255)<<8)));var G=gloft.casttoshort(((K[V++]&255)+((K[V++]&255)<<8)))}var F=gloft.casttoint(null);if((this._bs_flags&128)!=0){F=(K[V++]&255)+((K[V++]&255)<<8)+((K[V++]&255)<<16)+((K[V++]&255)<<24)}else{F=gloft.casttoshort(((K[V++]&255)+((K[V++]&255)<<8)));if(F<0){GLLib.Assert(false,"LoadingSingleImage: size read as short is negative. You need to add BS_IMAGE_SIZE_INT to this sprites export flags")}}if(false){GLLib.Dbg("png size = "+F)}var E=0;if(false){if(false){this._modules_data_array[Z]=K}else{this._modules_data=K}E=V;V+=F}else{if(false){java.lang.System.arraycopy(K,V,this._modules_data_array[Z]=gloft.ArrayCreation([F],gloft.casttobyte(null)),0,F);V+=F}else{if((this._bs_flags&1073741824)!=0){java.lang.System.arraycopy(K,V,this._modules_data_array[Z]=gloft.ArrayCreation([F],gloft.casttobyte(null)),0,F);V+=F}else{java.lang.System.arraycopy(K,V,this._modules_data=gloft.ArrayCreation([F],gloft.casttobyte(null)),0,F);V+=F}}}this._palettes=(K[V++]&255);if(false){GLLib.Dbg("_palettes = "+this._palettes)}if(this._palettes>100){GLLib.Assert(false,"Sprite is using more palettes than MAX_SPRITE_PALETTES, please increase this value in GLLibConfig!")}var D=gloft.casttoint(null);if((this._bs_flags&1073741824)!=0){D=(K[V++]&255);if(D==0){D=256}if(false){GLLib.Dbg("colors = "+D)}var C=D*3+4;var U=D+4;var T=C+U;if(false){GLLib.Dbg("pal_size = "+T)}this._pal_data_array[Z]=gloft.ArrayCreation([this._palettes*T],gloft.casttobyte(null));java.lang.System.arraycopy(this._modules_data_array[Z],41+E,this._pal_data_array[Z],0,C);java.lang.System.arraycopy(this._modules_data_array[Z],41+C+8+E,this._pal_data_array[Z],C,U);java.lang.System.arraycopy(K,V,this._pal_data_array[Z],T,(this._palettes-1)*T);V+=(this._palettes-1)*T}else{D=(K[V++]&255);if(D==0){D=256}if(false){GLLib.Dbg("colors = "+D)}var C=D*3+4;var U=D+4;var S=C+U;if(false){GLLib.Dbg("pal_size = "+S)}this._pal_data=gloft.ArrayCreation([this._palettes*S],gloft.casttobyte(null));if(false){java.lang.System.arraycopy(this._modules_data_array[0],41+E,this._pal_data,0,C);java.lang.System.arraycopy(this._modules_data_array[0],41+C+8+E,this._pal_data,C,U)}else{java.lang.System.arraycopy(this._modules_data,41+E,this._pal_data,0,C);java.lang.System.arraycopy(this._modules_data,41+C+8+E,this._pal_data,C,U)}java.lang.System.arraycopy(K,V,this._pal_data,S,(this._palettes-1)*S);V+=(this._palettes-1)*S;var R=C;for(var Y=0;Y<this._palettes;++Y){for(var X=0;X<D;++X){var Q=this._pal_data[R]&255;if(Q!=255){this._alpha=true;if(Q!=0){this._multiAlpha=true}}++R}R+=4+C}}this._colors[Z]=D;if(false){GLLib.Dbg("...read pal data")}if(false){if(!false&&(true||true)){this._module_image_imageAAA=gloft.ArrayCreation([this._palettes],null)}else{this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null)}for(var W=0;W<this._palettes;++W){if((J&1<<W)!=0){if(false){var C=gloft.casttoint(null);var U=gloft.casttoint(null);java.lang.System.arraycopy(this._pal_data,W*(C+U),this._modules_data_array[0],41+E,C);java.lang.System.arraycopy(this._pal_data,W*(C+U)+C,this._modules_data_array[0],41+C+8+E,U)}else{var C=gloft.casttoint(null);var U=gloft.casttoint(null);java.lang.System.arraycopy(this._pal_data,W*(C+U),this._modules_data,41+E,C);java.lang.System.arraycopy(this._pal_data,W*(C+U)+C,this._modules_data,41+C+8+E,U)}if(!false&&(true||true)){this._module_image_imageAAA[W]=gloft.ArrayCreation([1,1],null);if(false){var c=this._module_image_imageAAA[W][0];var P=0;var y=this._modules_data_array[0];var O=E;var N=F;var M=O;var w=y;c[P]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(w,M,N)):javax.microedition.lcdui.Image.createImage(w,M,N))}else{var v=this._module_image_imageAAA[W][0];var L=0;var f=this._modules_data;var B=E;var A=F;var z=B;var t=f;v[L]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(t,z,A)):javax.microedition.lcdui.Image.createImage(t,z,A))}if(false){++ASprite._images_count;ASprite._images_size+=this._module_image_imageAAA[W][0][0].getWidth()*this._module_image_imageAAA[W][0][0].getHeight()}}else{this._module_image_imageAA[W]=gloft.ArrayCreation([1],null);if(false){var r=this._module_image_imageAA[W];var x=0;var p=this._modules_data_array[0];var u=E;var s=F;var q=u;var m=p;r[x]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(m,q,s)):javax.microedition.lcdui.Image.createImage(m,q,s))}else{var h=this._module_image_imageAA[W];var o=0;var e=this._modules_data;var l=E;var g=F;var a=l;var d=e;h[o]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(d,a,g)):javax.microedition.lcdui.Image.createImage(d,a,g))}if(false){++ASprite._images_count;ASprite._images_size+=this._module_image_imageAA[W][0].getWidth()*this._module_image_imageAA[W][0].getHeight()}}}}this._pal_data=null;if(false){this._modules_data_array[0]=null;this._modules_data_array=null}else{this._modules_data=null}}}}return V},LoadData_useRAW:function(r,f){if((this._bs_flags&536870912)!=0){GLLib.Assert(false,"LoadData_useRAW: loading RAW Image data for sprite, SINGLE IMAGE not supported currently!")}var m=gloft.casttoshort(((f[r++]&255)+((f[r++]&255)<<8)));var h=gloft.casttoshort(((f[r++]&255)+((f[r++]&255)<<8)));if(false){GLLib.Dbg("LoadData_useRaw: Loading RAW Module Images")}if((this._bs_flags&1073741824)!=0){this._palettes=f[r++];if(false){GLLib.Dbg("LoadData_useRaw: Loading RAW Module Images with "+this._palettes+" images (aka palettes)")}}else{this._palettes=1}if(this._module_image_intAAA==null){this._module_image_intAAA=gloft.ArrayCreation([this._palettes],gloft.casttoint(null))}if(m==-30584){this._alpha=true;this._multiAlpha=true;if(false){GLLib.Dbg("LoadData_useRaw: Pixel Format is 8888")}}else{if(m==-30712){this._alpha=false;this._multiAlpha=false;if(false){GLLib.Dbg("LoadData_useRaw: Pixel Format is 0888")}}else{if(m==17476){this._alpha=false;this._multiAlpha=false;if(false){GLLib.Dbg("LoadData_useRaw: Pixel Format is 4444")}}}}for(var v=0;v<this._palettes;++v){if(this._module_image_intAAA[v]==null){this._module_image_intAAA[v]=gloft.ArrayCreation([this._nModules],gloft.casttoint(null))}for(var u=0;u<this._nModules;++u){var g=(f[r++]&255)+((f[r++]&255)<<8)+((f[r++]&255)<<16)+((f[r++]&255)<<24);var w=gloft.ArrayCreation([g],gloft.casttoint(null));if(m==-30584){for(var e=g>>2,t=0;t<e;++t){w[t]=((f[r++]&255)<<24)+((f[r++]&255)<<16)+((f[r++]&255)<<8)+(f[r++]&255);if((w[t]&16777215)==16711935){w[t]=16711935}}}else{if(m==-30712){for(var d=gloft.casttoint(g/3),s=0;s<d;++s){w[s]=(((f[r++]&255)<<16)+((f[r++]&255)<<8)+(f[r++]&255)|-16777216);if((w[s]&16777215)==16711935){w[s]=16711935;this._alpha=true}}}else{if(m==17476){for(var c=g>>1,b=0;b<c;++b){var a=(f[r]&240)|(f[r]>>4&15);var q=(f[r]&15)<<4|(f[r]&15);var p=(f[r+1]&240)|(f[r+1]>>4&15);var o=(f[r+1]&15)<<4|(f[r+1]&15);r+=2;w[b]=(a<<24|q<<16|p<<8|o);if((w[b]&16777215)==16711935){w[b]=16711935;this._alpha=true}if(a!=255){this._alpha=true;if(a!=0){this._multiAlpha=true}}}}else{GLLib.Dbg("LoadData_useRaw: Unknown Pixel Format: 0x"+java.lang.Integer.toHexString(m))}}}this._module_image_intAAA[v][u]=w}}return r},BuildCacheImages:function(I,au,at,aq){this.AllocateCacheArrays(I);if(ASprite.s_BCI_supportsCacheEffects&&ASprite.s_BCI_effects!=null){this.BCI_InitCacheEffect(I)}if(false){if(false){if(false){GLLib.Dbg("BuildCacheImages("+I+", "+au+", "+at+", "+aq+")... "+this)}if(this._nModules==0){return}if(at==-1){at=this._nModules-1}if(!false&&(true||true)){if(this._module_image_imageAAA==null){this._module_image_imageAAA=gloft.ArrayCreation([this._palettes],null)}if(this._module_image_imageAAA[I]==null){this._module_image_imageAAA[I]=gloft.ArrayCreation([this._nModules,1],null)}}else{if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null)}if(this._module_image_imageAA[I]==null){this._module_image_imageAA[I]=gloft.ArrayCreation([this._nModules],null)}}if(aq>=0){if(!false&&(true||true)){for(var M=au;M<=at;++M){this._module_image_imageAAA[I][M]=this._module_image_imageAAA[aq][M]}}else{for(var L=au;L<=at;++L){this._module_image_imageAA[I][L]=this._module_image_imageAA[aq][L]}}}else{var af=this._crt_pal;this._crt_pal=I;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}if(!false&&(true||true)){for(var K=au;K<=at;++K){if(true){var ap=K;if(((true&&this._module_types!=null)?this._module_types[ap]:0)!=0){continue}}if(false){GLLib.Dbg(" Caching image for module "+K)}var ao=K;if((true?(this._modules_w_short[ao]&65535):(this._modules_w_byte[ao]&255))>0){var an=K;if((true?(this._modules_h_short[an]&65535):(this._modules_h_byte[an]&255))>0){var ag=this._module_image_imageAAA[I][K];var am=0;var H=this._crt_pal;var N=false;var al=K;var F=K;var D=true?(this._modules_w_short[F]&65535):(this._modules_w_byte[F]&255);var C=K;ag[am]=this.BuildPNG8_dup_IZIIII(H,N,al,D,true?(this._modules_h_short[C]&65535):(this._modules_h_byte[C]&255),0)}}}}else{for(var J=au;J<=at;++J){if(true){var B=J;if(((true&&this._module_types!=null)?this._module_types[B]:0)!=0){continue}}if(false){GLLib.Dbg(" Caching image for module "+J)}var A=J;if((true?(this._modules_w_short[A]&65535):(this._modules_w_byte[A]&255))>0){var z=J;if((true?(this._modules_h_short[z]&65535):(this._modules_h_byte[z]&255))>0){var aa=this._module_image_imageAA[I];var y=J;var G=this._crt_pal;var ak=false;var x=J;var w=J;var u=true?(this._modules_w_short[w]&65535):(this._modules_w_byte[w]&255);var t=J;aa[y]=this.BuildPNG8_dup_IZIIII(G,ak,x,u,true?(this._modules_h_short[t]&65535):(this._modules_h_byte[t]&255),0)}}}}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}this._crt_pal=af}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}}}else{if(false){GLLib.Dbg("BuildCacheImages("+I+", "+au+", "+at+", "+aq+")... "+this)}if(this._nModules==0){return}if(at==-1){at=this._nModules-1}if(true&&(!true||(this._bs_flags&16777224)!=0)){if(aq>=0){for(var s=au;s<=at;++s){if(false||(true&&(this._flags&1)!=0)){this._module_image_intAAA[I][s]=this._module_image_intAAA[aq][s]}else{this._module_image_imageAA[I][s]=this._module_image_imageAA[aq][s]}}}else{var E=this._crt_pal;this._crt_pal=I;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}for(var r=au;r<=at;++r){if(!false||this._modules_usage==null||this._modules_usage[r]!=0){if(true){var q=r;if(((true&&this._module_types!=null)?this._module_types[q]:0)!=0){continue}}if(false){GLLib.Dbg(" Caching image for module "+r)}var p=r;var ae=true?(this._modules_w_short[p]&65535):(this._modules_w_byte[p]&255);var o=r;var ad=true?(this._modules_h_short[o]&65535):(this._modules_h_byte[o]&255);var m=ae*ad;if(ae>0){if(ad>0){var Z=null;if(false&&(this._bs_flags&8)!=0){Z=this._module_image_intAAA[I][r]}else{if(false&&ASprite.s_resizeOn){Z=this.DecodeImageAndResize(r);var h=r;var g=true?(this._modules_w_short[h]&65535):(this._modules_w_byte[h]&255);ae=(false?(ASprite.s_resizeUseShifts?(g<<ASprite.s_resizeShiftX):(gloft.casttoint(g*ASprite.s_resizedWidth/ASprite.s_originalWidth))):g);var f=r;var e=true?(this._modules_h_short[f]&65535):(this._modules_h_byte[f]&255);ad=(false?(ASprite.s_resizeUseShifts?(e<<ASprite.s_resizeShiftY):(gloft.casttoint(e*ASprite.s_resizedHeight/ASprite.s_originalHeight))):e);m=ae*ad}else{Z=this.DecodeImage_int(r)}}if(Z!=null){if(!ASprite.s_BCI_supportsCacheEffects||ASprite.s_BCI_effects==null){if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0){Z=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaIIIIIIZZZ(null,Z,0,0,ae,ad,0,this._alpha,this._multiAlpha,false);ae=GLLib.s_PFX_newSizeX;ad=GLLib.s_PFX_newSizeY}this.SetCache_dup_aIIIII(Z,ae,ad,I,r)}else{this.BCI_SetCacheWithEffect(Z,ae,ad,I,r)}if(false){++ASprite._images_count;ASprite._images_size+=m}}}}}}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}this._crt_pal=E}}Label_2553:{if(false){if(true){if((this._bs_flags&536870912)==0){break Label_2553}}try{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA[I]==null){this._module_image_intAAA[I]=gloft.ArrayCreation([1],gloft.casttoint(null))}}else{if(this._module_image_imageAA[I]==null){if((this._bs_flags&1073741824)!=0){this._module_image_imageAA[I]=gloft.ArrayCreation([this._number_image],null)}else{this._module_image_imageAA[I]=gloft.ArrayCreation([1],null)}}}var aC=this.GetModuleData_dup_I(0);if((this._bs_flags&1073741824)!=0){for(var aj=0;aj<this._number_image;++aj){var d=this._colors[aj]*3+4;var c=this._colors[aj]+4;java.lang.System.arraycopy(this._pal_data_array[aj],I*(d+c),this._modules_data_array[aj],41,d);java.lang.System.arraycopy(this._pal_data_array[aj],I*(d+c)+d,this._modules_data_array[aj],41+d+8,c)}}else{var aD=this._colors[0]*3+4;var aB=this._colors[0]+4;java.lang.System.arraycopy(this._pal_data,I*(aD+aB),aC,41,aD);java.lang.System.arraycopy(this._pal_data,I*(aD+aB)+aD,aC,41+aD+8,aB)}if(false||(true&&(this._flags&1)!=0)){java.lang.System.arraycopy(aC,0,this._module_image_intAAA[I][0]=gloft.ArrayCreation([aC.length],gloft.casttoint(null)),0,aC.length);if(false){++ASprite._images_count;ASprite._images_size+=aC.length}}else{if((this._bs_flags&1073741824)!=0){for(var ai=0;ai<this._number_image;++ai){var Y=this._module_image_imageAA[I];var ah=ai;var X=this._modules_data_array[ai];var aA=0;var ar=this._modules_data_array[ai].length;var az=aA;var W=X;Y[ah]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(W,az,ar)):javax.microedition.lcdui.Image.createImage(W,az,ar));if(false){var a=this._module_image_imageAA[I][ai].getHeight();var ac=this._module_image_imageAA[I][ai].getWidth();var V=gloft.ArrayCreation([a*ac],gloft.casttoint(null));GLLib.GetRGB(this._module_image_imageAA[I][ai],V,0,ac,0,0,ac,a);this._module_image_imageAA[I][ai]=null;var U=gloft.ArrayCreation([a*ac],gloft.casttoint(null));ASprite.TransformRGB_dup_aIIIIaI(V,a,ac,4,U);this._module_image_imageAA[I][ai]=javax.microedition.lcdui.Image.createRGBImage(U,a,ac,true)}}}else{var T=this._module_image_imageAA[I];var ay=0;var R=aC;var aw=0;var S=aC.length;var av=aw;var Q=R;T[ay]=(false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(Q,av,S)):javax.microedition.lcdui.Image.createImage(Q,av,S));if(false){var ab=this._module_image_imageAA[I][0].getHeight();var v=this._module_image_imageAA[I][0].getWidth();var P=gloft.ArrayCreation([ab*v],gloft.casttoint(null));GLLib.GetRGB(this._module_image_imageAA[I][0],P,0,v,0,0,v,ab);this._module_image_imageAA[I][0]=null;var O=gloft.ArrayCreation([ab*v],gloft.casttoint(null));ASprite.TransformRGB_dup_aIIIIaI(P,ab,v,4,O);this._module_image_imageAA[I][0]=javax.microedition.lcdui.Image.createRGBImage(O,ab,v,true)}}if(false){++ASprite._images_count;ASprite._images_size+=this._module_image_imageAA[I][0].getWidth()*this._module_image_imageAA[I][0].getHeight()}}}catch(ax){GLLib.Dbg("exception "+ax)}}}if(!false&&ASprite.s_gcEnabled){java.lang.System.gc()}}},SetCache_dup_aIIIII:function(h,a,g,f,e){var d=a*g;if(false||(true&&(this._flags&1)!=0)){if(!false||(this._bs_flags&8)==0){if(this._module_image_intAAA[f][e]==null||this._module_image_intAAA[f][e].length!=d){this._module_image_intAAA[f][e]=gloft.ArrayCreation([d],gloft.casttoint(null))}if(false){java.lang.System.arraycopy(ASprite.TransformRGB_dup_aIIIIaI(h,g,a,4,null),0,this._module_image_intAAA[f][e],0,d)}else{java.lang.System.arraycopy(h,0,this._module_image_intAAA[f][e],0,d)}}}else{var o=false;for(var c=0;c<d;++c){if((h[c]&-16777216)!=-16777216){o=true;break}}if(false){var s=this._module_image_imageAA[f];var r=ASprite.TransformRGB_dup_aIIIIaI(h,g,a,4,null);var m=o;var q=r;var j=null;if(false){j=javax.microedition.lcdui.Image.createRGBImage(q,g,a,true)}else{j=javax.microedition.lcdui.Image.createRGBImage(q,g,a,m)}s[e]=j}else{var p=this._module_image_imageAA[f];var k=o;var l=null;if(false){l=javax.microedition.lcdui.Image.createRGBImage(h,a,g,true)}else{l=javax.microedition.lcdui.Image.createRGBImage(h,a,g,k)}p[e]=l}if(false&&this._module_image_imageAA[f][e].getHeight()==1&&this._module_image_imageAA[f][e].getWidth()==1){this._module_image_imageAA[f][e]=null}}},SetCache_dup_aSIIII:function(g,f,e,d,c){if(!false){GLLib.Assert(false,"SetCache: using short[] to set cache without NokiaUI. Why do this?")}var b=f*e;if(!true||(this._flags&1)==0){for(var a=0;a<b&&(g[a]&61440)==61440;++a){}GLLib.Dbg("Trying to cache IMAGE from short[] without Nokia UI!!")}else{if(this._modules_image_shortAAA[d][c]==null||this._modules_image_shortAAA[d][c].length!=b){this._modules_image_shortAAA[d][c]=null;this._modules_image_shortAAA[d][c]=gloft.ArrayCreation([b],gloft.casttoshort(null))}java.lang.System.arraycopy(g,0,this._modules_image_shortAAA[d][c],0,b)}},BuildFrameCacheImages_dup_III:function(b,f,e){var j=ASprite.s_gcEnabled;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc();ASprite.s_gcEnabled=false}for(var a=this.GetFModules(f),d=0;d<a;++d){var h=this.GetFrameModule(f,d);var c=this.GetFrameModuleFlags_dup_II(f,d);if(true&&(c&16)!=0){this.BuildFrameCacheImages_dup_III(b,h,e)}else{if(true&&e>=0){if(this._map==null){GLLib.Assert(false,"BuildFrameCacheImages: Module Mappings are null!")}if(e>=16){GLLib.Assert(false,"BuildFrameCacheImages: Module Mapping "+e+" is out of range!")}if(this._map[e]==null){GLLib.Assert(false,"BuildFrameCacheImages: Module Mapping for "+e+" is null!")}h=this._map[e][h]}if(e>=0&&!true){GLLib.Assert(false,"BuildFrameCacheImages: Module Mapping parameter is set but module mapping is not enabled!")}var g=b;if(true&&(!true||(this._bs_flags&16384)!=0)&&(this._flags&16)==0){g=this.GetFrameModulePalette(f,d)}if(this.GetModuleImage(h,g)==null){this.BuildCacheImages(g,h,h,-1)}}}if(!false){ASprite.s_gcEnabled=j;if(ASprite.s_gcEnabled){java.lang.System.gc()}}},BuildFrameCacheImages_dup_IIII:function(f,d,a,b){if(a==-1){a=this.GetFrameCount()}var e=ASprite.s_gcEnabled;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc();ASprite.s_gcEnabled=false}for(var c=d;c<a;++c){this.BuildFrameCacheImages_dup_III(f,c,b)}if(!false){ASprite.s_gcEnabled=e;if(ASprite.s_gcEnabled){java.lang.System.gc()}}},CacheHyperFrameAnim:function(e,d,b){if(true){if(e>=this._palettes){return}for(var a=this.GetAFrames(d),c=0;c<a;++c){this.CacheHyperFrame(e,this.GetAnimFrame(d,c),b)}}},CacheHyperFrame:function(g,d,b){if(true){if(g>=this._palettes){return}for(var f=this.GetFModules(d),c=0;c<f;++c){var e=this.GetFrameModule(d,c);if((this.GetFrameModuleFlags_dup_II(d,c)&16)!=0){if(g==-1){for(var a=0;a<this._palettes-1;++a){this.BuildFrameCacheImages_dup_III(a,e,b)}}else{this.BuildFrameCacheImages_dup_III(g,e,b)}}}}},BuildAnimCacheImages_dup_III:function(f,d,b){var e=ASprite.s_gcEnabled;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc();ASprite.s_gcEnabled=false}for(var a=this.GetAFrames(d),c=0;c<a;++c){this.BuildFrameCacheImages_dup_III(f,this.GetAnimFrame(d,c),b)}if(!false){ASprite.s_gcEnabled=e;if(ASprite.s_gcEnabled){java.lang.System.gc()}}},BuildAnimCacheImages_dup_IIII:function(f,d,b,a){if(b==-1){b=this.GetAnimationCount()}var e=ASprite.s_gcEnabled;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc();ASprite.s_gcEnabled=false}for(var c=d;c<b;++c){this.BuildAnimCacheImages_dup_III(f,c,a)}if(!false){ASprite.s_gcEnabled=e;if(ASprite.s_gcEnabled){java.lang.System.gc()}}},BuildUsedModulesCacheImages:function(e){if(!true){GLLib.Assert(false,"BuildUsedModulesCacheImages: cant be used unless GLLibConfig.sprite_useModuleMapping is true")}if(this._modules_usage==null){GLLib.Assert(false,"BuildUsedModulesCacheImages: _modules_usage is null. You must call ASprite.ModuleMarking_Init() before calling this.")}var d=ASprite.s_gcEnabled;if(!false&&ASprite.s_gcEnabled){java.lang.System.gc();ASprite.s_gcEnabled=false}for(var c=this._modules_usage.length,b=0;b<c;++b){if(this.GetModuleImage(b,e)==null&&this._modules_usage[b]!=0){var a=gloft.casttoint(null);for(a=b+1;a<c&&this.GetModuleImage(a,e)==null&&this._modules_usage[a]!=0;++a){}this.BuildCacheImages(e,b,a-1,-1);b=a}}if(!false){ASprite.s_gcEnabled=d;if(ASprite.s_gcEnabled){java.lang.System.gc()}}},BuildPaletteIndexCacheImages:function(v,j){if(!false){GLLib.Assert(false,"BuildPaletteIndexCacheImages: you must enable sprite_usePaletteIndexCache to use this.")}if(v<0){GLLib.Assert(false,"BuildPaletteIndexCacheImages: Module index is "+v+", it can't be negative!")}if(this._nModules==0){return}if(j==-1){j=this._nModules-1}if(this._module_image_byteAA==null){this._module_image_byteAA=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}var t=this.GetCurrentPalette_dup_();var u=null;var y=null;var x=null;var w=null;var h=this._colors[0];this.SetCurrentPalette_dup_I(0);if(false){y=gloft.ArrayCreation([h],gloft.casttoshort(null));x=this.GetPalette_dup_II(0,0);java.lang.System.arraycopy(x,0,y,0,h);var g=h;while(--g>=0){x[g]=gloft.casttoshort(g)}}else{u=gloft.ArrayCreation([h],gloft.casttoint(null));w=this.GetPalette_dup_II(0,0);java.lang.System.arraycopy(w,0,u,0,h);var e=h;while(--e>=0){w[e]=e}}for(var z=v;z<=j;++z){if(!false||this._modules_usage==null||this._modules_usage[z]!=0){if(true){var d=z;if(((true&&this._module_types!=null)?this._module_types[d]:0)!=0){continue}}var c=z;var b=true?(this._modules_w_short[c]&65535):(this._modules_w_byte[c]&255);var a=z;var s=true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255);var r=b*s;if(this._module_image_byteAA[z]==null){this._module_image_byteAA[z]=gloft.ArrayCreation([r],gloft.casttobyte(null))}var l=this.DecodeImage_int(z);var f=this._module_image_byteAA[z];if(false){var q=r;var p=b;while(--p>=0){var m=p;while(--s>=0){f[--q]=gloft.casttobyte(l[m]);m+=b}}}else{var k=r;while(--k>=0){f[k]=gloft.casttobyte(l[k])}}}}this.SetCurrentPalette_dup_I(t);if(false){java.lang.System.arraycopy(y,0,x,0,h)}else{java.lang.System.arraycopy(u,0,w,0,h)}},FreeUnmarkedUsedModuleImages:function(c){if(!true){GLLib.Assert(false,"FreeUnmarkedUsedModuleImages: cant be used unless GLLibConfig.sprite_useModuleMapping is true")}if(this._modules_usage==null){GLLib.Assert(false,"FreeUnmarkedUsedModuleImages: _modules_usage is null. You must call ASprite.ModuleMarking_Init() before calling this")}for(var b=this._modules_usage.length,a=0;a<b;++a){if(this.GetModuleImage(a,c)!=null&&this._modules_usage[a]==0){this.FreeModuleImage(c,a)}}},SetModuleImage:function(b,c,a){if(this._module_image_imageAA!=null){if(a>=0&&a<this._module_image_imageAA.length&&this._module_image_imageAA[a]!=null&&c>=0&&c<this._module_image_imageAA[a].length){this._module_image_imageAA[a][c]=b}return}if(this._module_image_imageAAA!=null){if(a>=0&&a<this._module_image_imageAAA.length&&this._module_image_imageAAA[a]!=null&&c>=0&&c<this._module_image_imageAAA[a].length){this._module_image_imageAAA[a][c][0]=b}}},SetModuleImagesArray_dup_javalangObject:function(a){if(false){if(!true||(this._flags&1)==0){this._module_image_imageAA=a}else{this._modules_image_shortAAA=a}}else{if(false||(true&&(this._flags&1)!=0)){this._module_image_intAAA=a}else{this._module_image_imageAA=a}}},GetModuleImagesArray:function(){if(false){if(!true||(this._flags&1)==0){return this._module_image_imageAA}return this._modules_image_shortAAA}else{if(false||(true&&(this._flags&1)!=0)){return this._module_image_intAAA}return this._module_image_imageAA}},SetModuleImagesArray_dup_ASprite:function(a){if(true&&(this._flags&1)!=(a._flags&1)){GLLib.Assert(false,"Error in SetModuleImagesArray: both sprites must have same cache format")}this.SetModuleImagesArray_dup_javalangObject(a.GetModuleImagesArray())},AllocateCacheArrays:function(a){if(false){if(!true||(this._flags&1)==0){if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null)}if(this._module_image_imageAA[a]==null){this._module_image_imageAA[a]=gloft.ArrayCreation([this._nModules],null)}}else{if(this._modules_image_shortAAA==null){this._modules_image_shortAAA=gloft.ArrayCreation([this._palettes],gloft.casttoshort(null))}if(this._modules_image_shortAAA[a]==null){this._modules_image_shortAAA[a]=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA==null){this._module_image_intAAA=gloft.ArrayCreation([this._palettes],gloft.casttoint(null))}if(this._module_image_intAAA[a]==null){this._module_image_intAAA[a]=gloft.ArrayCreation([this._nModules],gloft.casttoint(null))}}else{if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null)}if(this._module_image_imageAA[a]==null){this._module_image_imageAA[a]=gloft.ArrayCreation([this._nModules],null)}}}},AllocateExtraCache_dup_:function(){var a=-1;if(false){if(!true||(this._flags&1)==0){if(this._module_image_imageAA!=null){a=this._module_image_imageAA.length}}else{if(this._modules_image_shortAAA!=null){a=this._modules_image_shortAAA.length}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA!=null){a=this._module_image_intAAA.length}}else{if(this._module_image_imageAA!=null){a=this._module_image_imageAA.length}}}if(a>=0){return this.AllocateExtraCache_dup_I(a)}return a},AllocateExtraCache_dup_I:function(a){if(a<0){GLLib.Assert(false,"AllocateExtraCache: cache id("+a+") must be >= 0.")}var i=-1;if(false){if(!true||(this._flags&1)==0){if(this._module_image_imageAA!=null){i=a;if(i>=this._module_image_imageAA.length){var h=i+1;var l=this._module_image_imageAA;this._module_image_imageAA=gloft.ArrayCreation([h],null);var c=l.length;while(--c>=0){this._module_image_imageAA[c]=l[c]}}}}else{if(this._modules_image_shortAAA!=null){i=a;if(i>=this._modules_image_shortAAA.length){var g=i+1;var d=this._modules_image_shortAAA;this._modules_image_shortAAA=gloft.ArrayCreation([g],gloft.casttoshort(null));var m=d.length;while(--m>=0){this._modules_image_shortAAA[m]=d[m]}}}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA!=null){i=a;if(i>=this._module_image_intAAA.length){var e=i+1;var f=this._module_image_intAAA;this._module_image_intAAA=gloft.ArrayCreation([e],gloft.casttoint(null));var k=f.length;while(--k>=0){this._module_image_intAAA[k]=f[k]}}}}else{if(this._module_image_imageAA!=null){i=a;if(i>=this._module_image_imageAA.length){var b=i+1;var o=this._module_image_imageAA;this._module_image_imageAA=gloft.ArrayCreation([b],null);var j=o.length;while(--j>=0){this._module_image_imageAA[j]=o[j]}}}}}if(i>-1){if(this._palettes<=i){this._palettes=i+1}this.AllocateCacheArrays(i)}return i},FreeModuleImage:function(b,a){if(false){if(!true||(this._flags&1)==0){if(this._module_image_imageAA!=null&&b<this._module_image_imageAA.length){if(a==-1){this._module_image_imageAA[b]=null}else{if(this._module_image_imageAA[b]!=null){this._module_image_imageAA[b][a]=null}}}}else{if(this._modules_image_shortAAA!=null&&b<this._modules_image_shortAAA.length){if(a==-1){this._modules_image_shortAAA[b]=null}else{if(this._modules_image_shortAAA[b]!=null){this._modules_image_shortAAA[b][a]=null}}}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA!=null&&b<this._module_image_intAAA.length){if(a==-1){this._module_image_intAAA[b]=null}else{if(this._module_image_intAAA[b]!=null){this._module_image_intAAA[b][a]=null}}}}else{if(false){if(!false&&(true||true)){if(this._module_image_imageAAA!=null&&b<this._module_image_imageAAA.length){if(a==-1){this._module_image_imageAAA[b]=null}else{if(this._module_image_imageAAA[b]!=null){this._module_image_imageAAA[b][a]=null}}}}else{if(this._module_image_imageAA!=null&&b<this._module_image_imageAA.length){if(a==-1){this._module_image_imageAA[b]=null}else{if(this._module_image_imageAA[b]!=null){this._module_image_imageAA[b][a]=null}}}}}else{if(this._module_image_imageAA!=null&&b<this._module_image_imageAA.length){if(a==-1){this._module_image_imageAA[b]=null}else{if(this._module_image_imageAA[b]!=null){this._module_image_imageAA[b][a]=null}}}}}}},FreeModuleCacheImages:function(b){if(b<0||b>=this._palettes){return}var a=this._nModules;while(--a>=0){this.FreeModuleImage(b,a)}},FreeFrameCacheImages:function(g,c){for(var f=this.GetFModules(c),b=0;b<f;++b){var e=this.GetFrameModule(c,b);var d=this.GetFrameModuleFlags_dup_II(c,b);if(true&&(d&16)!=0){this.FreeFrameCacheImages(g,e)}else{var a=g;if(true&&(!true||(this._bs_flags&16384)!=0)&&(this._flags&16)==0){a=this.GetFrameModulePalette(c,b)}if(this.GetModuleImage(e,a)!=null){this.FreeModuleImage(a,e)}}}},FreeAnimCacheImages:function(d,c){for(var a=this.GetAFrames(c),b=0;b<a;++b){this.FreeFrameCacheImages(d,this.GetAnimFrame(c,b))}},FreeMemory:function(){if(false){if(false){if(this._pal_short!=null){for(var d=0;d<this._pal_short.length;++d){this._pal_short[d]=null}this._pal_short=null}}else{if(this._pal_int!=null){for(var c=0;c<this._pal_int.length;++c){this._pal_int[c]=null}this._pal_int=null}}if(this._transp!=null){for(var b=0;b<this._transp.length;++b){this._transp[b]=null}this._transp=null}if(false){if(this._modules_data_array!=null){for(var a=0;a<this._modules_data_array.length;++a){this._modules_data_array[a]=null}this._modules_data_array=null}}else{this._modules_data=null;if(false){this._modules_data_off_short=null}else{this._modules_data_off_int=null}}this._PNG_packed_PLTE_CRC=null;this._PNG_packed_IHDR_CRC=null;this._PNG_packed_IDAT_CRC=null;this._PNG_packed_IDAT_ADLER=null;this._PNG_packed_tRNS_CRC=null;if(true){this._module_types=null;if(false){this._module_colors_byte=null}else{this._module_colors_int=null}}}},FreeCachedModules:function(){if(false){if(!true||(this._flags&1)==0){if(this._module_image_imageAA!=null){for(var f=0;f<this._module_image_imageAA.length;++f){this._module_image_imageAA[f]=null}this._module_image_imageAA=null}}else{if(this._modules_image_shortAAA!=null){for(var d=0;d<this._modules_image_shortAAA.length;++d){if(this._modules_image_shortAAA[d]!=null){for(var b=0;b<this._modules_image_shortAAA[d].length;++b){this._modules_image_shortAAA[d][b]=null}this._modules_image_shortAAA[d]=null}}this._modules_image_shortAAA=null}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA!=null){for(var a=0;a<this._module_image_intAAA.length;++a){if(this._module_image_intAAA[a]!=null){for(var g=0;g<this._module_image_intAAA[a].length;++g){this._module_image_intAAA[a][g]=null}this._module_image_intAAA[a]=null}}this._module_image_intAAA=null}}else{if(this._module_image_imageAA!=null){for(var e=0;e<this._module_image_imageAA.length;++e){this._module_image_imageAA[e]=null}this._module_image_imageAA=null}}}if(false&&this._module_image_byteAA!=null){for(var c=0;c<this._module_image_byteAA.length;++c){this._module_image_byteAA[c]=null}this._module_image_byteAA=null}},GetModuleExtraInfoOffset:function(b){if(this._modules_extra_pointer!=null){for(var a=0;a<this._modules_extra_pointer.length;a+=2){if(this._modules_extra_pointer[a]==b){return this._modules_extra_pointer[a+1]}}}return -1},GetRot_H:function(e,d){if(false){var c=gloft.casttoint(null);if(true){c=this._modules_h_short[e]}else{c=this._modules_h_byte[e]}if(true){if((d&7)>3){c=this._modules_w_short[e]}}else{if((d&7)>3){c=this._modules_w_byte[e]}}if(c<0){c+=255}if(true&&(GLLib.s_PFX_type&1<<13)!=0){var b=GLLib.s_PFX_params[13][1];c=gloft.casttoint(c*((b!=100)?b:GLLib.s_PFX_params[13][4])/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var a=GLLib.s_PFX_params[17][1];c=gloft.casttoint(c*((a!=100)?a:GLLib.s_PFX_params[17][4])/100)}}return c}return 0},PaintModule_dup_javaxmicroeditionlcduiGraphicsIIII:function(d,g,f,e,c){var b=true?(this._modules_w_short[g]&65535):(this._modules_w_byte[g]&255);var a=true?(this._modules_h_short[g]&65535):(this._modules_h_byte[g]&255);ASprite.s_rc[0]=b;ASprite.s_rc[1]=a;this.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIaI(d,g,f,e,c,ASprite.s_rc)},PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIII:function(d,g,f,e,c,b,a){ASprite.s_rc[0]=b;ASprite.s_rc[1]=a;this.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIaI(d,g,f,e,c,ASprite.s_rc)},PaintModule_dup_javaxmicroeditionlcduiGraphicsIIIIaI:function(dl,bX,az,Z,dm,g){var dk=az;var dj=Z;var di=dm;if(false){if((dm&1)==0||(dm&2)==0){if((dm&1)!=0){dm&=-2;dm|=2}else{if((dm&2)!=0){dm&=-3;dm|=1}}}var dh=az;az=ASprite._graphicsHeight-Z-this.GetRot_H(bX,dm);Z=dh}if(false&&ASprite.s_debugSkipPaintModule){return}if(this._bTraceNow){GLLib.Dbg("PaintModule(g_  "+bX+", "+az+", "+Z+", 0x"+java.lang.Integer.toHexString(dm)+")")}if(true&&this._cur_map>=0){bX=this._map[this._cur_map][bX]}if(false){if(ASprite._operation==3){if(this._modules_usage==null){GLLib.Assert(false,"PaintModule: Using OPERATION_MARK, but marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}var av=this._modules_usage;var dg=bX;av[dg]|=gloft.casttobyte((1<<(dm&7)));return}}else{if(ASprite._operation==3){GLLib.Assert(false,"PaintModule: Using OPERATION_MARK but sprite_useOperationMark is FALSE!")}}var df=g[0];var de=g[1];var c4=df;var c3=de;if(false){c4=de;c3=df}var c2=c4;var c1=c3;if((dm&4)!=0){var c0=c4;c4=c3;c3=c0}if(true){var cZ=bX;if(((true&&this._module_types!=null)?this._module_types[cZ]:0)!=0&&dl!=null){if(false){dl.setColor(gloft.casttoint(this._module_colors_byte[bX]))}else{if(true&&(GLLib.s_PFX_type&1<<9)!=0){dl.setColor(GLLib.PFX_GetGrayscaleColor_dup_I(this._module_colors_int[bX]))}else{if(true&&(GLLib.s_PFX_type&1<<14)!=0){dl.setColor(GLLib.s_PFX_params[14][0])}else{dl.setColor(this._module_colors_int[bX])}}}if(true&&(GLLib.s_PFX_type&1<<13)!=0){var cY=GLLib.s_PFX_params[13][1];var cX=(cY!=100)?cY:GLLib.s_PFX_params[13][3];var cW=GLLib.s_PFX_params[13][1];var cV=(cW!=100)?cW:GLLib.s_PFX_params[13][4];c4=gloft.casttoint(c4*cX/100);c3=gloft.casttoint(c3*cV/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var cJ=GLLib.s_PFX_params[17][1];var cI=(cJ!=100)?cJ:GLLib.s_PFX_params[17][3];var cH=GLLib.s_PFX_params[17][1];var cG=(cH!=100)?cH:GLLib.s_PFX_params[17][4];c4=gloft.casttoint(c4*cI/100);c3=gloft.casttoint(c3*cG/100)}}switch(this._module_types[bX]){case 2:if(false){break}if(false){az=dk;Z=dj;var cF=c4;c4=c3;c3=cF}if(false){GLLib.FillRect(dl,az,Z,c4,c3);break}if((this._module_colors_int[bX]&-16777216)==-16777216||(this._module_colors_int[bX]&-16777216)==0){if(true&&(GLLib.s_PFX_type&1<<12)!=0){GLLib.AlphaRect_SetColor((this._module_colors_int[bX]&16777215)|GLLib.s_PFX_params[12][1]<<24);GLLib.AlphaRect_Draw(dl,az,Z,c4,c3);break}GLLib.FillRect(dl,az,Z,c4,c3);break}else{if(false){break}if(true&&(GLLib.s_PFX_type&1<<9)!=0){GLLib.AlphaRect_SetColor(GLLib.PFX_GetGrayscaleColor_dup_I(this._module_colors_int[bX]));GLLib.AlphaRect_Draw(dl,az,Z,c4,c3);break}GLLib.AlphaRect_SetColor(this._module_colors_int[bX]);GLLib.AlphaRect_Draw(dl,az,Z,c4,c3);break}break;case 1:if(false){break}if(false){az=dk;Z=dj;var cE=c4;c4=c3;c3=cE}if(!false){--c4;--c3}if(true&&(GLLib.s_PFX_type&1<<12)!=0){GLLib.DrawAlphaRect(dl,az,Z,c4,c3,(this._module_colors_int[bX]&16777215)|GLLib.s_PFX_params[12][1]<<24);break}GLLib.DrawRect(dl,az,Z,c4,c3);break;case 3:case 4:if(!false||!false){if(false){az=dk;Z=dj;var cD=c4;c4=c3;c3=cD;dm=di}var bF=this.GetModuleExtraInfoOffset(bX);if(bF!=-1){var cC=this._modules_extra_info[bF+0];var cB=this._modules_extra_info[bF+1];if((dm&1)!=0){cC=90-cC}if((dm&2)!=0){cC=-cC;cB=-cB}if((dm&4)!=0){cC-=90}if(!false&&this._module_types[bX]==3){GLLib.DrawArc(dl,az,Z,c4,c3,cC,cB)}else{if(!false){GLLib.FillArc(dl,az,Z,c4,c3,cC,cB)}}}break}break;case 6:case 7:if(!false||!false){var z=this.GetModuleExtraInfoOffset(bX);if(z!=-1){if(false){dm=di;az=dk;Z=dj}var cA=this._modules_extra_info[z+0];var cn=this._modules_extra_info[z+1];var cm=this._modules_extra_info[z+2];var ck=this._modules_extra_info[z+3];var ci=az;var cg=Z;if((dm&1)!=0){cA=-cA;cm=-cm;az+=((java.lang.Math.abs(cA)>java.lang.Math.abs(cm))?java.lang.Math.abs(cA):java.lang.Math.abs(cm))}if((dm&2)!=0){cn=-cn;ck=-ck;Z+=((java.lang.Math.abs(cn)>java.lang.Math.abs(ck))?java.lang.Math.abs(cn):java.lang.Math.abs(ck))}if((dm&4)!=0){var cf=(java.lang.Math.abs(cn)>java.lang.Math.abs(ck))?java.lang.Math.abs(cn):java.lang.Math.abs(ck);var ce=Z-cg;Z=cg+(az-ci);az=ci-ce+cf;var cc=cA;cA=-cn;cn=cc;var ca=cm;cm=-ck;ck=ca}if(!false&&this._module_types[bX]==6){GLLib.DrawLine(dl,az,Z,az+cA,Z+cn);GLLib.DrawLine(dl,az+cA,Z+cn,az+cm,Z+ck);GLLib.DrawLine(dl,az,Z,az+cm,Z+ck)}else{if(!false){GLLib.FillTriangle(dl,az,Z,az+cA,Z+cn,az+cm,Z+ck)}}}break}break;case 8:if(!false){if(false){az=dk;Z=dj;var b1=c4;c4=c3;c3=b1}var bN=az;var bM=az+c4;var bL=Z;var bK=Z+c3;if((dm&1)!=0){var bJ=bN;bN=bM;bM=bJ}if((dm&2)!=0){var bI=bL;bL=bK;bK=bI}if((dm&4)!=0){var bH=bN;bN=bM;bM=bH}GLLib.DrawLine(dl,bN,bL,bM,bK);break}break;case 9:if(!false){if(false){az=dk;Z=dj;var bG=c4;c4=c3;c3=bG}var w=this.GetModuleExtraInfoOffset(bX);if(w!=-1){var bE=this._module_colors_int[bX];var bD=(this._modules_extra_info[w+0]&65535)|(this._modules_extra_info[w+1]<<16&-65536);var bq=this._modules_extra_info[w+2];var bp=0;var bo=0;var bn=c4;var bm=c3;if((dm&1)!=0&&bq<2){var bl=bE;bE=bD;bD=bl}if((dm&2)!=0&&bq>1){var bk=bE;bE=bD;bD=bk}var bj=gloft.casttoint(null);if(bq==0){bj=4}else{if(bq==1){bj=8}else{if(bq==2){bj=16}else{bj=32}}}if((dm&4)!=0){if(bj==4){bj=16}else{if(bj==8){bj=32}else{if(bj==16){bj=8}else{if(bj==32){bj=4}}}}}GLLib.DrawGradientRect_dup_javaxmicroeditionlcduiGraphicsIIIIIII(dl,az+bp,Z+bo,bn,bm,bE,bD,bj)}break}break}return}}if(false){if(ASprite._operation==1){if(false){az=dk;Z=dj;c4=df;c3=de}if((dm&4)!=0){var bi=c4;c4=c3;c3=bi}if(true&&!false){var bh=bX;if(((true&&this._module_types!=null)?this._module_types[bh]:0)==5){az-=c4>>1;Z-=c3>>1}}if(az<ASprite._rectX1){ASprite._rectX1=az}if(Z<ASprite._rectY1){ASprite._rectY1=Z}if(az+c4>ASprite._rectX2){ASprite._rectX2=az+c4}if(Z+c3>ASprite._rectY2){ASprite._rectY2=Z+c3}return}}else{if(ASprite._operation==1){GLLib.Assert(false,"Error: Trying to use COMPUTE RECT OPERATION but sprite_useOperationRect is FALSE!!!")}}if(true&&true){var a4=bX;if(((true&&this._module_types!=null)?this._module_types[a4]:0)!=0){return}}if(true&&this._crt_pal==this._palBlend_dest&&this._palBlend_ModuleState!=null&&this._palBlend_ModuleState[bX]!=gloft.casttobyte(this._palBlend_current)){var aS=ASprite.s_gcEnabled;ASprite.s_gcEnabled=false;this.BuildCacheImages(this._crt_pal,bX,bX,-1);ASprite.s_gcEnabled=aS;this._palBlend_ModuleState[bX]=gloft.casttobyte(this._palBlend_current)}if(false){if((dm&4)!=0){var a3=c4;c4=c3;c3=a3}if(false&&(this._bs_flags&536870912)!=0){if(c4<=0||c3<=0){return}var d=dl.getClipX();var c=dl.getClipY();var bA=dl.getClipWidth();var cp=dl.getClipHeight();var a1=az;var a0=Z;var aZ=az+c4;var aY=Z+c3;if(az<d){a1=d}if(Z<c){a0=c}if(aZ>d+bA){aZ=d+bA}if(aY>c+cp){aY=c+cp}if(!false){dl.setClip(a1,a0,aZ-a1,aY-a0)}if(!false&&(true||true)){if(false){if(this.CheckOperation(this._module_image_imageAAA[this._crt_pal][0][0],az,Z,c4,c3,0,this._modules_x_byte[bX]&255,this._modules_y_byte[bX]&255)){dl.drawImage(this._module_image_imageAAA[this._crt_pal][0][0],az-(this._modules_x_byte[bX]&255),Z-(this._modules_y_byte[bX]&255),0)}}else{if(true&&this.CheckOperation(this._module_image_imageAAA[this._crt_pal][0][0],az,Z,c4,c3,0,this._modules_x_short[bX],this._modules_y_short[bX])){dl.drawImage(this._module_image_imageAAA[this._crt_pal][0][0],az-this._modules_x_short[bX],Z-this._modules_y_short[bX],0)}}}else{if(!false){if(false){if(this.CheckOperation(this._module_image_imageAA[this._crt_pal][0],az,Z,c4,c3,0,this._modules_x_byte[bX]&255,this._modules_y_byte[bX]&255)){dl.drawImage(this._module_image_imageAA[this._crt_pal][0],az-(this._modules_x_byte[bX]&255),Z-(this._modules_y_byte[bX]&255),0)}}else{if(true&&this.CheckOperation(this._module_image_imageAA[this._crt_pal][0],az,Z,c4,c3,0,this._modules_x_short[bX],this._modules_y_short[bX])){dl.drawImage(this._module_image_imageAA[this._crt_pal][0],az-this._modules_x_short[bX],Z-this._modules_y_short[bX],0)}}}else{if(false){if(this.CheckOperation(this._module_image_imageAA[this._crt_pal][0],az,Z,c4,c3,0,this._modules_x_byte[bX]&255,this._modules_y_byte[bX]&255)){if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(this._module_image_imageAA[this._crt_pal][0],this._modules_x_byte[bX]&255,this._modules_y_byte[bX]&255,c4,c3,0),az,Z,0)}else{dl.drawRegion(this._module_image_imageAA[this._crt_pal][0],this._modules_x_byte[bX]&255,this._modules_y_byte[bX]&255,c4,c3,0,az,Z,0)}}}else{if(true&&this.CheckOperation(this._module_image_imageAA[this._crt_pal][0],az,Z,c4,c3,0,this._modules_x_short[bX],this._modules_y_short[bX])){if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(this._module_image_imageAA[this._crt_pal][0],gloft.casttoint(this._modules_x_short[bX]),gloft.casttoint(this._modules_y_short[bX]),c4,c3,0),az,Z,0)}else{dl.drawRegion(this._module_image_imageAA[this._crt_pal][0],gloft.casttoint(this._modules_x_short[bX]),gloft.casttoint(this._modules_y_short[bX]),c4,c3,0,az,Z,0)}}}}}if(!false){dl.setClip(d,c,bA,cp)}}else{if(!false&&(true||true)){if(this._module_image_imageAAA==null||this._crt_pal>=this._module_image_imageAAA.length||this._module_image_imageAAA[this._crt_pal]==null||bX>=this._module_image_imageAAA[this._crt_pal].length||this._module_image_imageAAA[this._crt_pal][bX]==null||dm>=this._module_image_imageAAA[this._crt_pal][bX].length||this._module_image_imageAAA[this._crt_pal][bX][dm]==null){GLLib.Assert(false,"Not loaded module image: pal = "+this._crt_pal+" module = "+bX+" flags = "+dm)}var aX=gloft.casttoint(null);if(false&&true&&(this._bs_flags&33554432)!=0){aX=0}else{aX=dm}var aR=null;if(aX<this._module_image_imageAAA[this._crt_pal][bX].length){aR=this._module_image_imageAAA[this._crt_pal][bX][aX]}if(aR==null){aR=this.BuildPNG8_dup_IZIIII(this._crt_pal,false,bX,c4,c3,aX)}if(this.CheckOperation(aR,az,Z,c4,c3,0,0,0)){dl.drawImage(aR,az,Z,0)}}else{if(this._module_image_imageAA==null||this._crt_pal>=this._module_image_imageAA.length||this._module_image_imageAA[this._crt_pal]==null||bX>=this._module_image_imageAA[this._crt_pal].length){GLLib.Assert(false,"Not loaded module image: pal = "+this._crt_pal+" module = "+bX)}if(false&&true&&(this._bs_flags&33554432)!=0){var aQ=this._module_image_imageAA[this._crt_pal][bX];if(aQ==null){aQ=this.BuildPNG8_dup_IZIIII(this._crt_pal,false,bX,c4,c3,0)}if(aQ==null){GLLib.Assert(false,"Not loaded module image")}if(this.CheckOperation(aQ,az,Z,c4,c3,0,0,0)){dl.drawImage(aQ,az,Z,0)}}else{if(false){if(this.CheckOperation(this._module_image_imageAA[this._crt_pal][bX],az,Z,c4,c3,ASprite.midp2_flags[dm&7],0,0)){if(ASprite.midp2_flags[dm&7]==0){dl.drawImage(this._module_image_imageAA[this._crt_pal][bX],az,Z,0)}else{if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(this._module_image_imageAA[this._crt_pal][bX],0,0,c4,c3,ASprite.midp2_flags[dm&7]),az,Z,0)}else{dl.drawRegion(this._module_image_imageAA[this._crt_pal][bX],0,0,c4,c3,ASprite.midp2_flags[dm&7],az,Z,0)}}}}else{if(this.CheckOperation(this._module_image_imageAA[this._crt_pal][bX],az,Z,c4,c3,0,0,0)){dl.drawImage(this._module_image_imageAA[this._crt_pal][bX],az,Z,0)}}}}}}else{if(c4<=0||c3<=0){return}if(!false&&((true&&ASprite._customGraphics!=null)||dl!=null)){if(false){if(!ASprite.CheckVisibility(dl,dk,dj,c3,c4)){return}}else{if(!ASprite.CheckVisibility(dl,az,Z,c4,c3)){return}}}if(false&&ASprite.s_resizeOn){var aW=az;az=(false?(ASprite.s_resizeUseShifts?(aW<<ASprite.s_resizeShiftX):(gloft.casttoint(aW*ASprite.s_resizedWidth/ASprite.s_originalWidth))):aW);var aV=Z;Z=(false?(ASprite.s_resizeUseShifts?(aV<<ASprite.s_resizeShiftY):(gloft.casttoint(aV*ASprite.s_resizedHeight/ASprite.s_originalHeight))):aV)}var y=null;var ap=null;if(false&&(!true||(this._bs_flags&536870912)!=0)){if((dm&4)!=0){var aU=c4;c4=c3;c3=aU}if(!true||(this._bs_flags&536870912)!=0){if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA==null||this._module_image_intAAA[this._crt_pal]==null){this.BuildCacheImages(this._crt_pal,0,0,0)}if(this.CheckOperation(this._module_image_intAAA[this._crt_pal][0],az,Z,c4,c3,0,0,0)){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,this._module_image_intAAA[this._crt_pal][0],0,c4,az,Z,c4,c3,this._alpha,this._multiAlpha,0)}}else{if(this._module_image_imageAA==null||this._module_image_imageAA[this._crt_pal]==null){this.BuildCacheImages(this._crt_pal,0,0,0)}var aO=0;var aN=0;if(true&&(!true||(this._bs_flags&32)!=0)){aO=this._modules_x_short[bX];aN=this._modules_y_short[bX]}else{if(false&&(!true||(this._bs_flags&2)!=0)){aO=(this._modules_x_byte[bX]&255);aN=(this._modules_y_byte[bX]&255)}}if(false){var aM=ASprite.midp2_flags[dm&7];if(aM>2){aM=0}ap=this._module_image_imageAA[this._crt_pal][aM];if(ASprite.midp2_flags[dm&7]==2){aO=ap.getWidth()-(aO+c4)}else{if(ASprite.midp2_flags[dm&7]==1){aN=ap.getHeight()-(aN+c3)}}}else{var br=this.GetModuleImageIndex(bX);ap=this._module_image_imageAA[this.GetCurrentPalette_dup_I(br)][br]}if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0){var bO=this._alpha;var aT=ASprite.GetPixelBuffer_int_dup_aI(null);GLLib.GetRGB(ap,aT,0,c4,aO,aN,c4,c3);var dn=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaIIIIIIZZZ(dl,aT,az,Z,c2,c1,dm,bO,this._multiAlpha,true);if(dn==null){return}c4=GLLib.s_PFX_sizeX;c3=GLLib.s_PFX_sizeY;dm=0;c2=c4;c1=c3;if(false){var v=dn;var aL=c4;var aK=c3;var co=bO;var aJ=aK;var aI=aL;var t=v;var a=null;if(false){a=javax.microedition.lcdui.Image.createRGBImage(t,aI,aJ,true)}else{a=javax.microedition.lcdui.Image.createRGBImage(t,aI,aJ,co)}dl.drawImage(a,az,Z,0)}else{if(false){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,dn,0,c2,az,Z,c2,c1,bO,true,0,-1,false)}else{GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,dn,0,c2,az,Z,c2,c1,bO,true,0)}}}else{if(false){var aH=ap.getWidth()-(aN+c4);aN=aO;aO=aH}if(false){var dc=dl.getClipX();var cL=dl.getClipY();var dt=dl.getClipWidth();var aG=dl.getClipHeight();var aF=az;var aE=Z;var ao=az+c4;var an=Z+c3;if(az<dc){aF=dc}if(Z<cL){aE=cL}if(ao>dc+dt){ao=dc+dt}if(an>cL+aG){an=cL+aG}dl.setClip(aF,aE,ao-aF,an-aE);if(this.CheckOperation(ap,az,Z,c4,c3,0,aO,aN)){dl.drawImage(ap,az-aO,Z-aN,0)}dl.setClip(dc,cL,dt,aG)}else{if(true&&ASprite._customGraphics!=null){var Q=GLLib.s_PFX_hasAlpha;var cl=ASprite.GetPixelBuffer_int_dup_aI(null);GLLib.GetRGB(ap,cl,0,c4,aO,aN,c4,c3);GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,cl,0,c4,az,Z,c4,c3,Q,Q,dm,-1,false)}else{if(this.CheckOperation(ap,az,Z,c4,c3,ASprite.midp2_flags[dm&7],aO,aN)){if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(ap,aO,aN,c4,c3,ASprite.midp2_flags[dm&7]),az,Z,0)}else{if(false&&c4==1&&c3==1){return}dl.drawRegion(ap,aO,aN,c4,c3,ASprite.midp2_flags[dm&7],az,Z,0)}}}}}}}}if(false){if(this._main_image!=null&&this._main_image[this._crt_pal]!=null){ap=this._main_image[this._crt_pal]}if(ap!=null){var am=0;var al=0;if(false){am=(this._modules_x_byte[bX]&255);al=(this._modules_y_byte[bX]&255)}else{if(true){am=this._modules_x_short[bX];al=this._modules_y_short[bX]}}if(false){var ak=ap.getWidth()-(al+c4);al=am;am=ak}if(this.CheckOperation(ap,az,Z,c4,c3,ASprite.midp2_flags[dm&7],am,al)){if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(ap,am,al,c4,c3,ASprite.midp2_flags[dm&7]),az,Z,0)}else{dl.drawRegion(ap,am,al,c4,c3,ASprite.midp2_flags[dm&7],az,Z,0)}}}}if(true&&(!true||(this._bs_flags&16777224)!=0)){if(!false){if(this._module_image_imageAA!=null&&this._module_image_imageAA[this._crt_pal]!=null){ap=this._module_image_imageAA[this._crt_pal][bX]}if(this._module_image_intAAA!=null&&this._module_image_intAAA[this._crt_pal]!=null){y=this._module_image_intAAA[this._crt_pal][bX]}if(false&&y==null&&ap==null&&(false&&(ASprite.s_moduleBufferState&java.lang.Integer.MIN_VALUE)==0)&&bX==(ASprite.s_moduleBufferState&65535)&&this._crt_pal==(ASprite.s_moduleBufferState&268369920)>>16){y=ASprite.GetPixelBuffer_int_dup_aI(null);if(false){GLLib.Dbg("PaintModule: Single Frame Module Cache Hit! Pal["+this._crt_pal+"] and Module["+bX+"]")}}if(false){if(ap==null&&(this._flags&8)!=0&&(this._module_image_byteAA==null||this._module_image_byteAA[bX]==null)){this.BuildPaletteIndexCacheImages(bX,bX)}}else{if((this._flags&8)!=0){GLLib.Assert(false,"PaintModule: Using FLAG_USE_PAL_INDEX_CACHE but sprite_usePaletteIndexCache is FALSE!")}}var db=this._alpha;if(false||(true&&(this._flags&1)!=0)||(false&&ap==null&&(this._flags&8)!=0)){var aj=1;if(y==null&&(!false||(this._flags&8)==0)){if(false){aj=0}y=this.DecodeImage_int(bX);if(false&&(ASprite.s_moduleBufferState&java.lang.Integer.MIN_VALUE)==0){ASprite.s_moduleBufferState=(this._crt_pal<<16|bX)}if(false&&this._cur_pool>=0){this.UpdatePoolCache_dup_IIjavalangObject(bX,c4*c3,y)}}if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0){if(false&&aj==0){dm=(ASprite.TRANSFORM_ROT_90[di&7]|(di&-8));var ai=c2;c2=c1;c1=ai}if(false&&(this._flags&8)!=0){var f=this.GetModuleImageIndex(bX);y=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaBaIIIIIIZZZ(dl,this._module_image_byteAA[bX],this.GetPalette_dup_II(f,this.GetCurrentPalette_dup_I(f)),az,Z,c2,c1,dm,this._alpha,this._multiAlpha,true)}else{y=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaIIIIIIZZZ(dl,y,az,Z,c2,c1,dm,db,this._multiAlpha,true)}if(y==null){return}db=GLLib.s_PFX_hasAlpha;c4=GLLib.s_PFX_sizeX;c3=GLLib.s_PFX_sizeY;dm=0;c2=c4;c1=c3;if(false){aj=1}if(false){var s=y;var ah=c4;var af=c3;var da=db;var ae=af;var J=ah;var r=s;var dw=null;if(false){dw=javax.microedition.lcdui.Image.createRGBImage(r,J,ae,true)}else{dw=javax.microedition.lcdui.Image.createRGBImage(r,J,ae,da)}dl.drawImage(dw,az,Z,0);return}}else{if(false&&(this._flags&8)!=0){y=ASprite.GetPixelBuffer_int_dup_aI(null);var e=this.GetModuleImageIndex(bX);var q=this.GetPalette_dup_II(e,this.GetCurrentPalette_dup_I(e));var p=this._module_image_byteAA[bX];var a2=p.length;while(--a2>=0){y[a2]=q[p[a2]&255]}}}if(this.CheckOperation(y,az,Z,c4,c3,dm,0,0)){var c9=true;if(false){c9=(aj==0);if(c9){dm=di;az=dk;Z=dj;var I=c2;c2=c1;c1=I}}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,y,0,c2,az,Z,c2,c1,db,db,dm,this._palTransparencyIndex,c9)}}else{if(ap==null){var o=y;var c8=true;if(o==null){c8=false;o=this.DecodeImage_int(bX)}if(o==null){if(false){GLLib.Dbg("DecodeImage() FAILED !")}return}if(false&&(ASprite.s_moduleBufferState&java.lang.Integer.MIN_VALUE)==0){ASprite.s_moduleBufferState=(this._crt_pal<<16|bX)}if(true||(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0)){var c7=false;if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0){if(false){dm=(ASprite.TRANSFORM_ROT_90[di&7]|(di&-8));var H=c2;c2=c1;c1=H}o=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsaIIIIIIZZZ(dl,o,az,Z,c2,c1,dm,db,this._multiAlpha,true);if(o==null){return}db=GLLib.s_PFX_hasAlpha;c4=GLLib.s_PFX_sizeX;c3=GLLib.s_PFX_sizeY;dm=0;c2=c4;c1=c3;if(false){var aD=o;var G=c4;var E=c3;var c6=db;var C=E;var B=G;var aC=aD;var dv=null;if(false){dv=javax.microedition.lcdui.Image.createRGBImage(aC,B,C,true)}else{dv=javax.microedition.lcdui.Image.createRGBImage(aC,B,C,c6)}dl.drawImage(dv,az,Z,0);return}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,o,0,c2,az,Z,c2,c1,db,db,dm,-1,false);c7=true;if(false){return}}if(true&&this._cur_pool>=0){if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null);for(var cd=0;cd<this._palettes;++cd){this._module_image_imageAA[cd]=gloft.ArrayCreation([this._nModules],null)}}var ds=null;if(false&&!c7){var aB=gloft.ArrayCreation([c4*c3],gloft.casttoint(null));var A=c3;var x=c4;if((dm&4)!=0){A=c4;x=c3}for(var cb=0;cb<A;++cb){for(var b9=0;b9<x;++b9){aB[x-b9-1+cb*x]=o[cb+A*b9]}}if((dm&4)!=0){var aA=aB;var u=c3;var cU=c4;var W=this._alpha;var cT=cU;var cS=u;var ay=aA;var du=null;if(false){du=javax.microedition.lcdui.Image.createRGBImage(ay,cS,cT,true)}else{du=javax.microedition.lcdui.Image.createRGBImage(ay,cS,cT,W)}ds=du}else{var ax=aB;var cR=c4;var cQ=c3;var U=this._alpha;var cP=cQ;var cO=cR;var aw=ax;var dr=null;if(false){dr=javax.microedition.lcdui.Image.createRGBImage(aw,cO,cP,true)}else{dr=javax.microedition.lcdui.Image.createRGBImage(aw,cO,cP,U)}ds=dr}}else{if((dm&4)!=0){var au=o;var cN=c3;var cM=c4;var S=this._alpha;var cK=cM;var cz=cN;var at=au;var dq=null;if(false){dq=javax.microedition.lcdui.Image.createRGBImage(at,cz,cK,true)}else{dq=javax.microedition.lcdui.Image.createRGBImage(at,cz,cK,S)}ds=dq}else{var ar=o;var cy=c4;var cx=c3;var P=this._alpha;var cw=cx;var cv=cy;var ad=ar;var dp=null;if(false){dp=javax.microedition.lcdui.Image.createRGBImage(ad,cv,cw,true)}else{dp=javax.microedition.lcdui.Image.createRGBImage(ad,cv,cw,P)}ds=dp}}this.UpdatePoolCache_dup_IjavalangObject(bX,ds);if(c7){return}if(this.CheckOperation(ds,az,Z,c4,c3,ASprite.midp2_flags[dm&7],0,0)){if(ASprite.midp2_flags[dm&7]==0){dl.drawImage(ds,az,Z,0)}else{if((dm&4)!=0){dl.drawRegion(ds,0,0,c3,c4,ASprite.midp2_flags[dm&7],az,Z,0)}else{dl.drawRegion(ds,0,0,c4,c3,ASprite.midp2_flags[dm&7],az,Z,0)}}}return}else{if(c7){return}if(false){dm=di;az=dk;Z=dj;var cu=c2;c2=c1;c1=cu}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,o,0,c2,az,Z,c2,c1,db,db,dm);return}}else{if(true&&ASprite._customGraphics!=null){if(false){dm=di;az=dk;Z=dj;var ct=c2;c2=c1;c1=ct}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,o,0,c2,az,Z,c2,c1,db,db,dm);return}if(false&&!c8){var ac=gloft.ArrayCreation([c4*c3],gloft.casttoint(null));var cs=c3;var cr=c4;if((dm&4)!=0){cs=c4;cr=c3}for(var b0=0;b0<cs;++b0){for(var cq=0;cq<cr;++cq){ac[cr-cq-1+b0*cr]=o[b0+cs*cq]}}if((dm&4)!=0){var ab=ac;var bZ=c3;var bY=c4;var N=this._alpha;var bW=bY;var bV=bZ;var aa=ab;var a9=null;if(false){a9=javax.microedition.lcdui.Image.createRGBImage(aa,bV,bW,true)}else{a9=javax.microedition.lcdui.Image.createRGBImage(aa,bV,bW,N)}ap=a9}else{var Y=ac;var bU=c4;var bT=c3;var M=this._alpha;var bS=bT;var bR=bU;var X=Y;var a8=null;if(false){a8=javax.microedition.lcdui.Image.createRGBImage(X,bR,bS,true)}else{a8=javax.microedition.lcdui.Image.createRGBImage(X,bR,bS,M)}ap=a8}}else{if((dm&4)!=0){var V=o;var bQ=c3;var bP=c4;var L=this._alpha;var bC=bP;var bB=bQ;var T=V;var a7=null;if(false){a7=javax.microedition.lcdui.Image.createRGBImage(T,bB,bC,true)}else{a7=javax.microedition.lcdui.Image.createRGBImage(T,bB,bC,L)}ap=a7}else{var R=o;var bz=c4;var by=c3;var K=this._alpha;var bx=by;var bw=bz;var O=R;var a6=null;if(false){a6=javax.microedition.lcdui.Image.createRGBImage(O,bw,bx,true)}else{a6=javax.microedition.lcdui.Image.createRGBImage(O,bw,bx,K)}ap=a6}}}}if(GLLib.pfx_useSpriteEffects&&(GLLib.s_PFX_type&260064)!=0){var aq=GLLib.PFX_ProcessSpriteEffects_dup_javaxmicroeditionlcduiGraphicsjavaxmicroeditionlcduiImageIIIIIZZ(dl,ap,az,Z,c2,c1,dm,db,this._multiAlpha);if(aq==null){return}var aP=GLLib.s_PFX_hasAlpha;var F=GLLib.s_PFX_sizeX;var D=GLLib.s_PFX_sizeY;dm=0;var bv=F;var bu=D;if(false){var m=aq;var bt=F;var bs=D;var c5=aP;var bg=bs;var bf=bt;var h=m;var a5=null;if(false){a5=javax.microedition.lcdui.Image.createRGBImage(h,bf,bg,true)}else{a5=javax.microedition.lcdui.Image.createRGBImage(h,bf,bg,c5)}dl.drawImage(a5,az,Z,0)}else{if(false){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,aq,0,bv,az,Z,bv,bu,aP,true,0,-1,false)}else{GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,aq,0,bv,az,Z,bv,bu,aP,true,0)}}}else{var be=df;var bd=de;if(false&&ASprite.s_resizeOn){var bc=be;be=(false?(ASprite.s_resizeUseShifts?(bc<<ASprite.s_resizeShiftX):(gloft.casttoint(bc*ASprite.s_resizedWidth/ASprite.s_originalWidth))):bc);var bb=bd;bd=(false?(ASprite.s_resizeUseShifts?(bb<<ASprite.s_resizeShiftY):(gloft.casttoint(bb*ASprite.s_resizedHeight/ASprite.s_originalHeight))):bb)}if(false){var ba=be;be=bd;bd=ba}if(true&&ASprite._customGraphics!=null){var cj=ASprite.GetPixelBuffer_int_dup_aI(ASprite._customGraphics);GLLib.GetRGB(ap,cj,0,be,0,0,be,bd);GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(dl,cj,0,be,az,Z,be,bd,db,db,dm,-1,false)}else{this.UpdatePoolCache_dup_IjavalangObject(bX,ap);if(this.CheckOperation(ap,az,Z,be,bd,ASprite.midp2_flags[dm&7],0,0)){if(false&&(az<0||(Z<0&&(dm&3)!=0))){var dd=ap.getWidth();var ag=ap.getHeight();var ch=ASprite.GetPixelBuffer_int_dup_aI(null);GLLib.GetRGB(ap,ch,0,dd,0,0,dd,ag);GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(dl,ch,0,c2,az,Z,c2,c1,db,db,dm)}else{if(ASprite.midp2_flags[dm&7]==0){dl.drawImage(ap,az,Z,0)}else{if(false){dl.drawImage(javax.microedition.lcdui.Image.createImage(ap,0,0,be,bd,ASprite.midp2_flags[dm&7]),az,Z,0)}else{dl.drawRegion(ap,0,0,be,bd,ASprite.midp2_flags[dm&7],az,Z,0)}}}}}}}}}}},BeginChunk:function(b,a){if(false){ASprite.PutInt(a);ASprite._png_start_crc=ASprite._png_size;ASprite.PutArray(b)}},EndChunk:function(){if(false){if(false){if(true&&(this._bs_flags&33554432)==0){ASprite.PutInt(ASprite.Crc32(ASprite._png_result,ASprite._png_start_crc,ASprite._png_size-ASprite._png_start_crc,0))}else{switch(ASprite.currentChunkType){case 0:ASprite.PutInt(this._PNG_packed_IHDR_CRC[ASprite.mod]);break;case 1:ASprite.PutInt(this._PNG_packed_PLTE_CRC[this._cur_pal]);break;case 2:ASprite.PutInt(this._PNG_packed_tRNS_CRC[this._cur_pal]);break;case 3:ASprite.PutInt(this._PNG_packed_IDAT_CRC[ASprite.mod]);break}}++ASprite.currentChunkType}else{ASprite.PutInt(ASprite.Crc32(ASprite._png_result,ASprite._png_start_crc,ASprite._png_size-ASprite._png_start_crc,0))}}},BuildPNG8_dup_IZIIII:function(g,a,f,e,d,c){if(false){ASprite.mod=f;return this.BuildPNG8_dup_IZaBIII(g,a,this.DecodeImage_byte_dup_I(f),e,d,c)}return null},BuildPNG8_dup_IZaBIII:function(D,S,a,N,A,z){if(!false){return null}var y=1;if(false){this._cur_pal=D;ASprite.currentChunkType=0}var c=ASprite._png_size;if(N==0||A==0){return null}if(true&&(z&4)!=0){var x=N;N=A;A=x}ASprite._png_size=0;ASprite.PutArray(ASprite.MAGIC);this.BeginChunk(ASprite.IHDR,13);ASprite.PutInt(N);ASprite.PutInt(A);ASprite.PutArray(ASprite.INFO8);this.EndChunk();var o=null;var m=null;if(false){o=this.GetPalette_dup_II(0,D)}else{m=this.GetPalette_dup_II(0,D)}var w=gloft.casttoint(null);if(false){w=o.length}else{w=m.length}if(S){ASprite._png_size+=12+w*3;if(this._alpha){ASprite._png_size+=12+w}if(false){++ASprite.currentChunkType;++ASprite.currentChunkType}}else{this.BeginChunk(ASprite.PLTE,w*3);for(var R=0;R<w;++R){var s=this.GetPaletteColor_dup_III(0,D,R);ASprite._png_result[ASprite._png_size++]=gloft.casttobyte(((s&16711680)>>>16));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte(((s&65280)>>>8));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((s&255))}this.EndChunk();if(this._alpha){this.BeginChunk(ASprite.tRNS,w);for(var Q=0;Q<w;++Q){ASprite._png_result[ASprite._png_size++]=gloft.casttobyte(((this.GetPaletteColor_dup_III(0,D,Q)&-16777216)>>>24))}this.EndChunk()}}var v=N*A+A;this.BeginChunk(ASprite.IDAT,v+11);java.lang.System.arraycopy(ASprite.MAGIC_IDAT_h,0,ASprite._png_result,ASprite._png_size,3);ASprite._png_size+=3;ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((v&255));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte(((v&65280)>>8));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((~v&255));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte(((~v&65280)>>8));var e=ASprite._png_size;var u=A*N;if(u>=a.length){GLLib.Dbg("ERROR\t\t: BuildPNG8 data array too small look at, TMP_BUFFER_SIZE constant")}if(ASprite._png_size+u>=ASprite._png_result.length){GLLib.Dbg("ERROR\t\t: BuildPNG8 _png_result array too small look at, PNG_BUFFER_SIZE constant")}switch(z&7){case 0:for(var P=0;P<A;++P){ASprite._png_result[ASprite._png_size++]=0;java.lang.System.arraycopy(a,P*N,ASprite._png_result,ASprite._png_size,N);ASprite._png_size+=N}break;case 1:if(true){for(var O=0;O<A;++O){var t=(O+1)*N;ASprite._png_result[ASprite._png_size++]=0;for(var M=0;M<N;++M){ASprite._png_result[ASprite._png_size++]=a[--t]}}break}break;case 2:if(true){for(var L=0;L<A;++L){ASprite._png_result[ASprite._png_size++]=0;java.lang.System.arraycopy(a,(A-L-1)*N,ASprite._png_result,ASprite._png_size,N);ASprite._png_size+=N}break}break;case 3:if(true){for(var K=0;K<A;++K){var J=(A-K)*N;ASprite._png_result[ASprite._png_size++]=0;for(var I=0;I<N;++I){ASprite._png_result[ASprite._png_size++]=a[--J]}}break}break;case 4:if(true){for(var H=0;H<A;++H){ASprite._png_result[ASprite._png_size++]=0;for(var G=0;G<N;++G){ASprite._png_result[ASprite._png_size++]=a[(N-1-G)*A+H]}}break}break;case 5:if(true&&true){for(var F=0;F<A;++F){ASprite._png_result[ASprite._png_size++]=0;for(var E=0;E<N;++E){ASprite._png_result[ASprite._png_size++]=a[(N-1-E)*A+(A-1-F)]}}break}break;case 6:if(true&&true){for(var C=0;C<A;++C){ASprite._png_result[ASprite._png_size++]=0;for(var r=0;r<N;++r){ASprite._png_result[ASprite._png_size++]=a[r*A+C]}}break}break;case 7:if(true&&true){for(var q=0;q<A;++q){ASprite._png_result[ASprite._png_size++]=0;for(var p=0;p<N;++p){ASprite._png_result[ASprite._png_size++]=a[p*A+(A-1-q)]}}break}break}if(false){if(true&&(this._bs_flags&33554432)==0){ASprite.PutInt(gloft.casttoint(ASprite.Adler32(y,ASprite._png_result,e,v)))}else{ASprite.PutInt(this._PNG_packed_IDAT_ADLER[ASprite.mod])}}else{ASprite.PutInt(gloft.casttoint(ASprite.Adler32(y,ASprite._png_result,e,v)))}this.EndChunk();ASprite.PutArray(ASprite.MAGIC_IEND);var B=ASprite._png_result;var h=0;var d=ASprite._png_size;var g=h;var f=B;return false?GLLib.FixImageLackingTransparencyBug(javax.microedition.lcdui.Image.createImage(f,g,d)):javax.microedition.lcdui.Image.createImage(f,g,d)},DecodeImageAndResize:function(t){if(!false){return null}var m=this.DecodeImage_int(t);var k=true?(this._modules_w_short[t]&65535):(this._modules_w_byte[t]&255);var i=true?(this._modules_h_short[t]&65535):(this._modules_h_byte[t]&255);if(false){var h=k;var f=false?(ASprite.s_resizeUseShifts?(h<<ASprite.s_resizeShiftX):(gloft.casttoint(h*ASprite.s_resizedWidth/ASprite.s_originalWidth))):h;var e=i;var g=gloft.ArrayCreation([f*(false?(ASprite.s_resizeUseShifts?(e<<ASprite.s_resizeShiftY):(gloft.casttoint(e*ASprite.s_resizedHeight/ASprite.s_originalHeight))):e)],gloft.casttoint(null));var w=m;var v=g;var d=k;var c=i;var b=k;var s=false?(ASprite.s_resizeUseShifts?(b<<ASprite.s_resizeShiftX):(gloft.casttoint(b*ASprite.s_resizedWidth/ASprite.s_originalWidth))):b;var r=i;this.Resize(w,v,d,c,s,false?(ASprite.s_resizeUseShifts?(r<<ASprite.s_resizeShiftY):(gloft.casttoint(r*ASprite.s_resizedHeight/ASprite.s_originalHeight))):r);return g}var u=m;var a=ASprite.transform_int;var q=k;var p=i;var o=k;var l=false?(ASprite.s_resizeUseShifts?(o<<ASprite.s_resizeShiftX):(gloft.casttoint(o*ASprite.s_resizedWidth/ASprite.s_originalWidth))):o;var j=i;this.Resize(u,a,q,p,l,false?(ASprite.s_resizeUseShifts?(j<<ASprite.s_resizeShiftY):(gloft.casttoint(j*ASprite.s_resizedHeight/ASprite.s_originalHeight))):j);return ASprite.transform_int},Resize:function(r,s,a,q,p,o){if(false){if(ASprite.s_resizeUseShifts){for(var h=o-1;h>=0;--h){var m=(h>>ASprite.s_resizeShiftY)*a;var g=(h+1)*p-1;for(var f=p-1;f>=0;--f){s[g--]=r[m+(f>>ASprite.s_resizeShiftX)]}}}else{for(var e=o-1;e>=0;--e){var d=gloft.casttoint(e*q/o)*a;var c=(e+1)*p-1;for(var b=p-1;b>=0;--b){s[c--]=r[d+gloft.casttoint(b*a/p)]}}}}},SetPool:function(d){if(true){this._cur_pool=d;if(false){GLLib.Dbg("WARNING_SetPool : The cache pool is nonsupport with GLLibConfig.sprite_useDynamicPng src\\ASprite\\ASprite_CachePool.jpp   77")}else{if(false){if(this._modules_image_shortAAA==null){this._modules_image_shortAAA=gloft.ArrayCreation([this._palettes],gloft.casttoshort(null));for(var c=0;c<this._palettes;++c){this._modules_image_shortAAA[c]=gloft.ArrayCreation([this._nModules],gloft.casttoshort(null))}}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA==null){this._module_image_intAAA=gloft.ArrayCreation([this._palettes],gloft.casttoint(null));for(var b=0;b<this._palettes;++b){this._module_image_intAAA[b]=gloft.ArrayCreation([this._nModules],gloft.casttoint(null))}}}else{if(this._module_image_imageAA==null){this._module_image_imageAA=gloft.ArrayCreation([this._palettes],null);for(var a=0;a<this._palettes;++a){this._module_image_imageAA[a]=gloft.ArrayCreation([this._nModules],null)}}}}}}},UpdatePoolCache_dup_IjavalangObject:function(b,a){this.UpdatePoolCache_dup_IIjavalangObject(b,0,a)},UpdatePoolCache_dup_IIjavalangObject:function(b,j,a){if(true&&this._cur_pool>=0){if(false){if(this._modules_image_shortAAA[this._crt_pal][b]!=null){return}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA[this._crt_pal][b]!=null){return}}else{if(this._module_image_imageAA[this._crt_pal][b]!=null){return}}}var h=ASprite._poolCacheStackIndex[this._cur_pool];var g=ASprite._poolCacheStack[this._cur_pool][h];var f=g>>10;var d=gloft.casttoshort((g&1023));if(g>=0){var c=ASprite._poolCacheSprites[this._cur_pool][h];if(c!=null){if(false){c._modules_image_shortAAA[f][d]=null}else{if(false||(true&&(this._flags&1)!=0)){c._module_image_intAAA[f][d]=null}else{c._module_image_imageAA[f][d]=null}}}}ASprite._poolCacheStack[this._cur_pool][h]=gloft.casttoshort(((b&1023)+(this._crt_pal<<10)));ASprite._poolCacheSprites[this._cur_pool][h]=this;ASprite._poolCacheStackIndex[this._cur_pool]=(ASprite._poolCacheStackIndex[this._cur_pool]+1)%ASprite._poolCacheStackMax[this._cur_pool];if(false){if(this._modules_image_shortAAA[this._crt_pal][b]==null||this._modules_image_shortAAA[this._crt_pal][b].length!=j){this._modules_image_shortAAA[this._crt_pal][b]=gloft.ArrayCreation([j],gloft.casttoshort(null))}var k=a;var l=this._modules_image_shortAAA[this._crt_pal][b];for(var e=0;e<j;++e){l[e]=k[e]}}else{if(false||(true&&(this._flags&1)!=0)){if(this._module_image_intAAA[this._crt_pal][b]==null||this._module_image_intAAA[this._crt_pal][b].length!=j){this._module_image_intAAA[this._crt_pal][b]=gloft.ArrayCreation([j],gloft.casttoint(null))}java.lang.System.arraycopy(a,0,this._module_image_intAAA[this._crt_pal][b],0,j)}else{this._module_image_imageAA[this._crt_pal][b]=a}}}},PaletteBlending_InitStatic:function(d,c,f,a,e){this._palBlend_UseOneColor=e;this._palBlend_srcA=d;this._palBlend_srcB=c;this._palBlend_dest=this.AllocateExtraPalette_dup_();this.PaletteBlending_SetBlend(f);if(a){this.BuildCacheImages(this._palBlend_dest,0,-1,-1)}return this._palBlend_dest},PaletteBlending_InitDynamic:function(g,f,d,a,c){this.PaletteBlending_InitStatic(g,f,d,a,c);if(true){this._palBlend_ModuleState=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));if(a){for(var e=0;e<this._nModules;++e){this._palBlend_ModuleState[e]=gloft.casttobyte(this._palBlend_current)}}}return this._palBlend_dest},PaletteBlending_SetBlend:function(a){if(a<0||a>255){GLLib.Assert(false,"PaletteBlending: Blend value must be [0,255]!")}a=((a<0)?0:((a>255)?255:a));if(a!=this._palBlend_current){this.PaletteBlending_BuildPalette_dup_I(a);this._palBlend_current=a}},PaletteBlending_GetBlend:function(){return this._palBlend_current},PaletteBlending_SynchCache:function(){if(true){if(this._palBlend_ModuleState==null){GLLib.Assert(false,"PaletteBlending: Can't synch cache if PaletteBlending_InitDynamic has never been called, or if dynamic has been released!")}var c=-1;var b=-1;for(var a=0;a<=this._nModules;++a){if(a<this._nModules&&this._palBlend_ModuleState[a]!=gloft.casttobyte(this._palBlend_current)){this._palBlend_ModuleState[a]=gloft.casttobyte(this._palBlend_current);if(c==-1){c=a}b=a}else{if(c!=-1){this.BuildCacheImages(this._crt_pal,c,b,-1);c=-1;b=-1}}}}},PaletteBlending_ReleaseDynamic:function(){if(true){this._palBlend_ModuleState=null}},PaletteBlending_BuildPalette_dup_I:function(a){return this.PaletteBlending_BuildPalette_dup_IIIIZ(a,this._palBlend_srcA,this._palBlend_srcB,this._palBlend_dest,this._palBlend_UseOneColor)},PaletteBlending_BuildPalette_dup_IIIIZ:function(c,j,i,h,l){if(!false){if(c<0||c>255){GLLib.Assert(false,"PaletteBlending: Blend value must be [0,255]!")}if(j<0||j>=this._palettes){GLLib.Assert(false,"PaletteBlending: Palette parameter 1 must be a valid palette")}if(h<0||h>=this._palettes){GLLib.Assert(false,"PaletteBlending: Palette parameter 3 must be a valid palette")}if(!l&&(i<0||i>=this._palettes)){GLLib.Assert(false,"PaletteBlending: Palette parameter 2 must be a valid palette")}var a=false;var k=this.GetPalette_dup_II(0,j);var o=this.GetPalette_dup_II(0,h);var g=this._colors[0];if(!l){a=this.PaletteBlending_BuildPalette_dup_IIaIaIaI(c,g,k,this.GetPalette_dup_II(0,i),o)}else{var f=(i&16711935)*c;var e=(i>>8&16711935)*c;c=256-c;while(--g>=0){if((k[g]&16777215)==16711935){a=true;o[g]=16711935}else{o[g]=((k[g]&16711935)*c+f>>8&16711935);var m=o;var d=g;m[d]|=((k[g]>>8&16711935)*c+e&-16711936);if((o[g]&-16777216)==-16777216){continue}a=true}}}return a||this._alpha}return false},PaletteBlending_BuildPalette_dup_IIaIaIaI:function(a,g,h,k,j){if(!false){if(a<0||a>255){GLLib.Assert(false,"PaletteBlending: Blend value must be [0,255]!")}if(h==null||h.length<g){GLLib.Assert(false,"PaletteBlending: Palette array palA must be a valid palette with min size: "+g)}if(k==null||k.length<g){GLLib.Assert(false,"PaletteBlending: Palette array palB must be a valid palette with min size: "+g)}if(j==null||j.length<g){GLLib.Assert(false,"PaletteBlending: Palette array palR must be a valid palette with min size: "+g)}var i=false;while(--g>=0){var f=h[g];if((f&16777215)==16711935){i=true;j[g]=16711935}else{var e=k[g];var d=f&16711935;j[g]=(d+(((e&16711935)-d)*a>>8)&16711935);var c=f>>8&16711935;j[g]|=((c<<8)+((e>>8&16711935)-c)*a&-16711936);if((j[g]&-16777216)==-16777216){continue}i=true}}return i}return false},BCI_InitCacheEffect:function(a){if(true&&ASprite.s_BCI_effects[0]==1){if(ASprite.s_BCI_effects[7]==-1){ASprite.s_BCI_effects[8]=this._nModules-1}else{ASprite.s_BCI_effects[8]=ASprite.s_BCI_effects[7]}if(ASprite.s_BCI_effects[1]==0){ASprite.s_BCI_effects[9]=a}else{if(ASprite.s_BCI_effects[9]<0){ASprite.s_BCI_effects[9]=this.AllocateExtraCache_dup_()}else{if(ASprite.s_BCI_effects[9]>=this._palettes){GLLib.Dbg("BCI_InitCacheEffect: CacheID parameter is out-of-range of the current valid cache's! Cache ID is "+ASprite.s_BCI_effects[9]+" while max num is "+this._palettes);GLLib.Dbg("BCI_InitCacheEffect: Assigning new cache ID and making new slot...");ASprite.s_BCI_effects[9]=this.AllocateExtraCache_dup_()}}}}},BCI_SetCacheWithEffect:function(g,f,e,d,c){if(true&&ASprite.s_BCI_effects[0]==1){var a=c>=ASprite.s_BCI_effects[6]&&c<=ASprite.s_BCI_effects[8];if(d==ASprite.s_BCI_effects[9]){if(a){GLLib.PFX_ApplyAlphaGradient(g,f,e,ASprite.s_BCI_effects[2],ASprite.s_BCI_effects[3],ASprite.s_BCI_effects[4],ASprite.s_BCI_effects[5],0)}this.SetCache_dup_aIIIII(g,f,e,d,c)}else{this.SetCache_dup_aIIIII(g,f,e,d,c);if(a){GLLib.PFX_ApplyAlphaGradient(g,f,e,ASprite.s_BCI_effects[2],ASprite.s_BCI_effects[3],ASprite.s_BCI_effects[4],ASprite.s_BCI_effects[5],0);this.SetCache_dup_aIIIII(g,f,e,ASprite.s_BCI_effects[9],c)}}}else{GLLib.Dbg("Unknown Cache Effect is set: "+ASprite.s_BCI_effects[0])}},BuildCacheFrames:function(a,m,l,o,h){if(m<0){GLLib.Assert(false,"BuildCacheFrames: First frame index is "+m+", it can't be negative!")}if(a<0){GLLib.Assert(false,"BuildCacheFrames: Palette index is "+a+", it can't be negative!")}if(a>=this._palettes){GLLib.Assert(false,"BuildCacheFrames: Palette index is "+a+", its out of bounds! Current number of palettes is "+this._palettes+".")}var c=this.GetFrameCount();if(l==-1||l>=c){l=c-1}if(false||(true&&(this._flags&1)!=0)){if(!o){if(this._frame_image_intAAA==null){this._frame_image_intAAA=gloft.ArrayCreation([this._palettes],gloft.casttoint(null))}if(this._frame_image_intAAA[a]==null){this._frame_image_intAAA[a]=gloft.ArrayCreation([c],gloft.casttoint(null))}for(var g=m;g<=l;++g){this._frame_image_intAAA[a][g]=this.BuildFrameRGB_dup_IIaIII(g,a,null,2,h)}}else{if(this._frame_image_byteAAA==null){this._frame_image_byteAAA=gloft.ArrayCreation([this._palettes],gloft.casttobyte(null))}if(this._frame_image_byteAAA[a]==null){this._frame_image_byteAAA[a]=gloft.ArrayCreation([c],gloft.casttobyte(null))}for(var e=m;e<=l;++e){this._frame_image_byteAAA[a][e]=this.BuildByteFrameRGB_dup_IIaIII(e,a,null,2,h)}}}else{if(this._frame_image_imageAAA==null){this._frame_image_imageAAA=gloft.ArrayCreation([this._palettes],null)}var f=this.GetCurrentMMapping()+1;if(this._frame_image_imageAAA[a]==null){this._frame_image_imageAAA[a]=gloft.ArrayCreation([this.GetMaxMMappingsLoaded()+1],null)}if(f>=this._frame_image_imageAAA[a].length){GLLib.Assert(false,"BuildCacheFrames: module map "+(f-1)+" was not loaded the first time that was cached a frame for this sprite")}if(this._frame_image_imageAAA[a][f]==null){this._frame_image_imageAAA[a][f]=gloft.ArrayCreation([c],null)}for(var d=m;d<=l;++d){this._frame_image_imageAAA[a][f][d]=this.BuildFrameImage(d,a,h)}}},BuildFrameImage:function(B,r,p){var c=this.GetFrameWidth(B);var z=this.GetFrameHeight(B);if(true&&(GLLib.s_PFX_type&1<<13)!=0){var m=GLLib.s_PFX_params[13][1];var j=(m!=100)?m:GLLib.s_PFX_params[13][3];var h=GLLib.s_PFX_params[13][1];var g=(h!=100)?h:GLLib.s_PFX_params[13][4];c=gloft.casttoint(c*j/100);z=gloft.casttoint(z*g/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var f=GLLib.s_PFX_params[17][1];var e=(f!=100)?f:GLLib.s_PFX_params[17][3];var x=GLLib.s_PFX_params[17][1];var w=(x!=100)?x:GLLib.s_PFX_params[17][4];c=gloft.casttoint(c*e/100);z=gloft.casttoint(z*w/100)}}if(c==0||z==0){return null}var d=this.BuildFrameRGB_dup_IIaIII(B,r,null,2,p);if(false){p=(ASprite.TRANSFORM_ROT_90[p&7]|(p&-8))}if(d==null){return null}if((p&4)!=0){var l=d;var v=z;var u=c;var a=ASprite.s_frame_image_bHasAlpha;var t=u;var s=v;var E=l;var b=null;if(false){b=javax.microedition.lcdui.Image.createRGBImage(E,s,t,true)}else{b=javax.microedition.lcdui.Image.createRGBImage(E,s,t,a)}return b}var D=d;var q=c;var o=z;var y=ASprite.s_frame_image_bHasAlpha;var k=o;var i=q;var C=D;var A=null;if(false){A=javax.microedition.lcdui.Image.createRGBImage(C,i,k,true)}else{A=javax.microedition.lcdui.Image.createRGBImage(C,i,k,y)}return A},BuildFrameRGB_dup_IIaI:function(c,a,b){return this.BuildFrameRGB_dup_IIaIII(c,a,b,2,0)},BuildFrameRGB_dup_IIaIII:function(F,x,q,v,t){var a=false;var e=this.GetFrameWidth(F);var E=this.GetFrameHeight(F);var K=this.GetFrameMinX(F);var J=this.GetFrameMinY(F);if((t&1)!=0){K=-K-e}if((t&2)!=0){J=-J-E}if((t&4)!=0){var r=K;K=-J-E;J=r}var o=K*-1;var m=J*-1;if(true&&(GLLib.s_PFX_type&1<<13)!=0){var l=GLLib.s_PFX_params[13][1];var h=(l!=100)?l:GLLib.s_PFX_params[13][3];var f=GLLib.s_PFX_params[13][1];var D=(f!=100)?f:GLLib.s_PFX_params[13][4];e=gloft.casttoint(e*h/100);E=gloft.casttoint(E*D/100);o=gloft.casttoint(o*h/100);m=gloft.casttoint(m*D/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var B=GLLib.s_PFX_params[17][1];var A=(B!=100)?B:GLLib.s_PFX_params[17][3];var z=GLLib.s_PFX_params[17][1];var y=(z!=100)?z:GLLib.s_PFX_params[17][4];e=gloft.casttoint(e*A/100);E=gloft.casttoint(E*y/100);o=gloft.casttoint(o*A/100);m=gloft.casttoint(m*y/100)}}var H=e*E;if(e==0||E==0){return q}if(q==null||q.length<H){q=gloft.ArrayCreation([H],gloft.casttoint(null))}var I=this._crt_pal;this._crt_pal=x;var w=t;if(false){t=(ASprite.TRANSFORM_ROT_90[t&7]|(t&-8))}if(true){if(!true){GLLib.Assert(false,"BuildFrameRGB: sprite_useCacheFramesWithCustomBlit is set to TRUE but sprite_allowPixelArrayGraphics is FALSE, please enable it!")}if(this._isExtraPaletteExist){for(var G=0;G<H;++G){q[G]=this._palTransparencyIndex}}ASprite.SetGraphics_dup_aIIII(q,e,E,v);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(GLLib.g,F,o,m,w,0,0);ASprite.SetGraphics_dup_aIIII(null,0,0,2);ASprite.s_frame_image_bHasAlpha=true}else{if((t&4)!=0){var u=e;e=E;E=u}var b=javax.microedition.lcdui.Image.createImage(e,E);var k=b.getGraphics();k.setColor(-65281);k.fillRect(0,0,e,E);if((t&4)!=0){var d=E;var g=e;ASprite._graphicsWidth=d;ASprite._graphicsHeight=g}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(k,F,o,m,w,0,0);if((t&4)!=0){var c=GLLib.s_screenWidth;var C=GLLib.s_screenHeight;ASprite._graphicsWidth=c;ASprite._graphicsHeight=C}GLLib.GetRGB(b,q,0,e,0,0,e,E);var s=16711935;var p=(-1!=-1&&(s&16777215)==16711935)?-1:GLLib.g.getDisplayColor(s);while(H>0){--H;if((q[H]&16777215)==p){q[H]=16711935;a=true}}ASprite.s_frame_image_bHasAlpha=a}this._crt_pal=I;return q},BuildFrameRGB_dup_IIaIZ:function(e,b,a,c){var d=this._cachedFrameIsOpaque;this._cachedFrameIsOpaque=c;a=this.BuildFrameRGB_dup_IIaI(e,b,a);this._cachedFrameIsOpaque=d;return a},BuildByteFrameRGB_dup_IIaI:function(c,a,b){return this.BuildByteFrameRGB_dup_IIaIII(c,a,b,2,0)},BuildByteFrameRGB_dup_IIaIII:function(h,e,g,b,a){var f=null;var d=this.BuildFrameRGB_dup_IIaIII(h,e,g,b,0);if(d!=null){f=gloft.ArrayCreation([d.length],gloft.casttobyte(null));for(var c=0;c<d.length;++c){f[c]=gloft.casttobyte((d[c]&255))}}return f},BuildByteFrameRGB_dup_IIaIZ:function(f,a,e,c){var d=this._cachedFrameIsOpaque;this._cachedFrameIsOpaque=c;var b=this.BuildByteFrameRGB_dup_IIaI(f,a,e);this._cachedFrameIsOpaque=d;return b},BuildByteCacheFrames:function(c,b,a){this.BuildCacheFrames(c,b,a,true,0)},GetFrameRGB_dup_II:function(b,a){return this.GetFrameRGB_dup_IIZ(b,this._crt_pal,false)},GetFrameRGB_dup_IIZ:function(d,c,a){if(this._frame_image_intAAA!=null&&this._frame_image_intAAA[c]!=null){return this._frame_image_intAAA[c][d]}if(a){return this.BuildFrameRGB_dup_IIaIII(d,c,null,2,0)}return null},GetByteFrameRGB:function(b,a){if(this._frame_image_byteAAA==null||this._frame_image_byteAAA[a]==null){return null}return this._frame_image_byteAAA[a][b]},GetFrameImage:function(c,b){if(this._frame_image_imageAAA==null||this._frame_image_imageAAA[b]==null){return null}var a=this.GetCurrentMMapping()+1;if(a>=this._frame_image_imageAAA[b].length){GLLib.Assert(false,"GetFrameImage: module map "+(a-1)+" was not loaded the first time that was cached a frame for this sprite")}return this._frame_image_imageAAA[b][a][c]},IsFrameCached:function(c,b){var a=this.GetCurrentMMapping()+1;if(this._frame_image_imageAAA!=null&&this._frame_image_imageAAA[b]!=null&&a>=this._frame_image_imageAAA[b].length){GLLib.Assert(false,"IsFrameCached: module map "+(a-1)+" was not loaded the first time that was cached a frame for this sprite")}return(this._frame_image_imageAAA!=null&&this._frame_image_imageAAA[b]!=null&&this._frame_image_imageAAA[b][a][c]!=null)||(this._frame_image_intAAA!=null&&this._frame_image_intAAA[b]!=null&&this._frame_image_intAAA[b][c]!=null)||(this._frame_image_byteAAA!=null&&this._frame_image_byteAAA[b]!=null&&this._frame_image_byteAAA[b][c]!=null)||(false&&this._frame_image_byteAA!=null&&this._frame_image_byteAA[c]!=null)},FreeCachedFrames:function(){if(false||(true&&(this._flags&1)!=0)){if(this._frame_image_intAAA!=null){for(var e=0;e<this._frame_image_intAAA.length;++e){this._frame_image_intAAA[e]=null}}if(this._frame_image_byteAAA!=null){for(var c=0;c<this._frame_image_byteAAA.length;++c){this._frame_image_byteAAA[c]=null}}}else{if(this._frame_image_imageAAA!=null){for(var b=0;b<this._frame_image_imageAAA.length;++b){if(this._frame_image_imageAAA[b]!=null){for(var a=0;a<this._frame_image_imageAAA[b].length;++a){this._frame_image_imageAAA[b][a]=null}this._frame_image_imageAAA[b]=null}}this._frame_image_imageAAA=null}}if(false&&this._frame_image_byteAA!=null){for(var f=0;f<this._frame_image_byteAA.length;++f){this._frame_image_byteAA[f]=null}this._frame_image_byteAA=null}if(false&&this._frame_data!=null){for(var d=0;d<this._frame_data.length;++d){this._frame_data[d]=null}}},BuildPaletteIndexCacheFrames:function(z,p){if(z<0){GLLib.Assert(false,"BuildPaletteIndexCacheFrames: First frame index is "+z+", it can't be negative!")}if(!false){GLLib.Assert(false,"BuildPaletteIndexCacheFrames: you must enable sprite_usePaletteIndexCache to use this.")}if(!true){GLLib.Assert(false,"BuildPaletteIndexCacheFrames: you must enable sprite_useCachedFrames to cache the frames.")}if(!true){GLLib.Assert(false,"BuildPaletteIndexCacheFrames: you must enable sprite_allowPixelArrayGraphics to cache the frames.")}if((this._bs_flags&1073741824)!=0){GLLib.Assert(false,"BuildPaletteIndexCacheFrames do not supported multiple images sprites")}var D=this.GetFrameCount();if(p==-1||p>=D){p=D-1}if(this._frame_image_byteAA==null){this._frame_image_byteAA=gloft.ArrayCreation([D],gloft.casttobyte(null))}if(ASprite._frame_image_temp==null){ASprite._frame_image_temp=gloft.ArrayCreation([256],gloft.casttoint(null))}var l=-1;var w=this.GetCurrentPalette_dup_();var y=null;var B=null;var A=null;var j=this._colors[0];this.SetCurrentPalette_dup_I(0);if(false){B=gloft.ArrayCreation([j],gloft.casttoshort(null));var h=this.GetPalette_dup_II(0,0);java.lang.System.arraycopy(h,0,B,0,j);var f=j;while(--f>=0){if(h[f]==3855){l=f;h[f]=0}else{h[f]=gloft.casttoshort((f|61440))}}}else{y=gloft.ArrayCreation([j],gloft.casttoint(null));A=this.GetPalette_dup_II(0,0);java.lang.System.arraycopy(A,0,y,0,j);var e=j;while(--e>=0){if(A[e]==16711935){l=e;A[e]=l}else{A[e]=(e|-16777216)}}}if(l==-1){l=0;GLLib.Dbg("WARNING_BuildPaletteIndexCacheFrames(): Sprite does not contain transparent color (0x00FF00FF) in it's palette!")}this._flags&=-9;for(var C=z;C<=p;++C){var d=this.GetFrameWidth(C)*this.GetFrameHeight(C);if(d>256){GLLib.Assert(false,"BuildPaletteIndexCacheFrames: Frame WxH > _frame_image_temp.length ("+this.GetFrameWidth(C)+" x "+this.GetFrameHeight(C)+" = "+this.GetFrameWidth(C)*this.GetFrameHeight(C)+" > "+ASprite._frame_image_temp.length+")! Either decrease frame size or increase GLLibConfig.sprite_tmpFrameBufferSize!")}this._frame_image_byteAA[C]=gloft.ArrayCreation([d],gloft.casttobyte(null));GLLib.Mem_FillArray(ASprite._frame_image_temp,l);var a=this.GetFrameWidth(C);var x=this.GetFrameHeight(C);var c=-this.GetFrameMinX(C);var b=-this.GetFrameMinY(C);if(true&&(GLLib.s_PFX_type&1<<13)!=0){var v=GLLib.s_PFX_params[13][1];var u=(v!=100)?v:GLLib.s_PFX_params[13][3];var t=GLLib.s_PFX_params[13][1];var s=(t!=100)?t:GLLib.s_PFX_params[13][4];a=gloft.casttoint(a*u/100);x=gloft.casttoint(x*s/100);c=gloft.casttoint(c*u/100);b=gloft.casttoint(b*s/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var r=GLLib.s_PFX_params[17][1];var q=(r!=100)?r:GLLib.s_PFX_params[17][3];var m=GLLib.s_PFX_params[17][1];var k=(m!=100)?m:GLLib.s_PFX_params[17][4];a=gloft.casttoint(a*q/100);x=gloft.casttoint(x*k/100);c=gloft.casttoint(c*q/100);b=gloft.casttoint(b*k/100)}}ASprite.SetGraphics_dup_aIIII(ASprite._frame_image_temp,a,x,2);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(GLLib.g,C,c,b,0,0,0);ASprite.SetGraphics_dup_aIIII(null,0,0,2);var E=this._frame_image_byteAA[C];var g=d;while(--g>=0){E[g]=gloft.casttobyte((ASprite._frame_image_temp[g]&255))}}this._flags|=8;this.SetCurrentPalette_dup_I(w);if(false){java.lang.System.arraycopy(B,0,A,0,j)}else{java.lang.System.arraycopy(y,0,A,0,j)}},GetPalIndexCachedFrameRGB:function(f,b){if(f<0){GLLib.Assert(false,"GetPalIndexCachedFrameRGB: frame "+f+" should not be negative.")}if(b<0){GLLib.Assert(false,"GetPalIndexCachedFrameRGB: palette index "+b+" should not be negative.")}if(!false){GLLib.Assert(false,"GetPalIndexCachedFrameRGB: you must enable sprite_usePaletteIndexCache to use this.")}var e=this._frame_image_byteAA[f];var d=e.length;if(ASprite._frame_image_temp==null){ASprite._frame_image_temp=gloft.ArrayCreation([256],gloft.casttoint(null))}if(this.GetFrameWidth(f)*this.GetFrameHeight(f)>256){GLLib.Assert(false,"GetPalIndexCachedFrameRGB: Frame WxH > _frame_image_temp.length ("+this.GetFrameWidth(f)+" x "+this.GetFrameHeight(f)+" = "+this.GetFrameWidth(f)*this.GetFrameHeight(f)+" > "+ASprite._frame_image_temp.length+")! Either decrease frame size or increase GLLibConfig.sprite_tmpFrameBufferSize!")}if(false){while(--d>=0){}}else{var c=this.GetPalette_dup_II(0,b);var a=d;while(--a>=0){ASprite._frame_image_temp[a]=c[e[a]&255]}}return ASprite._frame_image_temp},DecodeImage:function(a){if(true){return this.DecodeImage_int(a)}if(false){return this.DecodeImage_short(a)}return this.DecodeImage_byte_dup_I(a)},DecodeImage_int:function(a){if(true){if(this.IsModuleDataValid(a)){if(this.DecodeImage_Algorithm(this.GetModuleImageIndex(a),this.GetModuleData_dup_I(a),this.GetStartModuleData(a,0),true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255),true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))){return ASprite.temp_int}}}else{GLLib.Dbg("DecodeImage_int: sprite_useCreateRGB is FALSE, can't use this function!")}return null},DecodeImage_short:function(a){if(false&&this.IsModuleDataValid(a)&&this.DecodeImage_Algorithm(this.GetModuleImageIndex(a),this.GetModuleData_dup_I(a),this.GetStartModuleData(a,0),true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255),true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))){return ASprite.temp_short}return null},DecodeImage_byte_dup_I:function(a){if(this.IsModuleDataValid(a)&&this.DecodeImage_Algorithm(this.GetModuleImageIndex(a),this.GetModuleData_dup_I(a),this.GetStartModuleData(a,0),true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255),true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))){return ASprite.temp_byte}return null},DecodeImage_byte_dup_IaBIII:function(e,d,c,b,a){if(this.DecodeImage_Algorithm(e,d,c,b,a)){return ASprite.temp_byte}return null},DecodeImage_Algorithm:function(Y,q,N,M,L){var ac=0;var K=M*L;if(true){if(ASprite.temp_int==null){ASprite.temp_int=gloft.ArrayCreation([35000],gloft.casttoint(null))}if(M*L>ASprite.temp_int.length){GLLib.Assert(false,"DecodeImage_Algorithm: Module WxH > temp_int.length ("+M+" x "+L+" = "+M*L+" > "+ASprite.temp_int.length+")! Either decrease module size or increase GLLibConfig.TMP_BUFFER_SIZE!")}}else{if(false){if(ASprite.temp_short==null){ASprite.temp_short=gloft.ArrayCreation([35000],gloft.casttoshort(null))}if(M*L>ASprite.temp_short.length){GLLib.Assert(false,"DecodeImage_Algorithm: Module WxH > temp_short.length ("+M+" x "+L+" = "+M*L+" > "+ASprite.temp_short.length+")!  Either decrease module size or increase GLLibConfig.TMP_BUFFER_SIZE!")}}else{if(ASprite.temp_byte==null){ASprite.temp_byte=gloft.ArrayCreation([35000],gloft.casttobyte(null))}if(M*L>ASprite.temp_byte.length){GLLib.Assert(false,"DecodeImage_Algorithm: Module WxH > temp_byte.length ("+M+" x "+L+" = "+M*L+" > "+ASprite.temp_byte.length+")!  Either decrease module size or increase GLLibConfig.TMP_BUFFER_SIZE!")}}}var z=null;var x=null;if(true){x=this.GetPalette_dup_II(Y,this.GetCurrentPalette_dup_I(Y));if(x==null){return false}}else{if(false){z=this.GetPalette_dup_II(Y,this.GetCurrentPalette_dup_I(Y));if(z==null){return false}}}var J=0;var I=0;var ad=0;if(true&&this._data_format==25840){while(ac<K){var H=q[N++]&255;if(true){J=x[H&this._i64rle_color_mask[Y]]}else{if(false){I=z[H&this._i64rle_color_mask[Y]]}else{ad=gloft.casttobyte((H&this._i64rle_color_mask[Y]))}}var G=H>>this._i64rle_color_bits[Y];while(G-->=0){if(true){ASprite.temp_int[ac++]=J}else{if(false){ASprite.temp_short[ac++]=I}else{ASprite.temp_byte[ac++]=ad}}}}}else{if(true&&this._data_format==10225){while(ac<K){var X=q[N++]&255;if(X>127){var W=q[N++]&255;if(true){J=x[W]}else{if(false){I=z[W]}else{ad=gloft.casttobyte(W)}}X-=128;while(X-->0){if(true){ASprite.temp_int[ac++]=J}else{if(false){ASprite.temp_short[ac++]=I}else{ASprite.temp_byte[ac++]=ad}}}}else{if(true){ASprite.temp_int[ac++]=x[X]}else{if(false){ASprite.temp_short[ac++]=z[X]}else{ASprite.temp_byte[ac++]=gloft.casttobyte(X)}}}}}else{if(true&&this._data_format==22258){--N;--ac;--K;while(ac<K){var V=q[++N];if(V<0){V+=128;do{if(true){ASprite.temp_int[++ac]=x[q[++N]&255]}else{if(false){ASprite.temp_short[++ac]=z[q[++N]&255]}else{ASprite.temp_byte[++ac]=gloft.casttobyte((q[++N]&255))}}}while(--V>0)}else{if(true){J=x[q[++N]&255]}else{if(false){I=z[q[++N]&255]}else{ad=gloft.casttobyte((q[++N]&255))}}do{if(true){ASprite.temp_int[++ac]=J}else{if(false){ASprite.temp_short[++ac]=I}else{ASprite.temp_byte[++ac]=ad}}}while(--V>0)}}}else{if(true&&this._data_format==5632){var U=K+(((K&1)==0)?0:2)>>1;while(--U>=0){var F=q[N++];if(true){ASprite.temp_int[ac++]=x[F>>4&15];ASprite.temp_int[ac++]=x[F&15]}else{if(false){ASprite.temp_short[ac++]=z[F>>4&15];ASprite.temp_short[ac++]=z[F&15]}else{ASprite.temp_byte[ac++]=gloft.casttobyte((F>>4&15));ASprite.temp_byte[ac++]=gloft.casttobyte((F&15))}}}}else{if(false&&this._data_format==1024){var T=K+(((K&3)==0)?0:4)>>2;while(--T>=0){var E=q[N++];if(true){ASprite.temp_int[ac++]=x[E>>6&3];ASprite.temp_int[ac++]=x[E>>4&3];ASprite.temp_int[ac++]=x[E>>2&3];ASprite.temp_int[ac++]=x[E&3]}else{if(false){ASprite.temp_short[ac++]=z[E>>6&3];ASprite.temp_short[ac++]=z[E>>4&3];ASprite.temp_short[ac++]=z[E>>2&3];ASprite.temp_short[ac++]=z[E&3]}else{ASprite.temp_byte[ac++]=gloft.casttobyte((E>>6&3));ASprite.temp_byte[ac++]=gloft.casttobyte((E>>4&3));ASprite.temp_byte[ac++]=gloft.casttobyte((E>>2&3));ASprite.temp_byte[ac++]=gloft.casttobyte((E&3))}}}}else{if(false&&this._data_format==512){var S=K+(((K&7)==0)?0:8)>>3;while(--S>=0){var D=q[N++];if(true){ASprite.temp_int[ac++]=x[D>>7&1];ASprite.temp_int[ac++]=x[D>>6&1];ASprite.temp_int[ac++]=x[D>>5&1];ASprite.temp_int[ac++]=x[D>>4&1];ASprite.temp_int[ac++]=x[D>>3&1];ASprite.temp_int[ac++]=x[D>>2&1];ASprite.temp_int[ac++]=x[D>>1&1];ASprite.temp_int[ac++]=x[D&1]}else{if(false){ASprite.temp_short[ac++]=z[D>>7&1];ASprite.temp_short[ac++]=z[D>>6&1];ASprite.temp_short[ac++]=z[D>>5&1];ASprite.temp_short[ac++]=z[D>>4&1];ASprite.temp_short[ac++]=z[D>>3&1];ASprite.temp_short[ac++]=z[D>>2&1];ASprite.temp_short[ac++]=z[D>>1&1];ASprite.temp_short[ac++]=z[D&1]}else{ASprite.temp_byte[ac++]=gloft.casttobyte((D>>7&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>6&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>5&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>4&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>3&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>2&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D>>1&1));ASprite.temp_byte[ac++]=gloft.casttobyte((D&1))}}}}else{if(true&&this._data_format==22018){while(--K>=0){if(true){ASprite.temp_int[ac++]=x[q[N++]&255]}else{if(false){ASprite.temp_short[ac++]=z[q[N++]&255]}else{ASprite.temp_byte[ac++]=gloft.casttobyte((q[N++]&255))}}}}else{if(true&&this._data_format==-23198){while(--K>=0){if(true){ASprite.temp_int[ac++]=((q[N++]&255)<<24|(x[q[N++]&255]&16777215))}else{if(false){ASprite.temp_short[ac++]=gloft.casttoshort(((q[N++]&240)<<8|(z[q[N++]&255]&4095)))}else{ASprite.temp_byte[ac++]=gloft.casttobyte((q[N++]&255))}}}}else{if(false&&this._data_format==933){while(--K>=0){if(true){ASprite.temp_int[ac++]=((q[N]&224)<<24|(x[q[N]&31]&16777215))}else{if(false){ASprite.temp_short[ac++]=gloft.casttoshort(((q[N]&224)<<8|(z[q[N]&31]&4095)))}else{ASprite.temp_byte[ac++]=gloft.casttobyte((q[N]&255))}}++N}}else{if(false&&this._data_format==1443){while(--K>=0){if(true){ASprite.temp_int[ac++]=((q[N]&248)<<24|(x[q[N]&7]&16777215))}else{if(false){ASprite.temp_short[ac++]=gloft.casttoshort(((q[N]&240)<<8|(z[q[N]&7]&4095)))}else{ASprite.temp_byte[ac++]=gloft.casttobyte((q[N]&255))}}++N}}else{if(false&&this._data_format==-24476){var R=0;while(ac<K){switch(R){case 0:ASprite.temp_int[ac]=(q[N]&252)>>2;++ac;break;case 1:ASprite.temp_int[ac]=(q[N]&3)<<4;++N;ASprite.temp_int[ac]|=(q[N]&240)>>4;++ac;break;case 2:ASprite.temp_int[ac]=(q[N]&15)<<2;++N;ASprite.temp_int[ac]|=(q[N]&192)>>6;++ac;break;case 3:ASprite.temp_int[ac]=(q[N]&63);++ac;++N;R=-1;break}++R}var Q=0;while(--K>=0){if(true){ASprite.temp_int[Q]=((q[N++]&255)<<24|(x[ASprite.temp_int[Q]&255]&16777215));++Q}else{if(false){ASprite.temp_short[Q]=gloft.casttoshort(((q[N++]&240)<<8|(z[q[Q]&255]&4095)));++Q}else{ASprite.temp_byte[Q++]=gloft.casttobyte((q[N++]&255))}}}}else{if(false&&this._data_format==-24280){var P=0;while(ac<K){switch(P){case 0:ASprite.temp_int[ac]=(q[N]&254)>>1;++ac;break;case 1:ASprite.temp_int[ac]=(q[N]&1)<<6;++N;ASprite.temp_int[ac]|=(q[N]&252)>>2;++ac;break;case 2:ASprite.temp_int[ac]=(q[N]&3)<<5;++N;ASprite.temp_int[ac]|=(q[N]&248)>>3;++ac;break;case 3:ASprite.temp_int[ac]=(q[N]&7)<<4;++N;ASprite.temp_int[ac]|=(q[N]&240)>>4;++ac;break;case 4:ASprite.temp_int[ac]=(q[N]&15)<<3;++N;ASprite.temp_int[ac]|=(q[N]&224)>>5;++ac;break;case 5:ASprite.temp_int[ac]=(q[N]&31)<<2;++N;ASprite.temp_int[ac]|=(q[N]&192)>>6;++ac;break;case 6:ASprite.temp_int[ac]=(q[N]&63)<<1;++N;ASprite.temp_int[ac]|=(q[N]&128)>>7;++ac;break;case 7:ASprite.temp_int[ac]=(q[N]&127);++N;++ac;P=-1;break}++P}var O=0;while(--K>=0){if(true){ASprite.temp_int[O]=((q[N++]&255)<<24|(x[ASprite.temp_int[O]&255]&16777215));++O}else{if(false){ASprite.temp_short[O]=gloft.casttoshort(((q[N++]&240)<<8|(z[q[O]&255]&4095)));++O}else{ASprite.temp_byte[O++]=gloft.casttobyte((q[N++]&255))}}}}else{if(true&&this._data_format==-22976){while(ac<K){var C=q[N++]&255;if(true){J=x[C&this._i64rle_color_mask[Y]]}else{if(false){I=z[C&this._i64rle_color_mask[Y]]}else{ad=gloft.casttobyte((C&this._i64rle_color_mask[Y]))}}var B=C>>this._i64rle_color_bits[Y];while(B-->=0){if(true){ASprite.temp_int[ac++]=J}else{if(false){ASprite.temp_short[ac++]=I}else{ASprite.temp_byte[ac++]=ad}}}}var ab=0;while(ab<K){var A=q[N++]&255;if(A==254){var y=q[N++]&255;var w=q[N++]&255;while(y-->0){if(true){ASprite.temp_int[ab]=(w<<24|(ASprite.temp_int[ab]&16777215));++ab}else{if(!false){continue}ASprite.temp_short[ab]=gloft.casttoshort(((w&240)<<8|(ASprite.temp_short[ab]&4095)));++ab}}}else{if(true){ASprite.temp_int[ab]=(A<<24|(ASprite.temp_int[ab]&16777215));++ab}else{if(!false){continue}ASprite.temp_short[ab]=gloft.casttoshort(((A&240)<<8|(ASprite.temp_short[ab]&4095)));++ab}}}}else{if(true&&this._data_format==-24281){while(ac<K){var v=q[N++]&255;if(v>127){var u=q[N++]&255;if(true){J=x[u]}else{if(false){I=z[u]}else{ad=gloft.casttobyte(u)}}v-=128;while(v-->0){if(true){ASprite.temp_int[ac++]=J}else{if(false){ASprite.temp_short[ac++]=I}else{ASprite.temp_byte[ac++]=ad}}}}else{if(true){ASprite.temp_int[ac++]=x[v]}else{if(false){ASprite.temp_short[ac++]=z[v]}else{ASprite.temp_byte[ac++]=gloft.casttobyte(v)}}}}var aa=0;while(aa<K){var t=q[N++]&255;if(t==254){var s=q[N++]&255;var r=q[N++]&255;while(s-->0){if(true){ASprite.temp_int[aa]=(r<<24|(ASprite.temp_int[aa]&16777215));++aa}else{if(!false){continue}ASprite.temp_short[aa]=gloft.casttoshort(((r&240)<<8|(ASprite.temp_short[aa]&4095)));++aa}}}else{if(true){ASprite.temp_int[aa]=(t<<24|(ASprite.temp_int[aa]&16777215));++aa}else{if(!false){continue}ASprite.temp_short[aa]=gloft.casttoshort(((t&240)<<8|(ASprite.temp_short[aa]&4095)));++aa}}}}else{if(true&&this._data_format==-23978){while(ac<K){var p=q[N++]&255;if(p>127){p-=128;while(p-->0){if(true){ASprite.temp_int[ac++]=x[q[N++]&255]}else{if(false){ASprite.temp_short[ac++]=z[q[N++]&255]}else{ASprite.temp_byte[ac++]=gloft.casttobyte((q[N++]&255))}}}}else{if(true){J=x[q[N++]&255]}else{if(false){I=z[q[N++]&255]}else{ad=gloft.casttobyte((q[N++]&255))}}while(p-->0){if(true){ASprite.temp_int[ac++]=J}else{if(false){ASprite.temp_short[ac++]=I}else{ASprite.temp_byte[ac++]=ad}}}}}var Z=0;while(Z<K){var o=q[N++]&255;if(o==254){var m=q[N++]&255;var h=q[N++]&255;while(m-->0){if(true){ASprite.temp_int[Z]=(h<<24|(ASprite.temp_int[Z]&16777215));++Z}else{if(!false){continue}ASprite.temp_short[Z]=gloft.casttoshort(((h&240)<<8|(ASprite.temp_short[Z]&4095)));++Z}}}else{if(true){ASprite.temp_int[Z]=(o<<24|(ASprite.temp_int[Z]&16777215));++Z}else{if(!false){continue}ASprite.temp_short[Z]=gloft.casttoshort(((o&240)<<8|(ASprite.temp_short[Z]&4095)));++Z}}}}else{switch(this._data_format){case 512:GLLib.Dbg("    -. ENCODE_FORMAT_I2");break;case 1024:GLLib.Dbg("    -. ENCODE_FORMAT_I4");break;case 5632:GLLib.Dbg("    -. ENCODE_FORMAT_I16");break;case 22018:GLLib.Dbg("    -. ENCODE_FORMAT_I256");break;case 25840:GLLib.Dbg("    -. ENCODE_FORMAT_I64RLE");break;case 10225:GLLib.Dbg("    -. ENCODE_FORMAT_I127RLE");break;case 22258:GLLib.Dbg("    -. ENCODE_FORMAT_I256RLE");break;case -22976:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I64RLE");break;case -24281:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I127RLE");break;case -23978:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I256RLE");break;case -24476:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I64");break;case -24280:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I128");break;case -23198:GLLib.Dbg("    -. ENCODE_FORMAT_A256_I256");break;case 933:GLLib.Dbg("    -. ENCODE_FORMAT_A8_I32");break;case 1443:GLLib.Dbg("    -. ENCODE_FORMAT_A32_I8");break}GLLib.Assert(false,"ERROR : sprite encoding for "+java.lang.Integer.toHexString(this._data_format)+" is not enabled. Check sprite_useEncodeFormat in GllibConfiguration")}}}}}}}}}}}}}}}if(false){if(true){J=0;for(var g=0;g<x.length;++g){if(x[g]>>24==0){J=g;break}}}else{if(false){I=0;for(var f=0;f<z.length;++f){if(z[f]>>24==0){I=gloft.casttoshort(f);break}}}else{ad=0;for(var e=0;e<x.length;++e){if(x[e]>>24==0){ad=gloft.casttobyte(e);break}}}}var d=M+M%2;if(L+L%2!=L){for(var c=0;c<d;++c){if(true){ASprite.temp_int[L*d+c]=J}else{if(false){ASprite.temp_short[L*d+c]=I}else{ASprite.temp_byte[L*d+c]=ad}}}}for(var a=L-1;a>=0;--a){if(true){java.lang.System.arraycopy(ASprite.temp_int,M*a,ASprite.temp_int,d*a,M);if(d!=M){ASprite.temp_int[a*d+M]=J}}else{if(false){java.lang.System.arraycopy(ASprite.temp_short,M*a,ASprite.temp_short,d*a,M);if(d!=M){ASprite.temp_short[a*d+M]=I}}else{java.lang.System.arraycopy(ASprite.temp_byte,M*a,ASprite.temp_byte,d*a,M);if(d!=M){ASprite.temp_byte[a*d+M]=ad}}}}}return true},DecodeImageToByteArray:function(e,O,T,v){if(!this.IsModuleDataValid(O)){return}var D=true?(this._modules_w_short[O]&65535):(this._modules_w_byte[O]&255);var C=true?(this._modules_h_short[O]&65535):(this._modules_h_byte[O]&255);if(e==null){return}var B=gloft.casttoint(null);if(T){B=4}else{B=3}if(!this.DecodeImage_Algorithm(this.GetModuleImageIndex(O),this.GetModuleData_dup_I(O),this.GetStartModuleData(O,0),D,C)){return}if(true){var r=gloft.ArrayCreation([D*C*B],gloft.casttobyte(null));for(var S=0;S<C;++S){for(var R=0;R<D;++R){var A=R+S*D;r[A*B+0]=gloft.casttobyte((ASprite.temp_int[A]>>0&255));r[A*B+1]=gloft.casttobyte((ASprite.temp_int[A]>>8&255));r[A*B+2]=gloft.casttobyte((ASprite.temp_int[A]>>16&255));if(B==4){r[A*B+3]=gloft.casttobyte((ASprite.temp_int[A]>>24&255))}}}var z=D>>1;var y=C>>1;var x=0;var w=0;var N=0;var M=0;var L=0;if(v){for(var Q=0;Q<y;++Q){for(var P=0;P<z;++P){var K=Q*2*B*D+P*2*B;var J=r[K]&255;var I=r[K+1]&255;var H=r[K+2]&255;if(B==4){x=(r[K+3]&255)}var G=K+B;var F=r[G]&255;var E=r[G+1]&255;var u=r[G+2]&255;if(B==4){w=(r[G+3]&255)}var t=(Q*2+1)*B*D+P*2*B;var s=r[t]&255;var q=r[t+1]&255;var p=r[t+2]&255;if(B==4){N=(r[t+3]&255)}var o=t+B;var m=r[o]&255;var h=r[o+1]&255;var g=r[o+2]&255;if(B==4){M=(r[o+3]&255)}var f=J+F+s+m>>2;var d=I+E+q+h>>2;var c=H+u+p+g>>2;var a=x+w+N+M>>2;r[L++]=gloft.casttobyte((f&255));r[L++]=gloft.casttobyte((d&255));r[L++]=gloft.casttobyte((c&255));if(B==4){r[L++]=gloft.casttobyte((a&255))}}}}}},ConvertCompressedData_I256_I256RLE:function(o,k){if(this._modules_data_array==null){return}if(this._data_format!=22018){GLLib.Dbg("ConvertCompressedData: No action done. Unsupported source encoding conversion: 0x"+java.lang.Integer.toHexString(this._data_format)+". Only I256 is currently supported)!");return}var h=ASprite.s_isConvertEncodeTMPBufOn?1:0;if(false){if(o){if(k==null){if(h!=0){k=ASprite.s_convertEncodeTMPBuffer}else{k=gloft.ArrayCreation([35000],gloft.casttobyte(null))}}else{h=0}}for(var f=0;f<this._nModules;++f){try{var r=this._modules_data_array[f];if(r!=null){if(o){if(h!=0){var e=r.length;if(ASprite.s_convertEncodeTMPBuffer==null||ASprite.s_convertEncodeTMPBuffer.length<e+10){ASprite.s_convertEncodeTMPBuffer=gloft.ArrayCreation([e+10],gloft.casttobyte(null));k=ASprite.s_convertEncodeTMPBuffer}}}else{k=r}var g=ASprite.ConvertEncoding_I256_I256RLE_dup_aBIIaBI(r,0,r.length,k,0);var q=gloft.ArrayCreation([g],gloft.casttobyte(null));java.lang.System.arraycopy(k,0,q,0,g);this._modules_data_array[f]=null;this._modules_data_array[f]=q}}catch(l){GLLib.Assert(false,"ConvertCompressedData (double array): Module "+f+" caused an exception during conversion!\n        Either use the SAFE option, or modify the source sprite module until this error goes away.")}}}else{if(!o){k=this._modules_data}else{if(k==null){k=gloft.ArrayCreation([this._modules_data.length],gloft.casttobyte(null))}}var c=0;for(var d=0;d<this._nModules;++d){try{var p=ASprite.ConvertEncoding_I256_I256RLE_dup_aBIIaBI(this._modules_data,this.GetStartModuleData(d,0),this.GetLenModuleData(d,0),k,c);if(false){this._modules_data_off_short[d]=gloft.casttoshort(c)}else{this._modules_data_off_int[d]=c}c+=p}catch(a){GLLib.Assert(false,"ConvertCompressedData (single array): Module "+d+" caused an exception during conversion!\n        Either use the SAFE option, or modify the source sprite and move this module further down the list of modules!")}}var m=gloft.ArrayCreation([c],gloft.casttobyte(null));java.lang.System.arraycopy(k,0,m,0,c);this._modules_data=null;this._modules_data=m}this._data_format=22258},SetCharMap_dup_aB:function(a){if(true){GLLib.Dbg("SetCharMap: sprite_newTextRendering is TRUE so the character map can not be a byte[]!")}else{this._pMapChar=a;this.SetLineSpacingToDefault();this.SetSpaceWidthToDefault();this.SetLineHeightToDefault();this.SetCharSpacingToDefault()}},SetCharMap_dup_aS:function(h){if(true){this._nDivider=h[0];this._pMapCharShort=gloft.ArrayCreation([this._nDivider],gloft.casttoshort(null));var g=1;for(var e=0;e<this._nDivider;++e){(this._pMapCharShort[e]=gloft.ArrayCreation([2],gloft.casttoshort(null)))[0]=h[g++];this._pMapCharShort[e][1]=h[g++]}var d=g;while(d<h.length){var c=h[d++];var b=h[d++];var f=gloft.ArrayCreation([b*2+2],gloft.casttoshort(null));f[0]=this._pMapCharShort[c][0];f[1]=this._pMapCharShort[c][1];for(var a=0;a<b;++a){f[a*2+2]=h[d++];f[a*2+3]=h[d++]}this._pMapCharShort[c]=f}this.SetDefaultFontMetrics()}else{GLLib.Dbg("SetCharMap: sprite_newTextRendering is FALSE so the character map can not be a short[]!")}},SetCharMap_dup_aI:function(h){if(true&&false){this._nDividerInt=h[0];this._pMapCharInt=gloft.ArrayCreation([this._nDividerInt],gloft.casttoint(null));var g=1;for(var e=0;e<this._nDividerInt;++e){(this._pMapCharInt[e]=gloft.ArrayCreation([2],gloft.casttoint(null)))[0]=h[g++];this._pMapCharInt[e][1]=h[g++]}var c=g;while(c<h.length){var d=h[c++];var b=h[c++];var f=gloft.ArrayCreation([b*2+2],gloft.casttoint(null));f[0]=this._pMapCharInt[d][0];f[1]=this._pMapCharInt[d][1];for(var a=0;a<b;++a){f[a*2+2]=h[c++];f[a*2+3]=h[c++]}this._pMapCharInt[d]=f}this.SetDefaultFontMetrics()}else{if(!true){GLLib.Dbg("SetCharMap: sprite_newTextRendering is FALSE so the character map can not be a int[]!")}if(!false){GLLib.Dbg("SetCharMap: sprite_useIntCharMap is FALSE so the character map can not be a int[]!")}}},SetCharMap_dup_ASprite:function(a){if(true){if(false){this._pMapCharInt=a._pMapCharInt;this._nDividerInt=a._nDividerInt}else{this._pMapCharShort=a._pMapCharShort;this._nDivider=a._nDivider}}else{this.SetCharMap_dup_aB(a._pMapChar)}},GetCharFrame:function(g){if(false){if(this._pMapCharInt==null){GLLib.Dbg("ERROR: _pMapCharInt is null!!! Did you set the Char Map?");return 0}}else{if(this._pMapCharShort==null){GLLib.Dbg("ERROR: _pMapCharShort is null!!! Did you set the Char Map?");return 0}}g=gloft.casttoint(g);if(false){var e=g%this._nDividerInt;if(this._pMapCharInt[e][0]==g){return this._pMapCharInt[e][1]}var c=gloft.casttoint(null);var f=gloft.casttoint(null);for(c=2,f=this._pMapCharInt[e].length;c<f&&this._pMapCharInt[e][c]!=g;c+=2){}if(c>=f){if(false){GLLib.Dbg("Character not available: char value = "+g+" and actual char = '"+gloft.casttochar(g)+"'")}return 1}return this._pMapCharInt[e][c+1]}else{var b=g%this._nDivider;if(this._pMapCharShort[b][0]==g){return this._pMapCharShort[b][1]}var a=gloft.casttoint(null);var d=gloft.casttoint(null);for(a=2,d=this._pMapCharShort[b].length;a<d&&this._pMapCharShort[b][a]!=g;a+=2){}if(a>=d){if(false){GLLib.Dbg("Character not available: char value = "+g+" and actual char = '"+gloft.casttochar(g)+"'")}return 1}return this._pMapCharShort[b][a+1]}},SetDefaultFontMetrics:function(){this._nFontAscent=-this.GetFrameModuleY(0,0);this._nLineHeight=this._nFontAscent+this.GetFrameModuleY(0,1);this.SetLineSpacingToDefault();this.SetSpaceWidthToDefault()},GetLineSpacing:function(){if(true&&this.m_scaleAccelerator>=0){return this._nLineSpacing*this.m_scaleAccelerator>>8}return this._nLineSpacing},SetLineSpacingToDefault:function(){if(true){this._nLineSpacing=this.GetFrameModuleY(0,2)-this.GetFrameModuleY(0,1)}else{var a=0;this._nLineSpacing=(true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))>>1}},GetFontHeight:function(){if(true&&this.m_scaleAccelerator>=0){if(true){return this._nLineHeight*this.m_scaleAccelerator>>8}if(true){return(this._modules_h_short[0]&255)*this.m_scaleAccelerator>>8}return(this._modules_h_byte[0]&255)*this.m_scaleAccelerator>>8}else{if(true){return this._nLineHeight}if(true){return this._modules_h_short[0]&255}return this._modules_h_byte[0]&255}},GetSpaceWidth:function(){if(true&&this.m_scaleAccelerator>=0){return this._nSpaceWidth*this.m_scaleAccelerator>>8}return this._nSpaceWidth},SetSpaceWidthToDefault:function(){if(true){this._nSpaceWidth=this.GetFrameModuleX(this.GetCharFrame(32),0)}else{var a=0;this._nSpaceWidth=(true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255))}},GetCharSpacing:function(){if(true&&this.m_scaleAccelerator>=0){return this._nCharSpacing*this.m_scaleAccelerator>>8}return this._nCharSpacing},SetCharSpacingToDefault:function(){if(true){this._nCharSpacing=0}else{if(false){this._nCharSpacing=this._fmodules[1]}else{this._nCharSpacing=this.GetFModuleOX(0)}}},GetLineHeight:function(){if(true&&this.m_scaleAccelerator>=0){return this._nLineHeight*this.m_scaleAccelerator>>8}return this._nLineHeight},SetLineHeightToDefault:function(){if(true){this._nLineHeight=-this.GetFrameModuleY(0,0)+this.GetFrameModuleY(0,1)}else{var a=0;this._nLineHeight=(true?(this._modules_h_short[a]&65535):(this._modules_h_byte[a]&255))}},WraptextB:function(aj,ak,O,am){if(ASprite._warpTextInfo==null){ASprite._warpTextInfo=gloft.ArrayCreation([1952],gloft.casttoshort(null))}var T=aj.length;var M=0;var K=1;var J=0;var L=this._bBold?1:0;var A=this._bUnderline?1:0;var Q=this._crt_pal;var I=0;var H=0;var X=this._bBold?1:0;var U=this._bUnderline?1:0;var ai=this._crt_pal;var G=0;if(true){if(ai>=4095){GLLib.Assert(false,"Warning: WrapTextB formatting can only save palettes up to 4095")}G=((ai&4095)|((X!=0)?4096:0)|((U!=0)?8192:0))}var F=0;var ah=0;for(var al=0;al<T;++al){var W=aj.charAt(al);if(gloft.casttoint(W)==gloft.casttoint(" ")||(false&&gloft.casttoint(W)==gloft.casttoint(ASprite.k_cCanBreakLine))){if(!false||gloft.casttoint(W)==gloft.casttoint(" ")){M+=gloft.casttoshort(this.GetSpaceWidth())}J=gloft.casttoshort(al);L=X;I=1;H=0;if(true){A=U;Q=ai}if(M>ak&&!am){I=0;for(var ag=J;ag>=0&&(gloft.casttoint(aj.charAt(ag))==gloft.casttoint(" ")||(false&&gloft.casttoint(aj.charAt(ag))==gloft.casttoint(ASprite.k_cCanBreakLine)));--ag){if(!false||gloft.casttoint(aj.charAt(ag))==gloft.casttoint(" ")){M-=gloft.casttoshort(this.GetSpaceWidth())}}while(J<T&&(gloft.casttoint(aj.charAt(J))==gloft.casttoint(" ")||(false&&gloft.casttoint(aj.charAt(J))==gloft.casttoint(ASprite.k_cCanBreakLine)))){J=gloft.casttoshort((J+1))}J=(al=gloft.casttoshort((J-1)));X=L;var D=ASprite._warpTextInfo;var af=K;var ae=gloft.casttoshort((K+1));D[af]=gloft.casttoshort((J+1));var q=ASprite._warpTextInfo;var ad=ae;K=gloft.casttoshort((ae+1));q[ad]=gloft.casttoshort((M-H));if(true){var p=ASprite._warpTextInfo;var ac=K;K=gloft.casttoshort((K+1));p[ac]=gloft.casttoshort(G);if(ai>=4095){GLLib.Assert(false,"Warning: WrapTextB formatting can only save palettes up to 4095")}U=A;ai=Q;G=((Q&4095)|((L!=0)?4096:0)|((A!=0)?8192:0))}if(false){if(this._bRotatedFont){ASprite._warpTextInfo[K]=gloft.casttoshort(F);F=0;ah=0}K=gloft.casttoshort((K+1))}M=0}else{if(false&&this._bRotatedFont){ah=F;F+=this.GetCharHeight(this.GetCharFrame(W))}}}else{if(true&&gloft.casttoint(W)==gloft.casttoint("\\")){++al;if(!false){var V=aj.charAt(al);if(gloft.casttoint(V)==gloft.casttoint("^")){if(!false){X=((X==0)?1:0)}}else{if(true){if(gloft.casttoint(V)==gloft.casttoint("_")){if(!false){U=((U==0)?1:0)}}else{var ab=gloft.casttoint(V)&gloft.casttoint("ÿ");ab-=48;if(ab<this._palettes){ai=ab}}}}}}else{if(gloft.casttoint(W)==gloft.casttoint("\n")){var o=ASprite._warpTextInfo;var aa=K;var Z=gloft.casttoshort((K+1));o[aa]=gloft.casttoshort(al);var m=ASprite._warpTextInfo;var Y=Z;K=gloft.casttoshort((Z+1));m[Y]=M;M=0;H=0;if(true){var l=ASprite._warpTextInfo;var C=K;K=gloft.casttoshort((K+1));l[C]=gloft.casttoshort(G);if(ai>=4095){GLLib.Assert(false,"Warning: WrapTextB formatting can only save palettes up to 4095")}G=((ai&4095)|((X!=0)?4096:0)|((U!=0)?8192:0))}if(false){if(this._bRotatedFont){ASprite._warpTextInfo[K]=gloft.casttoshort(F);F=0;ah=0}K=gloft.casttoshort((K+1))}}else{var B=gloft.casttoint(null);if(gloft.casttoint(W)<gloft.casttoint(" ")){if(gloft.casttoint(W)==gloft.casttoint("\u0001")){++al;continue}if(gloft.casttoint(W)!=gloft.casttoint("\u0002")){continue}++al;B=aj.charAt(al)}else{if(true){B=this.GetCharFrame(W)}else{B=(this._pMapChar[W]&255)}}var z=gloft.casttoint(null);if(true){if(B>this.GetFrameCount()){if(false){GLLib.Dbg("Character not available: c = "+B)}B=0}z=this.GetCharWidth(B)+this.GetCharSpacing();if(false&&this._bRotatedFont){F+=this.GetCharHeight(B)}}else{if(false){z=this.GetCharWidth(B)+this.GetCharSpacing()}else{if(B>=this.GetFModules(0)){if(false){GLLib.Dbg("Character not available: c = "+B)}B=0}z=this.GetCharWidth(B)+this.GetCharSpacing()}}if(X!=0){++z}H+=gloft.casttoshort(z);M+=gloft.casttoshort(z);if(M>ak){var E=am||I==0;if(E){M-=gloft.casttoshort(z);J=gloft.casttoshort((al-1))}I=0;for(var y=J;y>=0&&(gloft.casttoint(aj.charAt(y))==gloft.casttoint(" ")||(false&&gloft.casttoint(aj.charAt(y))==gloft.casttoint(ASprite.k_cCanBreakLine)));--y){if(!false||gloft.casttoint(aj.charAt(y))==gloft.casttoint(" ")){M-=gloft.casttoshort(this.GetSpaceWidth())}}if(E){L=X;A=U;Q=ai;H=0}var k=ASprite._warpTextInfo;var x=K;var w=gloft.casttoshort((K+1));k[x]=gloft.casttoshort((J+1));var j=ASprite._warpTextInfo;var v=w;K=gloft.casttoshort((w+1));j[v]=gloft.casttoshort((M-H));if(true){var h=ASprite._warpTextInfo;var u=K;K=gloft.casttoshort((K+1));h[u]=gloft.casttoshort(G);if(ai>=4095){GLLib.Assert(false,"Warning: WrapTextB formatting can only save palettes up to 4095")}U=A;ai=Q;G=((Q&4095)|((L!=0)?4096:0)|((A!=0)?8192:0))}if(false){if(this._bRotatedFont){ASprite._warpTextInfo[K]=gloft.casttoshort(ah);F=0;ah=0}K=gloft.casttoshort((K+1))}M=0;al=J;X=L}}}}}var S=ASprite._warpTextInfo;var t=K;var r=gloft.casttoshort((K+1));S[t]=gloft.casttoshort(T);var R=ASprite._warpTextInfo;var g=r;var f=gloft.casttoshort((r+1));R[g]=M;if(true){var P=ASprite._warpTextInfo;var e=f;++f;P[e]=gloft.casttoshort(G)}if(false&&this._bRotatedFont){if(this._bRotatedFont){ASprite._warpTextInfo[f]=gloft.casttoshort(F)}++f}var N=ASprite._warpTextInfo;var d=0;var c=f;var a=2;if(true){++a}if(false){++a}N[d]=gloft.casttoshort((gloft.casttoint(c/a)));return ASprite._warpTextInfo},TextFitToFixedWidth:function(e,f){var b="";var c=0;var d=this.WraptextB(e,f,0,ASprite.m_bEnableFreeWrap);for(var a=0;a<d[0];++a){if(c!=0&&(c>=e.length||gloft.casttoint(e.charAt(c))!=gloft.casttoint("\n"))){b+="\n"}if(true){b+=e.substring(c,d[3*a+1]);c=d[3*a+1]}else{b+=e.substring(c,d[(a<<1)+1]);c=d[(a<<1)+1]}}return b},DrawPageBScaled:function(c,i,h,a,g,f,e,d,b){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,b);GLLib.PFX_SetParam(13,3,b);GLLib.PFX_SetParam(13,4,b);this.m_scaleAccelerator=gloft.casttoint(b*255/100);this.DrawPageB_dup_javaxmicroeditionlcduiGraphicsjavalangStringaSIIIIII(c,i,h,a,g,f,e,d,-1);GLLib.PFX_DisableEffect(13,false);this.m_scaleAccelerator=-1}else{GLLib.Dbg("DrawStringScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},DrawPageB_dup_javaxmicroeditionlcduiGraphicsjavalangStringaSIIIIII:function(c,i,h,a,g,f,e,d,b){this.DrawPageB_dup_javaxmicroeditionlcduiGraphicsjavalangStringaSIIIIIIZ(c,i,h,a,g,f,e,d,b,ASprite.s_drawTextBottomToTop)},DrawPageB_dup_javaxmicroeditionlcduiGraphicsjavalangStringaSIIIIIIZ:function(A,L,a,M,y,x,v,u,t,P){var r=a[0];var c=this.GetLineHeight();if(v==-1){v=r}if(x+v>r){v=r-x}var q=this.GetLineSpacing()+c;if((u&32)!=0){y-=q*(v-1)}else{if((u&2)!=0){y-=q*(v-1)>>1}}ASprite._old_pal=this._crt_pal;var w=this._bBold;var k=this._bUnderline;if(t>=0){ASprite._indexMax=((x>0)?ASprite.GetWrapInfo_LineStart(a,x-1):0);ASprite._indexMax+=t}var o=GLLib.GetClipY(A,true);var p=o+GLLib.GetClipHeight(A,true);var J=o-q;var I=p+q;var H=0;if(P){for(var O=r-1;O>=x;--O,++H){if(H>v-1){break}ASprite._index1=((O>0)?ASprite.GetWrapInfo_LineStart(a,O-1):0);ASprite._index2=ASprite.GetWrapInfo_LineStart(a,O);if(ASprite._index1<L.length&&gloft.casttoint(L.charAt(ASprite._index1))==gloft.casttoint("\n")){++ASprite._index1}var G=M;var F=y+H*q;if(F>=J){if(F>I){break}if((u&43)!=0){if(true&&this.m_scaleAccelerator>=0){if((u&8)!=0){G-=ASprite.GetWrapInfo_LineWidth(a,O)*this.m_scaleAccelerator>>8}else{if((u&1)!=0){G-=ASprite.GetWrapInfo_LineWidth(a,O)*this.m_scaleAccelerator>>9}}}else{if((u&8)!=0){G-=ASprite.GetWrapInfo_LineWidth(a,O)}else{if((u&1)!=0){G-=ASprite.GetWrapInfo_LineWidth(a,O)>>1}}}if(false&&this._bRotatedFont){if((u&8)!=0){F-=ASprite.GetWrapInfo_LineHeight(a,O)}else{if((u&1)!=0){F-=ASprite.GetWrapInfo_LineHeight(a,O)>>1}}}if((u&32)!=0){if(true){F-=this.GetLineHeight()}else{var E=F;var D=1;F=E-(true?(this._modules_h_short[D]&65535):(this._modules_h_byte[D]&255))}}else{if((u&2)!=0){if(true){F-=this.GetLineHeight()>>1}else{var C=F;var B=1;F=C-((true?(this._modules_h_short[B]&65535):(this._modules_h_byte[B]&255))>>1)}}}}if(true){var e=ASprite.GetWrapInfo_LineFormat(a,O);this._bBold=((e&4096)!=0);this._bUnderline=((e&8192)!=0);this.SetCurrentPalette_dup_I(e&4095)}this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(A,L,G,F,0,false)}}}else{for(var N=x;N<r;++N,++H){if(H>v-1){break}ASprite._index1=((N>0)?ASprite.GetWrapInfo_LineStart(a,N-1):0);ASprite._index2=ASprite.GetWrapInfo_LineStart(a,N);if(ASprite._index1<L.length&&gloft.casttoint(L.charAt(ASprite._index1))==gloft.casttoint("\n")){++ASprite._index1}var z=M;var m=y+H*q;if(m>=J){if(m>I){break}if((u&43)!=0){if(true&&this.m_scaleAccelerator>=0){if((u&8)!=0){z-=ASprite.GetWrapInfo_LineWidth(a,N)*this.m_scaleAccelerator>>8}else{if((u&1)!=0){z-=ASprite.GetWrapInfo_LineWidth(a,N)*this.m_scaleAccelerator>>9}}}else{if((u&8)!=0){z-=ASprite.GetWrapInfo_LineWidth(a,N)}else{if((u&1)!=0){z-=ASprite.GetWrapInfo_LineWidth(a,N)>>1}}}if(false&&this._bRotatedFont){if((u&8)!=0){m-=ASprite.GetWrapInfo_LineHeight(a,N)}else{if((u&1)!=0){m-=ASprite.GetWrapInfo_LineHeight(a,N)>>1}}}if((u&32)!=0){if(true){m-=this.GetLineHeight()}else{var l=m;var h=1;m=l-(true?(this._modules_h_short[h]&65535):(this._modules_h_byte[h]&255))}}else{if((u&2)!=0){if(true){m-=this.GetLineHeight()>>1}else{var g=m;var f=1;m=g-((true?(this._modules_h_short[f]&65535):(this._modules_h_byte[f]&255))>>1)}}}}if(true){var d=ASprite.GetWrapInfo_LineFormat(a,N);this._bBold=((d&4096)!=0);this._bUnderline=((d&8192)!=0);this.SetCurrentPalette_dup_I(d&4095)}this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(A,L,z,m,0,false)}}}ASprite._index1=-1;ASprite._index2=-1;ASprite._indexMax=-1;this._crt_pal=ASprite._old_pal;if(true){this._bBold=w;this._bUnderline=k}if(false){try{java.lang.Thread.sleep(1)}catch(K){K.printStackTrace()}}},UpdateStringOrCharsSize:function(u,p){if(u==null&&p==null){return}ASprite._text_w=0;if((false&&true&&this._bRotatedFont)||(false&&true&&this._nCharYOffset!=0)){ASprite._text_h=0}else{ASprite._text_h=this.GetLineHeight()}var d=0;var o=0;var m=0;var l=0;if(false&&this._bRotatedFont){ASprite._text_leftCornerOffX=0;ASprite._text_leftCornerOffY=0}var r=u!=null;var k=(ASprite._index1>=0)?ASprite._index1:0;var h=gloft.casttoint(null);if(r){h=((ASprite._index2>=0)?ASprite._index2:u.length)}else{h=((ASprite._index2>=0)?ASprite._index2:p.length)}var t=this._bBold;for(var j=k;j<h;++j){var q=r?u.charAt(j):p[j];if(true&&gloft.casttoint(q)==gloft.casttoint("\\")){++j;if(!false&&(r?u.charAt(j):p[j])==gloft.casttoint("^")&&!false){t=!t}}else{var a=gloft.casttoint(null);if(gloft.casttoint(q)>gloft.casttoint(" ")){if(!false&&ASprite._useLineBreakChar&&gloft.casttoint(q)==gloft.casttoint(ASprite._lineBreakChar)){continue}if(true){a=this.GetCharFrame(q)}else{if(false&&this._pMapChar==null){GLLib.Dbg("ERROR: _pMapChar is null !!!")}a=(this._pMapChar[q]&255)}}else{if(false&&gloft.casttoint(q)==gloft.casttoint(ASprite.k_cCanBreakLine)){continue}if(gloft.casttoint(q)==gloft.casttoint(" ")){d+=this.GetSpaceWidth();if(!true){continue}if(false&&this._bRotatedFont){o+=java.lang.Math.abs(this.GetCharHeight(this.GetCharFrame(q)));continue}if(false&&this._nCharYOffset!=0){o+=java.lang.Math.abs(this._nCharYOffset)}continue}else{if(gloft.casttoint(q)==gloft.casttoint("\n")){if((false&&true&&this._bRotatedFont)||(false&&true&&this._nCharYOffset!=0)){if(d>ASprite._text_w){ASprite._text_w=d;if(false&&this._bRotatedFont){l=m}}if(o>ASprite._text_h){ASprite._text_h=o}++m;if(false&&this._bRotatedFont){d=m*this.GetCharHSpacing()}else{d=0}o=0;continue}if(d>ASprite._text_w){ASprite._text_w=d}d=0;ASprite._text_h+=this.GetLineSpacing()+this.GetLineHeight();continue}else{if(gloft.casttoint(q)==gloft.casttoint("\u0001")){++j;continue}if(gloft.casttoint(q)!=gloft.casttoint("\u0002")){continue}++j;a=(r?u.charAt(j):p[j])}}}if(true){if(false&&a>this.GetFrameCount()){GLLib.Dbg("Character not available: c = "+a);a=0}d+=this.GetCharWidth(a)+this.GetCharSpacing();if(false&&this._bRotatedFont){o+=java.lang.Math.abs(this.GetCharHeight(a))}else{o+=java.lang.Math.abs(this._nCharYOffset)}}else{if(false){d=d+this.GetCharWidth(a)+this.GetCharSpacing()}else{if(false&&a>=this.GetFModules(0)){GLLib.Dbg("Character not available: c = "+a);a=0}d+=this.GetCharWidth(a)+this.GetCharSpacing()}}if(t){++d}}}if((false&&true&&this._bRotatedFont)||(false&&true&&this._nCharYOffset!=0)){if(d>ASprite._text_w){ASprite._text_w=d;if(false&&this._bRotatedFont){l=m}}if(o>ASprite._text_h){ASprite._text_h=o}++m}else{if(d>ASprite._text_w){ASprite._text_w=d}}if(true){if(ASprite._text_w>0){ASprite._text_w-=this.GetCharSpacing()}if(false&&this._bRotatedFont){var g=m*(this.GetLineSpacing()+this.GetLineHeight());var f=m*this.GetCharHSpacing();ASprite._text_h+=g;ASprite._text_w+=(m-l)*this.GetCharHSpacing();ASprite._text_leftCornerOffX=ASprite._text_w-f;ASprite._text_leftCornerOffY=ASprite._text_h-g;if(this.GetFrameModuleY(0,0)>=0){ASprite._text_leftCornerOffY=-ASprite._text_leftCornerOffY}}else{if(false&&this._nCharYOffset!=0){var e=m*(this.GetLineSpacing()+this.GetLineHeight());ASprite._text_h+=e-java.lang.Math.abs(this._nCharYOffset);ASprite._text_leftCornerOffX=ASprite._text_w;ASprite._text_leftCornerOffY=ASprite._text_h-e;if(this._nCharYOffset>0){ASprite._text_leftCornerOffY=-ASprite._text_leftCornerOffY}}}}else{if(false&&ASprite._text_w>0){ASprite._text_w-=this._fmodules[1]}else{if(ASprite._text_w>0){ASprite._text_w-=this.GetCharSpacing()}}}},DrawStringScaled:function(b,e,f,d,c,a){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,a);GLLib.PFX_SetParam(13,3,a);GLLib.PFX_SetParam(13,4,a);this.m_scaleAccelerator=gloft.casttoint(a*255/100);this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(b,e,f,d,c,true);GLLib.PFX_DisableEffect(13,false);this.m_scaleAccelerator=-1}else{GLLib.Dbg("DrawStringScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIII:function(a,d,e,c,b){this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(a,d,e,c,b,true)},DrawString_dup_javaxmicroeditionlcduiGraphicsaBIIIZ:function(c,g,f,e,d,a){this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(c,new java.lang.String(g),f,e,d,a)},DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZZ:function(d,g,h,f,e,a,c){this.DrawStringOrChars(d,g,null,h,f,e,a,c)},DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ:function(c,f,g,e,d,a){this.DrawStringOrChars(c,f,null,g,e,d,a,true)},DrawStringOrChars:function(f,w,l,z,p,o,F,h){if(w==null&&l==null){return}if(true){if(true&&this.m_scaleAccelerator>=0){p+=this._nFontAscent*this.m_scaleAccelerator>>8}else{p+=this._nFontAscent;if(false&&this._bRotatedFont){z-=this.GetFrameModuleX(0,0)}}}else{if(false&&(!false||!false)){GLLib.Assert(false,"DrawString. Configuration flags sprite_useOperationRecord and sprite_useOperationRect must be enabled when using sprite_fontUseOneFramePerLetter")}if(false){p-=this._fmodules[2]}else{p-=this.GetFModuleOY(0)}}var m=(w!=null)?1:0;if(h){this.UpdateStringOrCharsSize(w,l)}if((o&43)!=0){if(!h){this.UpdateStringOrCharsSize(w,l)}if((false&&true&&this._bRotatedFont)||(false&&true&&this._nCharYOffset!=0)){if((o&8)!=0){z-=ASprite._text_leftCornerOffX;p+=ASprite._text_leftCornerOffY}else{if((o&1)!=0){z-=ASprite._text_leftCornerOffX>>1;p+=ASprite._text_leftCornerOffY>>1}}if((o&32)!=0){z-=ASprite._text_w-ASprite._text_leftCornerOffX;p-=ASprite._text_h-java.lang.Math.abs(ASprite._text_leftCornerOffY)}else{if((o&2)!=0){z-=ASprite._text_w-ASprite._text_leftCornerOffX>>1;p-=ASprite._text_h-java.lang.Math.abs(ASprite._text_leftCornerOffY)>>1}}}else{if((o&8)!=0){z-=ASprite._text_w}else{if((o&1)!=0){z-=ASprite._text_w>>1}}if((o&32)!=0){p-=ASprite._text_h}else{if((o&2)!=0){p-=ASprite._text_h>>1}}}}var k=z;var g=gloft.casttoint(null);var j=g=p;if(F){ASprite._old_pal=this._crt_pal}var e=(ASprite._index1>=0)?ASprite._index1:0;var a=gloft.casttoint(null);if(m!=0){a=((ASprite._index2>=0)?ASprite._index2:w.length)}else{a=((ASprite._index2>=0)?ASprite._index2:l.length)}if(ASprite._indexMax>=0&&a>ASprite._indexMax){a=ASprite._indexMax}if(ASprite.s_useBidi){var d=a-e+4;if(ASprite.s_charBuffer==null){ASprite.s_charBuffer=gloft.ArrayCreation([java.lang.Math.max(1024,d)],gloft.casttochar(null))}if(ASprite.s_charBuffer.length<d){ASprite.s_charBuffer=gloft.ArrayCreation([d],gloft.casttochar(null))}if(l==null){w.getChars(e,a,ASprite.s_charBuffer,2);m=0;w=null;l=ASprite.s_charBuffer}else{try{GLLib.Mem_ArrayCopy(l,e,ASprite.s_charBuffer,2,a-e)}catch(D){D.printStackTrace()}l=ASprite.s_charBuffer}ASprite.s_charBuffer[0]="\u0001";ASprite.s_charBuffer[1]=gloft.casttochar(this._crt_pal);ASprite.s_charBuffer[d-2]="\u0001";ASprite.s_charBuffer[d-1]=gloft.casttochar(this._crt_pal);e=0;a=d;GLLib.Bidi_ProcessChars_dup_aCIZZ(l,d,true,true)}for(var B=e;B<a;++B){var E=(m!=0)?w.charAt(B):l[B];if(true&&gloft.casttoint(E)==gloft.casttoint("\\")){++B;if(!false){var y=(m!=0)?w.charAt(B):l[B];if(gloft.casttoint(y)==gloft.casttoint("_")){if(!false){this._bUnderline=!this._bUnderline}}else{if(gloft.casttoint(y)==gloft.casttoint("^")){if(!false){this._bBold=!this._bBold}}else{this.SetCurrentPalette_dup_I((gloft.casttoint(y)&gloft.casttoint("ÿ"))-gloft.casttoint("0"))}}}}else{if(!false||gloft.casttoint(E)!=gloft.casttoint(ASprite.k_cCanBreakLine)){var v=gloft.casttoint(null);if(gloft.casttoint(E)>gloft.casttoint(" ")){if(!false&&ASprite._useLineBreakChar&&gloft.casttoint(E)==gloft.casttoint(ASprite._lineBreakChar)){continue}if(true){v=this.GetCharFrame(E)}else{if(false&&this._pMapChar==null){GLLib.Dbg("ERROR: _pMapChar is null !!!")}v=(this._pMapChar[E]&255)}}else{if(gloft.casttoint(E)==gloft.casttoint(" ")){if(this._bUnderline){if(true){var C=this.GetCharFrame(95);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,C,k+(this.GetSpaceWidth()-this.GetCharWidth(C)>>1),j,0,0,0)}else{if(false){var u=this._pMapChar[95]&255;this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,u,k+(this.GetSpaceWidth()-this.GetCharWidth(u)>>1),j,0,0,0)}else{var t=this._pMapChar[95]&255;this.PaintFModule(f,0,t,k+(this.GetSpaceWidth()-this.GetCharWidth(t)>>1),j,0,0,0)}}}k+=this.GetSpaceWidth();if(false&&this._bRotatedFont){j+=this.GetCharHeight(this.GetCharFrame(E));continue}if(false&&this._nCharYOffset!=0){j+=this._nCharYOffset}continue}else{if(gloft.casttoint(E)==gloft.casttoint("\n")){if((false&&this._bRotatedFont)||(false&&this._nCharYOffset!=0)){if(false&&this._bRotatedFont){z+=this.GetCharHSpacing()}k=z;j=(g=g+this.GetLineSpacing()+this.GetLineHeight());continue}k=z;j+=this.GetLineSpacing()+this.GetLineHeight();continue}else{if(gloft.casttoint(E)==gloft.casttoint("\u0001")){++B;var x=(m!=0)?w.charAt(B):l[B];if(gloft.casttoint(x)<this._palettes){this.SetCurrentPalette_dup_I(x)}if(gloft.casttoint(x)==gloft.casttoint("ÿ")){this._crt_pal=ASprite._old_pal}continue}else{if(gloft.casttoint(E)!=gloft.casttoint("\u0002")){continue}++B;v=((m!=0)?w.charAt(B):l[B])}}}}if(false){if(true){if(v>this.GetFrameCount()){GLLib.Dbg("Character not available: c = "+v);v=0}}else{if(v>=this.GetFModules(0)){GLLib.Dbg("Character not available: c = "+v);v=0}}}if(true){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,v,k,j,0,0,0);if(this._bUnderline){var A=this.GetCharFrame(95);this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,A,k+(this.GetCharWidth(v)-this.GetCharWidth(A)>>1),j,0,0,0)}if(this._bBold){++k;this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,v,k,j,0,0,0)}k+=this.GetCharWidth(v)+this.GetCharSpacing();if(false&&this._bRotatedFont){j+=this.GetCharHeight(v)}else{if(false&&this._nCharYOffset!=0){j+=this._nCharYOffset}}}else{if(false){if(this._bUnderline&&false){var r=this._pMapChar[95]&255;this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,r,k+(this.GetSpaceWidth()-this.GetCharWidth(r)>>1),j,0,0,0)}this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(f,v,k,j,0,0,0);k=k+this.GetCharWidth(v)+this.GetCharSpacing()}else{if(this._bUnderline){var q=this._pMapChar[95]&255;this.PaintFModule(f,0,q,k+(this.GetCharWidth(v)-this.GetCharWidth(q)>>1),j,0,0,0)}this.PaintFModule(f,0,v,k,j,0,0,0);k+=this.GetCharWidth(v)+this.GetCharSpacing()}}}}}if(F){this._crt_pal=ASprite._old_pal}},DrawPageScaled:function(b,e,f,d,c,a){if(true){GLLib.PFX_EnableEffect(13,false);GLLib.PFX_SetParam(13,1,a);GLLib.PFX_SetParam(13,3,a);GLLib.PFX_SetParam(13,4,a);this.m_scaleAccelerator=gloft.casttoint(a*255/100);this.DrawPage(b,e,f,d,c,0,e.length);GLLib.PFX_DisableEffect(13,false);this.m_scaleAccelerator=-1}else{GLLib.Dbg("DrawStringScaled: Functionality is not enabled, you must set pfx_useSpriteEffectScale to TRUE!")}},DrawPage:function(d,p,a,l,k,h,g){var e=2;for(var f=h;f<g;++f){if(gloft.casttoint(p.charAt(f))==gloft.casttoint("\n")){++e}}var m=gloft.ArrayCreation([e],gloft.casttoint(null));var o=ASprite.StringTokenize(p,h,g,"\n",m);var b=this.GetLineSpacing()+this.GetLineHeight();if((k&32)!=0){l-=b*(o-1)}else{if((k&2)!=0){l-=b*(o-1)>>1}}for(var c=0;c<o;++c){ASprite._index1=m[c]+1;ASprite._index2=m[c+1];this.DrawString_dup_javaxmicroeditionlcduiGraphicsjavalangStringIIIZ(d,p,a,l+c*b,k,false)}ASprite._index1=-1;ASprite._index2=-1},getCharSize:function(d){if(gloft.casttoint(d)==gloft.casttoint(" ")){return this.GetSpaceWidth()}if(true){return this.GetFrameModuleX(this.GetCharFrame(d),0)}if(this._pMapChar!=null&&gloft.casttoint(d)>gloft.casttoint(" ")&&gloft.casttoint(d)<this._pMapChar.length){var b=this._pMapChar[d]&255;var a=this._fmodules[b<<2]&255;return((true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255))&255)+this._fmodules[(b<<2)+1]+this._fmodules[1]}return 0},SetRotatedFont:function(a){if(!true||!false){GLLib.Assert(false,"SetRotatedFont: cant be used unless GLLibConfig.sprite_newTextRendering and GLLibConfig.sprite_allowRotatedFont are true")}if(true&&false){this._bRotatedFont=a}},SetFontCharYOffset:function(a){if(!true||!false){GLLib.Assert(false,"SetCharYOffset: cant be used unless GLLibConfig.sprite_newTextRendering and GLLibConfig.sprite_allowCharYOffset are true")}this._nCharYOffset=a},GetCharHSpacing:function(){if(true&&false&&this._bRotatedFont){return this.GetFrameModuleX(0,2)-this.GetFrameModuleX(0,0)}return 0},GetCharHeight:function(a){if(true&&false&&this._bRotatedFont){return this.GetFrameModuleY(a,0)-this.GetFrameModuleY(0,1)}return this.GetLineHeight()},GetCharWidth:function(f){if(true){if(false&&this._bRotatedFont){return this.GetFrameModuleX(f,0)-this.GetFrameModuleX(0,1)}if(true&&this.m_scaleAccelerator>=0){return this.GetFrameModuleX(f,0)*this.m_scaleAccelerator>>8}return this.GetFrameModuleX(f,0)}else{if(false){this.GetFrameRect_dup_aIIIIIZ(this.nALetterRect,f,0,0,0,false);if(true&&this.m_scaleAccelerator>=0){return(this.nALetterRect[2]-this.nALetterRect[0])*this.m_scaleAccelerator>>8}return this.nALetterRect[2]-this.nALetterRect[0]}else{var e=gloft.casttoint(null);if(false){e=(this._fmodules[f<<2]&255)}else{if(false||(true&&(this._bs_flags&1048576)!=0)){e=this._fmodules_id_short[f]}else{e=(this._fmodules_id_byte[f]&255)}}if(e>=this._nModules){if(false){GLLib.Dbg("Character module not available: c = "+f+"  m = "+(e>>1))}return 0}if(false){if(true&&this.m_scaleAccelerator>=0){var d=e;return((true?(this._modules_w_short[d]&65535):(this._modules_w_byte[d]&255))-this._fmodules[(f<<2)+1])*this.m_scaleAccelerator>>8}var c=e;return(true?(this._modules_w_short[c]&65535):(this._modules_w_byte[c]&255))-this._fmodules[(f<<2)+1]}else{if(true&&this.m_scaleAccelerator>=0){var b=e;return((true?(this._modules_w_short[b]&65535):(this._modules_w_byte[b]&255))-this.GetFModuleOX(f))*this.m_scaleAccelerator>>8}var a=e;return(true?(this._modules_w_short[a]&65535):(this._modules_w_byte[a]&255))-this.GetFModuleOX(f)}}}},DrawNumber:function(d,c,i,h,g,f,e,m){var a=ASprite.GetChars(ASprite._itoa_buffer,c,i,h);var q=ASprite._index1;var p=ASprite._index2;var o=a;var l=33;ASprite._index1=o;ASprite._index2=l;this.DrawStringOrChars(d,null,ASprite._itoa_buffer,g,f,e,m,true);var k=q;var j=p;ASprite._index1=k;ASprite._index2=j},UpdateNumberSize:function(b,d,c){var a=ASprite.GetChars(ASprite._itoa_buffer,b,d,c);var j=ASprite._index1;var i=ASprite._index2;var h=a;var g=33;ASprite._index1=h;ASprite._index2=g;this.UpdateStringOrCharsSize(null,ASprite._itoa_buffer);var f=j;var e=i;ASprite._index1=f;ASprite._index2=e},SetCurrentPalette_dup_I:function(a){this.SetCurrentPalette_dup_II(0,a)},SetCurrentPalette_dup_II:function(b,a){if(a<this._palettes&&a>=0){this._crt_pal=a;if(!this.IsPaletteDataSet_dup_II(b,a)){GLLib.Assert(false,"SetCurrentPalette: palette data is not allocated!")}}},InitPalettesArray:function(a){if(false){if(this._pal_short==null){this._pal_short=gloft.ArrayCreation([a,100],gloft.casttoshort(null))}}else{if(this._pal_int==null){this._pal_int=gloft.ArrayCreation([a,100],gloft.casttoint(null))}}},AllocatePaletteArray:function(c,b,a){if(false){this._pal_short[c][b]=gloft.ArrayCreation([a],gloft.casttoshort(null))}else{this._pal_int[c][b]=gloft.ArrayCreation([a],gloft.casttoint(null))}},GetCurrentPalette_dup_:function(){return this._crt_pal},GetCurrentPalette_dup_I:function(a){return this._crt_pal},GenPalette_dup_IaII:function(c,b,a){return ASprite.GenPalette_dup_IaIaI(c,b,this.GetPalette_dup_I(a))},GenPalette_dup_IaSI:function(c,b,a){return ASprite.GenPalette_dup_IaSaS(c,b,this.GetPalette_dup_I(a))},ModifyPaletteAlpha_dup_II:function(b,a){this.ModifyPaletteAlpha_dup_IIIZZ(0,b,a,this._alpha,this._multiAlpha)},ModifyPaletteAlpha_dup_III:function(c,b,a){this.ModifyPaletteAlpha_dup_IIIZZ(c,b,a,this._alpha,this._multiAlpha)},ModifyPaletteAlpha_dup_IIZZ:function(e,d,a,c){this.ModifyPaletteAlpha_dup_IIIZZ(0,e,d,a,c)},ModifyPaletteAlpha_dup_IIIZZ:function(a,p,o,s,r){if(p<0){GLLib.Assert(false,"ModifyPaletteAlpha: Trying to modify palette of negative index!")}if(p>=this._palettes){GLLib.Assert(false,"ModifyPaletteAlpha: Trying to modify palette which is out-of-range: "+p)}if(false){if(this._pal_short==null){GLLib.Assert(false,"ModifyPaletteAlpha: This palette data is null!")}var q=this.GetPalette_dup_II(a,p);var f=q.length;if(r){for(var h=f-1;h>=0;--h){q[h]=gloft.casttoshort((((q[h]>>12&15)*o>>8&15)<<12|(q[h]&4095)))}}else{if(s){o=(o>>4&15)<<12;for(var e=f-1;e>=0;--e){if((q[e]&4095)!=3855&&q[e]>>12!=0){q[e]=gloft.casttoshort((o|(q[e]&4095)))}}}else{o=(o>>4&15)<<12;for(var d=f-1;d>=0;--d){q[d]=gloft.casttoshort((o|(q[d]&4095)))}}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaS(a,p,q)}}else{var u=this.GetPalette_dup_II(a,p);if(this._pal_int==null){GLLib.Assert(false,"ModifyPaletteAlpha: This palette data is null!")}var t=u.length;if(r){for(var c=t-1;c>=0;--c){u[c]=(((u[c]>>24&255)*o>>8&255)<<24|(u[c]&16777215))}}else{if(s){o=(o&255)<<24;for(var m=t-1;m>=0;--m){if((u[m]&16777215)!=16711935&&u[m]>>24!=0){u[m]=(o|(u[m]&16777215))}}}else{o=(o&255)<<24;for(var g=t-1;g>=0;--g){u[g]=(o|(u[g]&16777215))}}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaI(a,p,u)}}},ModifyPalette_dup_II:function(b,a){this.ModifyPalette_dup_III(0,b,a)},ModifyPalette_dup_III:function(h,e,c){this._alpha=true;if(false){var g=this.GetPalette_dup_II(h,e);c&=4095;var a=((c&240)>>4)+((c&61440)>>8)+((c&15728640)>>12);for(var d=0;d<g.length;++d){if((g[d]&4095)!=3855&&g[d]>>12!=0){g[d]=gloft.casttoshort(((g[d]&15)<<12|a))}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaS(h,e,g)}}else{var f=this.GetPalette_dup_II(h,e);c&=16777215;for(var b=0;b<f.length;++b){if((f[b]&16777215)!=16711935&&f[b]>>24!=0){f[b]=((f[b]&255)<<24|c)}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaI(h,e,f)}}},ModifyPaletteAlphaUsingAltPalette_dup_II:function(b,a){this.ModifyPaletteAlphaUsingAltPalette_dup_III(0,b,a)},ModifyPaletteAlphaUsingAltPalette_dup_III:function(a,k,h){if(k<0){GLLib.Assert(false,"ModifyPaletteAlphaUsingAltPalette: trying to modify palette of negative index!")}if(k>=this._palettes){GLLib.Assert(false,"ModifyPaletteAlphaUsingAltPalette: trying to modify palette which is out-of-range: "+k)}if(h<0){GLLib.Assert(false,"ModifyPaletteAlphaUsingAltPalette: trying to use alpha palette of negative index!")}if(h>=this._palettes){GLLib.Assert(false,"ModifyPaletteAlphaUsingAltPalette: trying to use alpha palette which is out-of-range: "+h)}this._alpha=true;this._multiAlpha=true;if(false){var l=this.GetPalette_dup_II(a,k);var t=this.GetPalette_dup_II(a,h);for(var f=0;f<l.length;++f){if((l[f]&4095)!=3855&&l[f]>>12!=0){var s=l;var g=f;s[g]&=4095;var r=l;var e=f;r[e]|=gloft.casttoshort(((t[f]&3840)<<4))}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaS(a,k,l)}}else{var q=this.GetPalette_dup_II(a,k);var p=this.GetPalette_dup_II(a,h);for(var d=0;d<q.length;++d){if((q[d]&16777215)!=16711935&&q[d]>>24!=0){var o=q;var c=d;o[c]&=16777215;var m=q;var b=d;m[b]|=(p[d]&16711680)<<8}}if(false&&(!true||(this._bs_flags&536870912)!=0)){this.SetPalette_dup_IIaI(a,k,q)}}},ModifyPaletteAlphaUsingLastPalette:function(a){this.ModifyPaletteAlphaUsingAltPalette_dup_II(a,this._palettes-1)},AllocateExtraPalette_dup_:function(){return this.AllocateExtraPalette_dup_I(this._palettes)},AllocateExtraPalette_dup_I:function(e){if(e<0){GLLib.Assert(false,"AllocateExtraPalette: invalid palette("+e+") passed")}if(e>=100){GLLib.Assert(false,"AllocateExtraPalette: Sprite is using more palettes than MAX_SPRITE_PALETTES, please increase this value in GLLibConfig!")}if((this._bs_flags&1073741824)!=0){GLLib.Assert(false,"AllocateExtraPalette do not supported multiple images sprites")}var b=this._colors[0];if(false&&(!true||(this._bs_flags&536870912)!=0)){if(e<this._palettes){return e}var a=b*3+4+(b+4);var c=this._palettes;this._palettes=e+1;var d=gloft.ArrayCreation([this._palettes*a],gloft.casttobyte(null));java.lang.System.arraycopy(this._pal_data,0,d,0,c*a);this._pal_data=d}else{this.AllocatePaletteArray(0,e,b);if(this.AllocateExtraCache_dup_I(e)<0&&e>=this._palettes){this._palettes=e+1}}return e},AllocateExtraIndexPalette:function(){if((this._bs_flags&1073741824)!=0){GLLib.Assert(false,"AllocateExtraIndexPalette do not supported multiple images sprites")}var a=this.AllocateExtraPalette_dup_();for(var c=this._colors[0],b=0;b<c;b=gloft.casttoshort((b+1))){this.SetPaletteColor_dup_IIII(0,a,b,b)}return a},CopyPalette:function(d,c,b,a){if(c<0){GLLib.Assert(false,"CopyPalette: trying to read palette of negative index: "+c)}if(c>=this._palettes){GLLib.Assert(false,"CopyPalette: trying to read palette which is out-of-range: "+c)}if(a<0){GLLib.Assert(false,"CopyPalette: trying to set palette of negative index: "+a)}if(a>=this._palettes){GLLib.Assert(false,"CopyPalette: trying to set palette which is out-of-range: "+a)}if(false){if(this._pal_short==null){GLLib.Assert(false,"CopyPalette: Palettes are null!")}if(this._pal_short[d][c]==null){GLLib.Assert(false,"CopyPalette: Source palette is null!!")}if(this._pal_short[b][a]==null){GLLib.Assert(false,"CopyPalette: Destination palette is null!!")}if(this._pal_short[d][c].length!=this._pal_short[b][a].length){GLLib.Assert(false,"CopyPalette: Source and Destination has different sizes!")}java.lang.System.arraycopy(this._pal_short[d][c],0,this._pal_short[b][a],0,this._pal_short[d][c].length)}else{if(this._pal_int==null){GLLib.Assert(false,"CopyPalette: Palettes are null!")}if(this._pal_int[d][c]==null){GLLib.Assert(false,"CopyPalette: Source palette is null!!")}if(this._pal_int[b][a]==null){GLLib.Assert(false,"CopyPalette: Destination palette is null!!")}if(this._pal_int[d][c].length!=this._pal_int[b][a].length){GLLib.Assert(false,"CopyPalette: Source and Destination has different sizes!")}java.lang.System.arraycopy(this._pal_int[d][c],0,this._pal_int[b][a],0,this._pal_int[d][c].length)}},SharePalette:function(c,b,a){if(b<0){GLLib.Assert(false,"SharePalette: trying to read palette of negative index: "+b)}if(b>=this._palettes){GLLib.Assert(false,"SharePalette: trying to read palette which is out-of-range: "+b)}if(a<0){GLLib.Assert(false,"SharePalette: trying to set palette of negative index: "+a)}if(a>=this._palettes){GLLib.Assert(false,"SharePalette: trying to set palette which is out-of-range: "+a)}if(false){if(this._pal_short==null){GLLib.Assert(false,"SharePalette: Palettes are null!")}if(this._pal_short[c][b]==null){GLLib.Assert(false,"SharePalette: Source palette is null!!")}this._pal_short[c][a]=this._pal_short[c][b]}else{if(this._pal_int==null){GLLib.Assert(false,"SharePalette: Palettes are null!")}if(this._pal_int[c][b]==null){GLLib.Assert(false,"SharePalette: Source palette is null!!")}this._pal_int[c][a]=this._pal_int[c][b]}},Palette_CopyAndApplyAlpha_dup_IIIZZ:function(f,e,d,a,c){return this.Palette_CopyAndApplyAlpha_dup_IIIIZZ(0,f,e,d,a,c)},Palette_CopyAndApplyAlpha_dup_IIIIZZ:function(a,j,i,h,o,m){if(!false){if(h<0||h>255){GLLib.Assert(false,"Palette_CopyAndApplyAlpha: Blend value must be [0,255]!")}if(j<0||j>=this._palettes){GLLib.Assert(false,"Palette_CopyAndApplyAlpha: Palette parameter 1 must be a valid palette")}if(i<0||i>=this._palettes){GLLib.Assert(false,"Palette_CopyAndApplyAlpha: Palette parameter 2 must be a valid palette")}var l=false;var k=this.GetPalette_dup_II(a,j);var q=this.GetPalette_dup_II(a,i);if(m){var g=this._colors[a];while(--g>=0){if((k[g]&16777215)==16711935){l=true;q[g]=16711935}else{var f=((k[g]&-16777216)>>24&255)*h>>8;if(f!=255){l=true}q[g]=(f<<24|(k[g]&16777215))}}}else{if(o){var e=h<<24;var d=this._colors[a];while(--d>=0){if((k[d]&16777215)==16711935){l=true;q[d]=16711935}else{q[d]=(e|(k[d]&16777215))}}}else{var c=h<<24;var p=this._colors[a];while(--p>=0){q[p]=(c|(k[p]&16777215))}}}return l||this._alpha}return false},Palette_SetColor:function(d,c,b,a){if(c<0){GLLib.Assert(false,"Palette_SetColor: Error: palette ID is negative!"+c)}if(c>=this._palettes){GLLib.Assert(false,"Palette_SetColor: Error: palette ID is greater than available palettes!"+c)}if(b<0){GLLib.Assert(false,"Palette_SetColor: Error: color index is negative!"+b)}if(false){if(this._pal_short==null){GLLib.Assert(false,"Palette_SetColor: Palettes are null!")}if(this._pal_short[d][c]==null){GLLib.Assert(false,"Palette_SetColor: Palette["+c+"] is null!!")}if(this._pal_short[d][c].length<=b){GLLib.Assert(false,"Palette_SetColor: Error: color index is greater than this palette has!"+b)}this._pal_short[d][c][b]=gloft.casttoshort(((a>>16&61440)|(a>>12&3840)|(a>>8&240)|(a>>4&15)))}else{if(this._pal_int==null){GLLib.Assert(false,"Palette_SetColor: Palettes are null!")}if(this._pal_int[d][c]==null){GLLib.Assert(false,"Palette_SetColor: Palette["+c+"] is null!!")}if(this._pal_int[d][c].length<=b){GLLib.Assert(false,"Palette_SetColor: Error: color index is greater than this palette has!"+b)}this._pal_int[d][c][b]=a}},Palette_GetSize:function(a){if(a<0){GLLib.Assert(false,"Palette_GetSize: Error: palette ID is negative!"+a)}if(a>=this._palettes){GLLib.Assert(false,"Palette_GetSize: Error: palette ID is greater than available palettes!"+a)}if(false){if(this._pal_short==null){GLLib.Assert(false,"Palette_GetSize: Palettes are null!")}if(this._pal_short[a]==null){GLLib.Assert(false,"Palette_GetSize: Palette["+a+"] is null!!")}return this._pal_short[a].length}if(this._pal_int==null){GLLib.Assert(false,"Palette_GetSize: Palettes are null!")}if(this._pal_int[a]==null){GLLib.Assert(false,"Palette_GetSize: Palette["+a+"] is null!!")}return this._pal_int[a].length},Palette_GetPaletteFromPNG:function(a){if(this._pal_data==null){return null}var m=this._colors[0];var h=a*(m*3+4+(m+4));if(false){var o=gloft.ArrayCreation([m],gloft.casttoshort(null));for(var f=0;f<m;++f){o[f]=gloft.casttoshort(((this._pal_data[h]&15)<<8|(this._pal_data[h+1]&15)<<4|(this._pal_data[h+2]&15)))}h+=4;for(var d=0;d<m;++d){var r=o;var g=d;r[g]|=gloft.casttoshort(((this._pal_data[h++]&15)<<12))}return o}var q=gloft.ArrayCreation([m],gloft.casttoint(null));for(var c=0;c<m;++c){q[c]=((this._pal_data[h]&255)<<16|(this._pal_data[h+1]&255)<<8|(this._pal_data[h+2]&255));h+=3}h+=4;for(var b=0;b<m;++b){var p=q;var e=b;p[e]|=(this._pal_data[h++]&255)<<24}return q},Palette_AddPaletteToPNG_dup_IaI:function(a,o){var l=this._colors[0];var j=l*3+4;var h=l+4;var g=j+h;var e=a*g;var d=e+j;for(var f=0;f<l;++f){this._pal_data[d++]=gloft.casttobyte((o[f]>>24&255));this._pal_data[e++]=gloft.casttobyte((o[f]>>16&255));this._pal_data[e++]=gloft.casttobyte((o[f]>>8&255));this._pal_data[e++]=gloft.casttobyte((o[f]&255))}var m=ASprite.Crc32(this._pal_data,a*g,j-4,ASprite.Crc32(ASprite.PLTE,0,4,0));var c=a*g+j-4;this._pal_data[c++]=gloft.casttobyte((m>>24&255));this._pal_data[c++]=gloft.casttobyte((m>>16&255));this._pal_data[c++]=gloft.casttobyte((m>>8&255));this._pal_data[c]=gloft.casttobyte((m&255));var k=ASprite.Crc32(this._pal_data,a*g+j,h-4,ASprite.Crc32(ASprite.tRNS,0,4,0));var b=(a+1)*g-4;this._pal_data[b++]=gloft.casttobyte((k>>24&255));this._pal_data[b++]=gloft.casttobyte((k>>16&255));this._pal_data[b++]=gloft.casttobyte((k>>8&255));this._pal_data[b]=gloft.casttobyte((k&255))},Palette_AddPaletteToPNG_dup_IaS:function(a,o){var l=this._colors[0];var j=l*3+4;var h=l+4;var g=j+h;var e=a*g;var d=e+j;for(var f=0;f<l;++f){this._pal_data[d++]=gloft.casttobyte((o[f]>>12&15));this._pal_data[e++]=gloft.casttobyte((o[f]>>8&15));this._pal_data[e++]=gloft.casttobyte((o[f]>>4&15));this._pal_data[e++]=gloft.casttobyte((o[f]&15))}var m=ASprite.Crc32(this._pal_data,a*g,j-4,ASprite.Crc32(ASprite.PLTE,0,4,0));var c=a*g+j-4;this._pal_data[c++]=gloft.casttobyte((m>>24&255));this._pal_data[c++]=gloft.casttobyte((m>>16&255));this._pal_data[c++]=gloft.casttobyte((m>>8&255));this._pal_data[c]=gloft.casttobyte((m&255));var k=ASprite.Crc32(this._pal_data,a*g+j,h-4,ASprite.Crc32(ASprite.tRNS,0,4,0));var b=(a+1)*g-4;this._pal_data[b++]=gloft.casttobyte((k>>24&255));this._pal_data[b++]=gloft.casttobyte((k>>16&255));this._pal_data[b++]=gloft.casttobyte((k>>8&255));this._pal_data[b]=gloft.casttobyte((k&255))},DeallocatePalette_dup_I:function(a){this.DeallocatePalette_dup_II(0,a)},DeallocatePalette_dup_II:function(b,a){if(a<0){GLLib.Assert(false,"DeallocatePalette: invalid palette("+a+") passed")}if(a>=100){GLLib.Assert(false,"DeallocatePalette: palId("+a+") is bigger then MAX_SPRITE_PALETTES. Increase this value in GLLibConfig!")}if(false&&(!true||(this._bs_flags&536870912)!=0)){GLLib.Dbg("DeallocatePalette and sprite_useSingleImageForAllModules: this is not supported yet");return}this.FreeModuleImage(a,-1);if(false){this._pal_short[b][a]=null}else{this._pal_int[b][a]=null}},IsPaletteDataSet_dup_I:function(a){return this.IsPaletteDataSet_dup_II(0,a)},IsPaletteDataSet_dup_II:function(b,a){if(a<0){GLLib.Assert(false,"DeallocatePalette: invalid palette("+a+") passed")}if(a>=100){GLLib.Assert(false,"DeallocatePalette: palId("+a+") is bigger then MAX_SPRITE_PALETTES. Increase this value in GLLibConfig!")}if(a>=this._palettes){return false}if(false&&(!true||(this._bs_flags&536870912)!=0)){return true}if(false){if(this._pal_short==null){return true}}else{if(this._pal_int==null){return true}}return this.GetPalette_dup_II(b,a)!=null},MarkTransformedModules:function(u,a){if(false&&false){if(a!=0){this._modules_usage=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null));for(var q=0;q<this._nModules;++q){this._modules_usage[q]=gloft.casttobyte(a)}}var c=this.GetFrameCount();if(c==0){return}ASprite._operation=3;var m=null;var t=gloft.casttoint(null);if(false||(true&&(this._bs_flags&524288)!=0)){t=((this._anims_naf_short==null)?0:this._anims_naf_short.length)}else{t=((this._anims_naf_byte==null)?0:this._anims_naf_byte.length)}if(true){var p=this.GetCurrentMMapping();for(var h=-1;h<16;++h){if(h<0||this._map[h]!=null){this.SetCurrentMMapping(h);if(u){for(var f=0;f<c;++f){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(m,f,0,0,0,0,0)}}for(var d=0;d<t;++d){for(var e=this.GetAFrames(d),s=0;s<e;++s){this.PaintAFrame(m,d,s,0,0,0,0,0)}}}}this.SetCurrentMMapping(p)}else{if(u){for(var r=0;r<c;++r){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(m,r,0,0,0,0,0)}}for(var o=0;o<t;++o){for(var v=this.GetAFrames(o),g=0;g<v;++g){this.PaintAFrame(m,o,g,0,0,0,0,0)}}}ASprite._operation=0}},RectOperation:function(b,c,d,a){if(false&&ASprite._operation==1){if(b<ASprite._rectX1){ASprite._rectX1=b}if(c<ASprite._rectY1){ASprite._rectY1=c}if(b+d>ASprite._rectX2){ASprite._rectX2=b+d}if(c+a>ASprite._rectY2){ASprite._rectY2=c+a}return true}return false},MarkOperation:function(c,b){if(false&&ASprite._operation==3){var a=this._modules_usage;a[c]|=gloft.casttobyte((1<<(b&7)));return true}return false},CheckOperation:function(f,h,e,d,c,b,a,g){if(f==null){GLLib.Dbg("ERROR\t\t: CheckOperation img is null");return false}if(!false){return true}if(ASprite._operation==0){return true}if(ASprite._operation==2){this._aryPrecomputedImages[ASprite.record_frame][ASprite.record_index]=f;this._aryPrecomputedX[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(h);this._aryPrecomputedY[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(e);this._aryPrecomputedSizeX[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(d);this._aryPrecomputedSizeY[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(c);this._aryPrecomputedFlags[ASprite.record_frame][ASprite.record_index]=b;if(!true){this._aryPrecomputedImgX[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(a);this._aryPrecomputedImgY[ASprite.record_frame][ASprite.record_index]=gloft.casttoshort(g)}++ASprite.record_index;return false}return false},PaintPrecomputedFrame:function(a,d,c,b){this.PaintPrecomputedFrame1(a,d,c,b)},PrecomputeAllFrames:function(b){for(var a=this.GetFrameCount(),c=0;c<a;++c){this.PrecomputeFrame(b,c,0)}},PrecomputeFrame:function(b,d,e){if(false){if(this._aryPrecomputedImages==null){var a=this.GetFrameCount();this._aryPrecomputedImages=gloft.ArrayCreation([a],null);this._aryPrecomputedX=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aryPrecomputedY=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aryPrecomputedSizeX=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aryPrecomputedSizeY=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aryPrecomputedFlags=gloft.ArrayCreation([a],gloft.casttoint(null));if(!true){this._aryPrecomputedImgX=gloft.ArrayCreation([a],gloft.casttoshort(null));this._aryPrecomputedImgY=gloft.ArrayCreation([a],gloft.casttoshort(null))}}var c=this.CountFrameModules(d);this._aryPrecomputedImages[d]=gloft.ArrayCreation([c],null);this._aryPrecomputedX[d]=gloft.ArrayCreation([c],gloft.casttoshort(null));this._aryPrecomputedY[d]=gloft.ArrayCreation([c],gloft.casttoshort(null));this._aryPrecomputedSizeX[d]=gloft.ArrayCreation([c],gloft.casttoshort(null));this._aryPrecomputedSizeY[d]=gloft.ArrayCreation([c],gloft.casttoshort(null));this._aryPrecomputedFlags[d]=gloft.ArrayCreation([c],gloft.casttoint(null));if(!true){this._aryPrecomputedImgX[d]=gloft.ArrayCreation([c],gloft.casttoshort(null));this._aryPrecomputedImgY[d]=gloft.ArrayCreation([c],gloft.casttoshort(null))}ASprite.record_frame=d;ASprite.record_index=0;ASprite._operation=2;this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(b,d,0,0,e,0,0);ASprite._operation=0;ASprite.record_frame=-1;ASprite.record_index=-1}},PaintPrecomputedFrame1:function(c,y,q,m){if(false){if(this._aryPrecomputedImages==null||this._aryPrecomputedImages[m]==null){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(c,m,y,q,0,0,0);return}for(var F=this._aryPrecomputedImages[m].length,A=0;A<F;++A){if(this._aryPrecomputedImages[m][A]==null){c.setColor(16711680);c.fillRect(this._aryPrecomputedX[m][A]+y,this._aryPrecomputedY[m][A]+q,gloft.casttoint(this._aryPrecomputedSizeX[m][A]),gloft.casttoint(this._aryPrecomputedSizeY[m][A]))}else{var x=this._aryPrecomputedImages[m][A];var k=this._aryPrecomputedX[m][A]+y;var h=this._aryPrecomputedY[m][A]+q;var e=this._aryPrecomputedSizeX[m][A];var d=this._aryPrecomputedSizeY[m][A];var b=this._aryPrecomputedFlags[m][A];if(false||(true&&(this._flags&1)!=0)){if(!true){var a=this._aryPrecomputedImgX[m][A];var w=this._aryPrecomputedImgY[m][A];var I=c.getClipX();var H=c.getClipY();var B=c.getClipWidth();var z=c.getClipHeight();var v=k;var u=h;var t=gloft.casttoshort((k+e));var s=gloft.casttoshort((h+d));if(k<I){v=I}if(h<H){u=H}if(t>I+B){t=gloft.casttoshort((I+B))}if(s>H+z){s=gloft.casttoshort((H+z))}c.setClip(v,u,t-v,s-u);GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(c,x,0,e,k-a,h-w,e,d,this._alpha,this._multiAlpha,0);c.setClip(I,H,B,z)}else{GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(c,x,0,e,k,h,e,d,this._alpha,this._multiAlpha,0)}}else{if(!true){var r=this._aryPrecomputedImgX[m][A];var p=this._aryPrecomputedImgY[m][A];if(b==0){var G=c.getClipX();var g=c.getClipY();var E=c.getClipWidth();var D=c.getClipHeight();var l=gloft.casttoshort(k);var j=gloft.casttoshort(h);var f=gloft.casttoshort((k+e));var C=gloft.casttoshort((h+d));if(k<G){l=gloft.casttoshort(G)}if(h<g){j=gloft.casttoshort(g)}if(f>G+E){f=gloft.casttoshort((G+E))}if(C>g+D){C=gloft.casttoshort((g+D))}c.setClip(gloft.casttoint(l),gloft.casttoint(j),f-l,C-j);c.drawImage(x,k-r,h-p,0);c.setClip(G,g,E,D)}else{if(false){c.drawImage(javax.microedition.lcdui.Image.createImage(x,gloft.casttoint(r),gloft.casttoint(p),gloft.casttoint(e),gloft.casttoint(d),b),k,h,0)}else{c.drawRegion(x,gloft.casttoint(r),gloft.casttoint(p),gloft.casttoint(e),gloft.casttoint(d),b,k,h,0)}}}else{if(b==0){c.drawImage(x,k,h,0)}else{if(false){c.drawImage(javax.microedition.lcdui.Image.createImage(x,0,0,gloft.casttoint(e),gloft.casttoint(d),b),k,h,0)}else{c.drawRegion(x,0,0,gloft.casttoint(e),gloft.casttoint(d),b,k,h,0)}}}}}}}},ModuleMarking_Init:function(){if(!false){GLLib.Assert(false,"ModuleMarking_Init: Must enable sprite_useOperationMark to use this function!")}if(false){if(this._modules_usage==null){this._modules_usage=gloft.ArrayCreation([this._nModules],gloft.casttobyte(null))}else{var a=this._nModules-1;while(--a>=0){this._modules_usage[a]=0}}}},ModuleMarking_MarkFromMarkedArray:function(a){if(!false){GLLib.Assert(false,"ModuleMarking_MarkFromMarkedArray : Must enable sprite_useOperationMark to use this function!")}if(this._modules_usage==null){GLLib.Assert(false,"ModuleMarking_MarkFromMarkedArray : Marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}if(a==null||this._modules_usage.length!=a.length){GLLib.Assert(false,"ModuleMarking_MarkFromMarkedArray : _modules_usage.length must equal markedArray.length")}if(false){java.lang.System.arraycopy(a,0,this._modules_usage,0,a.length)}},ModuleMarking_MarkFromFrames:function(d,c){if(!false){GLLib.Assert(false,"ModuleMarking_MarkFromFrames: Must enable sprite_useOperationMark to use this function!")}if(this._modules_usage==null){GLLib.Assert(false,"ModuleMarking_MarkFromFrames: Marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}if(false){ASprite._operation=3;var a=this.GetFrameCount()-1;d=((0>d)?0:d);c=((c<0)?a:((c<a)?c:a));for(var b=d;b<=c;++b){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(null,b,0,0,0,0,0)}ASprite._operation=0}},ModuleMarking_MarkFromAnims:function(f,e){if(!false){GLLib.Assert(false,"ModuleMarking_MarkFromAnims: Must enable sprite_useOperationMark to use this function!")}if(this._modules_usage==null){GLLib.Assert(false,"ModuleMarking_MarkFromAnims: Marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}if(false){ASprite._operation=3;var c=this.GetAnimationCount()-1;f=((0>f)?0:f);e=((e<0)?c:((e<c)?e:c));for(var d=f;d<=e;++d){for(var b=this.GetAFrames(d),a=0;a<b;++a){this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(null,this.GetAnimFrame(d,a),0,0,0,0,0)}}ASprite._operation=0}},ModuleMarking_MarkFromTilemap:function(g){if(!false){GLLib.Assert(false,"ModuleMarking_MarkFromTilemap: Must enable sprite_useOperationMark to use this function!")}if(this._modules_usage==null){GLLib.Assert(false,"ModuleMarking_MarkFromTilemap: Marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}if(false){ASprite._operation=3;var a=this.GetFrameCount()==0;var f=GLLibPlayer.Tileset_GetLayerTileCountWidth(g)-1;for(var e=GLLibPlayer.Tileset_GetLayerTileCountHeight(g)-1;e>=0;--e){for(var d=f;d>=0;--d){var c=GLLibPlayer.Tileset_GetTile(g,d,e);if(a){this.PaintModule_dup_javaxmicroeditionlcduiGraphicsIIII(null,c,0,0,0)}else{this.PaintFrame_dup_javaxmicroeditionlcduiGraphicsIIIIII(null,c,0,0,0,0,0)}}}ASprite._operation=0}},ReleaseUnmarkedModuleCompressedData:function(a){if(!false){GLLib.Assert(false,"ReleaseUnmarkedModuleCompressedData: Must enable sprite_useOperationMark to use this function!")}if(!false){GLLib.Assert(false,"ReleaseUnmarkedModuleCompressedData: Must enable sprite_useDoubleArrayForModuleData to use this function!")}if(this._modules_usage==null){GLLib.Assert(false,"ReleaseUnmarkedModuleCompressedData: Marking array is not allocated! Make sure to call ModuleMarking_Init() first!")}if(false&&false){for(var c=0;c<this._nModules;++c){if(this._modules_usage[c]==0){this._modules_data_array[c]=null}}if(a){this._modules_usage=null}}},readByteArrayNi:function(g,f,e,d,b,a){for(var c=0;c<d;++c){e[c*a+b]=g[f++]}return f},readArray2Short:function(j,h,g,f,d,a,c){for(var e=0;e<d;++e){g[e+f]=(a?j[h++]:(gloft.casttoshort(((j[h++]&255)+((j[h++]&255)<<8)))))}return h},BuildFrameIndexTable_dup_I:function(a){this.BuildFrameIndexTable_dup_II(a,a)},BuildFrameIndexTable_dup_II:function(a,m){var l=this._isExtraPaletteExist?(this._palettes-1):this.AllocateExtraIndexPalette();this.SetUseCacheRGB(this._isExtraPaletteExist=true);if(this._frame_data==null){this._frame_data=gloft.ArrayCreation([this.GetFrameCount()],gloft.casttobyte(null))}this.InitPalTransparentIndex(0);for(var h=(m==-1)?(this.GetFrameCount()-1):m,g=a;g<=h;++g){this._frame_data[g]=this.BuildByteFrameRGB_dup_IIaIZ(g,l,null,true);if(this._palTransparencyIndex==-1){for(var d=0;d<this._frame_data[g].length;++d){if(this._frame_data[g][d]==-1){GLLib.Dbg("ERROR: BuildFrameIndexTable failed!");GLLib.Dbg("Please, add FF00FF color to palette")}}}if(false){var o=gloft.ArrayCreation([this._frame_data[g].length],gloft.casttobyte(null));var p=this.GetFrameWidth(g);var f=this.GetFrameHeight(g);var e=0;var c=f-1;for(var b=0;b<this._frame_data[g].length;++b){o[c*p+e]=this._frame_data[g][b];if(c>0){--c}else{c=f-1;++e}}this._frame_data[g]=o}}this.SetUseCacheRGB(false)},GetFrameIndexTable:function(a){return this._frame_data[a]},IsFrameIndexTableBuild_dup_:function(){return this._frame_data!=null},IsFrameIndexTableBuild_dup_I:function(a){return this._frame_data!=null&&this._frame_data[a]!=null},PaintFrameScaledA6_dup_javaxmicroeditionlcduiGraphicsIIIIII:function(d,g,f,e,c,b,a){this.PaintFrameScaledA6_dup_javaxmicroeditionlcduiGraphicsIIIIIIZZ(d,g,f,e,c,b,a,false,false)},PaintFrameScaledA6_dup_javaxmicroeditionlcduiGraphicsIIIIIIZZ:function(K,W,I,H,G,D,C,Y,y){if(D<0||C<0){return}var a=this.GetCurrentPalette_dup_();var F=ASprite.GetPixelBuffer_int_dup_aI(null);var d=null;var N=null;var x=this._frame_data!=null&&this._frame_data[W]!=null;var q=this.GetPalette_dup_II(0,a);if(x){d=this._frame_data[W]}else{N=this.GetFrameRGB_dup_II(W,this._crt_pal)}var B=gloft.casttoint(null);var A=gloft.casttoint(null);var P=gloft.casttoint(null);var z=gloft.casttoint(null);if(false&&!x){B=this.GetFrameHeight(W);A=this.GetFrameWidth(W);P=-(B+this.GetFrameMinY(W));z=this.GetFrameMinX(W);var V=D;D=C;C=V;var U=I;I=ASprite._graphicsHeight-H;H=U}else{B=this.GetFrameWidth(W);A=this.GetFrameHeight(W);P=this.GetFrameMinX(W);z=this.GetFrameMinY(W)}var T=gloft.casttoint(P*D/100);var S=gloft.casttoint(z*C/100);var R=gloft.casttoint((B+P)*D/100);var Q=gloft.casttoint((A+z)*C/100);var O=R-T;var M=Q-S;if(y){T=0;S=0}if(O==0){return}if(M==0){return}var u=GLLib.GetClipX(GLLib.g,true);var t=GLLib.GetClipY(GLLib.g,true);var f=GLLib.GetClipWidth(GLLib.g,true);var e=GLLib.GetClipHeight(GLLib.g,true);var L=gloft.casttoint((B<<8)/O);var J=gloft.casttoint((A<<8)/M);var s=0;var r=O;var w=false;var v=false;H+=S;if((G&1)!=0){w=true;if(!Y){I-=r+T}}else{I+=T}if((G&2)!=0){v=true;if(!Y){H-=s+S}}var p=0;var o=0;if(I>=u+f||I+r<=u||H>=t+e||H+M<=t){return}if(I<u){var m=u-I;r-=m;p=gloft.casttoint(m*100/D);I=u}if(I+r>f+u){r=f+u-I}var l=0;if(H<t){var k=t-H;o=gloft.casttoint(k*100/C);A-=o;H=t;M-=k;l=0}if(H+M>e+t){M=e+t-H}var E=java.lang.Math.min(M-l,gloft.casttoint(F.length/r));var j=gloft.casttoint((M-l)/E);var h=p<<8;var g=o<<8;for(var X=0;X<j;++X){if(x){g=this.ScaleBlockIndexTable(F,d,q,h,g,B,A,r,E,L,J,w,v)}else{g=this.ScaleBlockRGB(F,N,h,g,B,A,r,E,L,J,w,v)}if(false&&!x){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(K,F,0,r,I,H+X*E,r,E,true,false,0,-1,false)}else{GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(K,F,0,r,I,H+X*E,r,E,true,true,0)}}var c=M-E*j;if(c>0){if(x){this.ScaleBlockIndexTable(F,d,q,h,g,B,A,r,c,L,J,w,v)}else{this.ScaleBlockRGB(F,N,h,g,B,A,r,c,L,J,w,v)}if(false&&!x){GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZIIZ(K,F,0,r,I,H+j*E,r,c,true,false,0,-1,false)}else{GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(K,F,0,r,I,H+j*E,r,c,true,true,0)}}},ScaleBlockIndexTable:function(h,B,z,w,p,m,k,g,f,d,c,A,e){var a=-1;var y=0;var v=p;for(var x=0;x<f;++x){var u=gloft.casttoint(null);if(e){u=k-1-(v>>8)}else{u=v>>8}var t=gloft.casttoint(null);if(A){t=(u+1)*m-1}else{t=u*m}var s=w;var r=y;var q=y+g;if(a==u){java.lang.System.arraycopy(h,y-g,h,y,g)}else{if(A){while(y<q){var o=B[t-(s>>8)]&255;if(o==255){h[y]=0}else{h[y]=z[o]}++y;s+=d}}else{while(y<q){var l=B[(s>>8)+t]&255;if(l==255){h[y]=0}else{h[y]=z[l]}++y;s+=d}}}y=r+g;v+=c;a=u}return v},ScaleBlockRGB:function(h,y,u,m,l,k,g,f,d,c,x,e){var a=-1;var w=0;var t=m;for(var v=0;v<f;++v){var s=gloft.casttoint(null);if(e){s=k-1-(t>>8)}else{s=t>>8}var r=gloft.casttoint(null);if(x){r=(s+1)*l-1}else{r=s*l}var q=u;var p=w;var o=w+g;if(a==s){java.lang.System.arraycopy(h,w-g,h,w,g)}else{if(x){while(w<o){h[w]=y[r-(q>>8)];++w;q+=d}}else{while(w<o){h[w]=y[(q>>8)+r];++w;q+=d}}}w=p+g;t+=c;a=s}return t},FreeModuleData:function(){this._modules_x_byte=null;this._modules_y_byte=null;this._modules_x_short=null;this._modules_y_short=null;this._modules_w_scaled=null;this._modules_h_scaled=null;this._modules_w_short=null;this._modules_h_short=null;this._modules_w_byte=null;this._modules_h_byte=null;this._modules_extra_info=null;this._modules_extra_pointer=null;this._frames_nfm_byte=null;this._frames_nfm_short=null;this._frames_fm_start=null;this._frame_image_intAAA=null;this._fmodules_id_byte=null;this._fmodules_id_short=null;this._fmodules_flags=null;this._fmodules_ox_byte=null;this._fmodules_oy_byte=null;this._fmodules_ox_short=null;this._fmodules_oy_short=null;this._modules_data=null;this._modules_data_array=null;this._modules_data_off_int=null;this._modules_data_off_short=null;this._module_types=null;this._module_colors_int=null;this._module_colors_byte=null;ASprite._warpTextInfo=null},DrawYPerspective:function(S,ai,O,N,L,J,H,G,F){if(N<=O||G<L||H<J){return}var E=0;var af=0;var ad=640;var ab=360;if(N<=E||O>=ad){return}var l=this.GetCurrentPalette_dup_();var q=this.GetFrameWidth(ai);var I=this.GetFrameHeight(ai);var Y=gloft.casttoint(null);var Z=Y=N-O;var X=q<<8;var W=gloft.casttoint(X/Y);var U=0;if((F&1)!=0){U=X-(1<<8);W=-W}var T=gloft.casttoint((J-L<<8)/Y);var R=gloft.casttoint((H-G<<8)/Y);var D=0;if(J!=L){D=gloft.casttoint((Y<<8)/java.lang.Math.abs(J-L))}var C=L<<8;var B=G<<8;if(O<E){var z=E-O;Z-=z;U+=W*z;if(U<0||U>=X){return}var y=C+T*z;B+=R*z;L=y+(1<<8-1)>>8;G=B+(1<<8-1)>>8;O=E}var x=U+(1<<8-1)>>8;if(x<0||x>=q||Z<=0){return}if(N>ad){var w=N-ad;Z-=w;J=(J<<8)-T*w+(1<<8-1)>>8;H=(H<<8)-R*w+(1<<8-1)>>8;N=ad}if(L>=ab){var v=(L-ab+1)*D+(1<<8-1)>>8;Z-=v;O+=v;U+=W*v;if(U<0||U>=X){return}G=B+R*v+(1<<8-1)>>8;L=ab-1}if(J>=ab){var u=(J-ab+1)*D+(1<<8-1)>>8;Z-=u;N=O+Z;H=(H<<8)-R*u+(1<<8-1)>>8;J=ab-1}if(Z<=0){return}var M=java.lang.Math.min(L,J);if(M<af){M=af}var g=java.lang.Math.max(H,G);if(g>ab){g=ab}var t=g-M;if(t<=0){return}var K=ASprite.GetPixelBuffer_int_dup_aI(null);var p=null;var V=null;var ak=this._frame_data!=null&&this._frame_data[ai]!=null;var A=this.GetPalette_dup_II(0,l);if(ak){p=this._frame_data[ai]}else{V=this.GetFrameRGB_dup_II(ai,this._crt_pal)}var o=gloft.casttoint(K.length/t);var m=gloft.casttoint((N-O)/o);var k=L;var j=G;for(var aj=0;aj<m;++aj){var h=L+gloft.casttoint((J-L)*o*(aj+1)/Z);var f=G+gloft.casttoint((H-G)*o*(aj+1)/Z);var Q=java.lang.Math.min(k,h);var s=java.lang.Math.max(f,j);if(Q<af){Q=af}if(s>ab){s=ab}var e=s-Q;var d=k<<8;var c=j<<8;if(p!=null){U=this.PrepareYPerspectiveBlockIT(K,A,p,o,e,q,I,U,O+o*aj,O+o*(aj+1),Q,s,d,c,W,T,R)}else{U=this.PrepareYPerspectiveBlockRGB(K,V,o,e,q,I,U,O+o*aj,O+o*(aj+1),Q,s,d,c,W,T,R)}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(S,K,0,o,O+o*aj,Q,o,e,true,true,0);k=h;j=f}var a=Z-o*m;if(a>0){var ah=J;var ag=H;var P=java.lang.Math.min(k,ah);var r=java.lang.Math.max(ag,j);if(P<af){P=af}if(r>ab){r=ab}var ae=r-P;var ac=k<<8;var aa=j<<8;if(p!=null){this.PrepareYPerspectiveBlockIT(K,A,p,a,ae,q,I,U,O+o*m,N,P,r,ac,aa,W,T,R)}else{this.PrepareYPerspectiveBlockRGB(K,V,a,ae,q,I,U,O+o*m,N,P,r,ac,aa,W,T,R)}GLLib.DrawRGB_dup_javaxmicroeditionlcduiGraphicsaIIIIIIIZZI(S,K,0,a,O+o*m,P,a,ae,true,true,0)}},PrepareYPerspectiveBlockIT:function(h,L,K,y,r,p,m,f,d,c,b,a,x,w,v,u,t){var s=f>>8;var F=x+(1<<8-1)>>8;var q=w+(1<<8-1)>>8;for(var D=d;D<c;++D){if(q>=b){if(F<a){var o=D-d;for(var B=F-b-1;B>=0;--B){h[o]=0;o+=y}var g=(r-1)*y+D-d;for(var z=a-q-1;z>=0;--z){h[g]=0;g-=y}if(F<q){var e=D-d;var J=0;var I=0;var H=gloft.casttoint((m<<8)/(q-F));if(F<b){J+=H*(b-F);F=b}else{e+=y*(F-b)}if(q>a){q=a}var G=K[s]&255;var E=gloft.casttoint(null);if(G==255){E=0}else{E=L[G]}while(F<q){var C=J>>8;if(I!=C){s+=(C-I)*p;var A=K[s]&255;if(A==255){E=0}else{E=L[A]}I=C}h[e]=E;e+=y;J+=H;++F}}x+=u;w+=t;f+=v;F=x>>8;q=w>>8;s=f>>8;if(s<0){s=0;f=0}else{if(s>=p){s=p-1;f=s<<8}}}}}return f},PrepareYPerspectiveBlockRGB:function(h,K,y,r,p,m,f,d,c,b,a,x,w,v,u,t){var s=f>>8;var F=x+(1<<8-1)>>8;var q=w+(1<<8-1)>>8;for(var D=d;D<c;++D){if(q>=b){if(F<a){var o=D-d;for(var B=F-b-1;B>=0;--B){h[o]=0;o+=y}var g=(r-1)*y+D-d;for(var z=a-q-1;z>=0;--z){h[g]=0;g-=y}if(F<q){var e=D-d;var J=0;var I=0;var H=gloft.casttoint((m<<8)/(q-F));if(F<b){J+=H*(b-F);F=b}else{e+=y*(F-b)}if(q>a){q=a}var E=gloft.casttoint(null);if(false){var G=gloft.casttoint(s/p);E=K[(s-G*p)*m+(m-1-G)]}else{E=K[s]}while(F<q){var C=J>>8;if(I!=C){s+=(C-I)*p;if(false){var A=gloft.casttoint(s/p);E=K[(s-A*p)*m+(m-1-A)]}else{E=K[s]}I=C}h[e]=E;e+=y;J+=H;++F}}x+=u;w+=t;f+=v;F=x>>8;q=w>>8;s=f>>8;if(s<0){s=0;f=0}else{if(s>=p){s=p-1;f=s<<8}}}}}return f},GetFrameModulesCount:function(a){if(false||(true&&(this._bs_flags&1048576)!=0)){return this._frames_nfm_short[a]}return this._frames_nfm_byte[a]},InitPalTransparentIndex:function(c){var b=this.GetPalette_dup_II(0,c);for(var a=0;a<b.length;++a){if((b[a]&-16777216)==0){this._palTransparencyIndex=a;break}}},ctor:function(){this._cur_pool=-1;this._palBlend_srcA=-1;this._palBlend_srcB=-1;this._palBlend_dest=-1;this._palBlend_current=-1;this._palBlend_UseOneColor=false;this._bRotatedFont=false;this._nCharYOffset=0;this._bUnderline=false;this._bBold=false;this._pMapChar=ASprite.s_MapChar;this.m_scaleAccelerator=-1;this.nALetterRect=gloft.ArrayCreation([4],gloft.casttoint(null));this._isExtraPaletteExist=false;this._palTransparencyIndex=-1},});ASprite.BSPRITE_v003=991;ASprite.BSPRITE_v004=1247;ASprite.BSPRITE_v005=1503;ASprite.SUPPORTED_VERSION=1503;ASprite.BS_MODULES=1;ASprite.BS_MODULES_XY=2;ASprite.BS_MODULES_IMG=4;ASprite.BS_MODULE_IMAGES_TC_BMP=8;ASprite.BS_MODULES_WH_SHORT=16;ASprite.BS_MODULES_XY_SHORT=32;ASprite.BS_MODULES_USAGE=64;ASprite.BS_IMAGE_SIZE_INT=128;ASprite.BS_FRAMES=256;ASprite.BS_FM_OFF_SHORT=1024;ASprite.BS_NFM_SHORT=2048;ASprite.BS_SKIP_FRAME_RC=4096;ASprite.BS_FRAME_COLL_RC=8192;ASprite.BS_FM_PALETTE=16384;ASprite.BS_FRAME_RECTS=32768;ASprite.BS_ANIMS=65536;ASprite.BS_NO_AF_START=131072;ASprite.BS_AF_OFF_SHORT=262144;ASprite.BS_NAF_SHORT=524288;ASprite.BS_FM_INDEX_SHORT=1048576;ASprite.BS_AF_INDEX_SHORT=2097152;ASprite.BS_EXTRA_FLAGS=4194304;ASprite.BS_MODULE_IMAGES_FX=8388608;ASprite.BS_MODULE_IMAGES=16777216;ASprite.BS_PNG_CRC=33554432;ASprite.BS_KEEP_PAL=67108864;ASprite.BS_TRANSP_FIRST=134217728;ASprite.BS_TRANSP_LAST=268435456;ASprite.BS_SINGLE_IMAGE=536870912;ASprite.BS_MULTIPLE_IMAGES=1073741824;ASprite.BS_GIF_HEADER=java.lang.Integer.MIN_VALUE;ASprite.BS_DEFAULT_DOJA=-2130640575;ASprite.BS_DEFAULT_MIDP2=16843009;ASprite.BS_DEFAULT_NOKIA=16843009;ASprite.BS_DEFAULT_MIDP1=65795;ASprite.BS_DEFAULT_MIDP1b=50397441;ASprite.BS_DEFAULT_MIDP1c=536936707;ASprite.BS_EX0_FM_FREE_ROTATE_SCALE=1;ASprite.BS_EX0_AF_FREE_ROTATE_SCALE=2;ASprite.BS_EX0_MULTIPAL_IMAGE=4;ASprite.BS_EX0_MULTI_IMAGE=8;ASprite.BS_EX0_FM_BLEND_MODE=16;ASprite.BS_EX0_MODULE_IMAGES_USED=32;ASprite.PIXEL_FORMAT_8888=-30584;ASprite.PIXEL_FORMAT_4444=17476;ASprite.PIXEL_FORMAT_1555=21781;ASprite.PIXEL_FORMAT_0565=25861;ASprite.PIXEL_FORMAT_0332=12803;ASprite.PIXEL_FORMAT_8808=-30712;ASprite.ENCODE_FORMAT_I2=512;ASprite.ENCODE_FORMAT_I4=1024;ASprite.ENCODE_FORMAT_I16=5632;ASprite.ENCODE_FORMAT_I256=22018;ASprite.ENCODE_FORMAT_I64RLE=25840;ASprite.ENCODE_FORMAT_I127RLE=10225;ASprite.ENCODE_FORMAT_I256RLE=22258;ASprite.ENCODE_FORMAT_A8_I32=933;ASprite.ENCODE_FORMAT_A32_I8=1443;ASprite.ENCODE_FORMAT_A256_I64=-24476;ASprite.ENCODE_FORMAT_A256_I128=-24280;ASprite.ENCODE_FORMAT_A256_I256=-23198;ASprite.ENCODE_FORMAT_A256_I64RLE=-22976;ASprite.ENCODE_FORMAT_A256_I127RLE=-24281;ASprite.ENCODE_FORMAT_A256_I256RLE=-23978;ASprite.FLAG_FLIP_X=1;ASprite.FLAG_FLIP_Y=2;ASprite.FLAG_ROT_90=4;ASprite.FLAG_USER0=16;ASprite.FLAG_USER1=32;ASprite.FLAG_HYPER_FM=16;ASprite.FLAG_INDEX_EX_MASK=192;ASprite.INDEX_MASK=1023;ASprite.INDEX_EX_MASK=768;ASprite.INDEX_EX_SHIFT=2;ASprite.FLAG_OFFSET_FM=16;ASprite.FLAG_OFFSET_AF=32;ASprite.OPERATION_DRAW=0;ASprite.OPERATION_COMPUTERECT=1;ASprite.OPERATION_RECORD=2;ASprite.OPERATION_MARK=3;ASprite.OPERATION_NUM=4;ASprite.RESIZE_NONE=0;ASprite.RESIZE_CREATERGB=1;ASprite.RESIZE_DRAW_ON_MUTABLE=2;ASprite.RESIZE_NOT_CACHED=3;ASprite.MD_IMAGE=0;ASprite.MD_RECT=1;ASprite.MD_FILL_RECT=2;ASprite.MD_ARC=3;ASprite.MD_FILL_ARC=4;ASprite.MD_MARKER=5;ASprite.MD_TRIANGLE=6;ASprite.MD_FILL_TRIANGLE=7;ASprite.MD_LINE=8;ASprite.MD_FILL_RECT_GRAD=9;ASprite.MAX_TRANSFORMATION_FLAGS=8;ASprite.FLAG_USE_CACHE_RGB=1;ASprite.FLAG_USE_MODULE_MASK=2;ASprite.FLAG_FORCE_SHORT_FRAME_RC=4;ASprite.FLAG_USE_PAL_INDEX_CACHE=8;ASprite.FLAG_FORCE_CURRENT_PAL=16;ASprite.FLAG_USE_MARKER_CALLBACK=32;ASprite.ALPHA_NONE=0;ASprite.ALPHA_TRANSPARENT=1;ASprite.ALPHA_FULL=2;ASprite.ALPHA_INDEX=3;ASprite.RENDER_TO_TILESET_BACKBUFFER_LAYER_MASK=65535;ASprite.RENDER_TO_TILESET_BACKBUFFER_FORCE_MASK=1048576;ASprite.RENDER_TO_TILESET_BACKBUFFER_ENABLE_MASK=16777216;ASprite.k_blend_normal=0;ASprite.k_blend_average=1;ASprite.k_blend_multiply=2;ASprite.k_blend_screen=3;ASprite.k_blend_darken=4;ASprite.k_blend_lighten=5;ASprite.k_blend_difference=6;ASprite.k_blend_negation=7;ASprite.k_blend_exclusion=8;ASprite.k_blend_overlay=9;ASprite.k_blend_hardLight=10;ASprite.k_blend_softLight=11;ASprite.k_blend_xFader=12;ASprite.k_blend_colorDodge=13;ASprite.k_blend_colorDodge2=14;ASprite.k_blend_colorBurn=15;ASprite.k_blend_inverseColorDodge=16;ASprite.k_blend_inverseColorBurn=17;ASprite.k_blend_softDodge=18;ASprite.k_blend_softBurn=19;ASprite.k_blend_reflect=20;ASprite.k_blend_glow=21;ASprite.k_blend_freeze=22;ASprite.k_blend_heat=23;ASprite.k_blend_additive=24;ASprite.k_blend_substractive=25;ASprite.k_blend_interpolation=26;ASprite.k_blend_stamp=27;ASprite.k_blend_xor=28;ASprite.k_blend_gllibMultiplicative=29;ASprite.BLOCK_INFO_SIZE=11;ASprite.PNG_INFO_SIZE=57;ASprite.HEADER_LEVEL0_MAX_WBITS=30938;ASprite.BASE=65521;ASprite.NMAX=5552;ASprite.MAGIC=null;ASprite.IHDR=null;ASprite.PLTE=null;ASprite.tRNS=null;ASprite.IDAT=null;ASprite.IEND=null;ASprite.INFO32=null;ASprite.INFO8=null;ASprite.MAGIC_IEND=null;ASprite.MAGIC_IDAT_h=null;ASprite._buffer_index=null;ASprite._png_index=null;ASprite._png_result=null;ASprite._png_size=gloft.casttoint(null);ASprite._png_start_crc=gloft.casttoint(null);ASprite.mod=gloft.casttoint(null);ASprite.crcTable=null;ASprite.CRC32_POLYNOMIAL=-306674912;ASprite.currentChunkType=gloft.casttoint(null);ASprite.s_resizeOn=gloft.casttoboolean(null);ASprite.s_resizeUseShifts=gloft.casttoboolean(null);ASprite.s_resizeShiftX=gloft.casttoint(null);ASprite.s_resizeShiftY=gloft.casttoint(null);ASprite.s_originalWidth=gloft.casttoint(null);ASprite.s_originalHeight=gloft.casttoint(null);ASprite.s_resizedWidth=gloft.casttoint(null);ASprite.s_resizedHeight=gloft.casttoint(null);ASprite.s_resizeSrcBuffer=null;ASprite.s_resizeDstBuffer=null;ASprite._poolCacheStack=null;ASprite._poolCacheStackIndex=null;ASprite._poolCacheStackMax=null;ASprite._poolCacheSprites=null;ASprite.s_BCI_supportsCacheEffects=gloft.casttoboolean(null);ASprite.s_BCI_effects=null;ASprite.BCI_EFFECT_REFLECTION=1;ASprite.BCI_EFFECT_NUM=2;ASprite.BCI_EFFECT_PARAM_TYPE=0;ASprite.BCI_REFLECTION_PARAM_NEW=1;ASprite.BCI_REFLECTION_PARAM_DIRECTION=2;ASprite.BCI_REFLECTION_PARAM_ALPHA_START=3;ASprite.BCI_REFLECTION_PARAM_ALPHA_END=4;ASprite.BCI_REFLECTION_PARAM_PERCENT=5;ASprite.BCI_REFLECTION_PARAM_MODULE_START=6;ASprite.BCI_REFLECTION_PARAM_MODULE_END=7;ASprite.BCI_REFLECTION_PARAM_MODULE_END_ID=8;ASprite.BCI_REFLECTION_PARAM_CACHE_ID=9;ASprite.BCI_REFLECTION_PARAM_NUM=10;ASprite.s_isConvertEncodeTMPBufOn=gloft.casttoboolean(null);ASprite.s_convertEncodeTMPBuffer=null;ASprite.s_convertEncodeExtraBufferSize=10;ASprite._old_pal=gloft.casttoint(null);ASprite._text_w=gloft.casttoint(null);ASprite._text_h=gloft.casttoint(null);ASprite._text_leftCornerOffX=gloft.casttoint(null);ASprite._text_leftCornerOffY=gloft.casttoint(null);ASprite.s_MapChar=null;ASprite._warpTextInfo=null;ASprite.WRAP_TEXT_FORMATTING_MASK_PALETTE=4095;ASprite.WRAP_TEXT_FORMATTING_FLAG_IS_BOLD=4096;ASprite.WRAP_TEXT_FORMATTING_FLAG_IS_UNDERLINED=8192;ASprite._index1=gloft.casttoint(null);ASprite._index2=gloft.casttoint(null);ASprite._indexMax=gloft.casttoint(null);ASprite.k_itoa_buffer_size=33;ASprite._itoa_buffer=null;ASprite.PAL_ORIGINAL=-1;ASprite.PAL_INVISIBLE=0;ASprite.PAL_RED_YELLOW=1;ASprite.PAL_BLUE_CYAN=2;ASprite.PAL_GREEN=3;ASprite.PAL_GREY=4;ASprite.PAL_BLEND_BLACK=5;ASprite.record_index=gloft.casttoint(null);ASprite.record_frame=gloft.casttoint(null);ASprite._operation=gloft.casttoint(null);ASprite.s_charBuffer=null;ASprite.s_useBidi=gloft.casttoboolean(null);ASprite.temp_int=null;ASprite.temp_short=null;ASprite.temp_byte=null;ASprite.transform_int=null;ASprite.transform_short=null;ASprite.temp=null;ASprite._graphics=null;ASprite._customGraphics=null;ASprite._graphicsWidth=gloft.casttoint(null);ASprite._graphicsHeight=gloft.casttoint(null);ASprite._customGraphicsWidth=gloft.casttoint(null);ASprite._customGraphicsHeight=gloft.casttoint(null);ASprite._customGraphicsAlpha=gloft.casttoint(null);ASprite._customGraphicsClipX=gloft.casttoint(null);ASprite._customGraphicsClipY=gloft.casttoint(null);ASprite._customGraphicsClipW=gloft.casttoint(null);ASprite._customGraphicsClipH=gloft.casttoint(null);ASprite._renderToTilesetBackBufferEnabled=gloft.casttoint(null);ASprite.s_frame_image_bHasAlpha=gloft.casttoboolean(null);ASprite._frame_image_temp=null;ASprite._images_count=gloft.casttoint(null);ASprite._images_size=gloft.casttoint(null);ASprite.mem=gloft.casttoint(null);ASprite.midp2_flags=null;ASprite.TRANSFORM_FLIP_X=null;ASprite.TRANSFORM_FLIP_Y=null;ASprite.TRANSFORM_ROT_90=null;ASprite.s_resizeType=gloft.casttoint(null);ASprite._rectX1=gloft.casttoint(null);ASprite._rectY1=gloft.casttoint(null);ASprite._rectX2=gloft.casttoint(null);ASprite._rectY2=gloft.casttoint(null);ASprite.s_rc=null;ASprite.s_gcEnabled=gloft.casttoboolean(null);ASprite.s_debugSkipPaintModule=gloft.casttoboolean(null);ASprite.s_moduleMask=gloft.casttoint(null);ASprite.s_moduleBufferState=gloft.casttoint(null);ASprite.MODULE_STATE_MODULE_ID_MASK=65535;ASprite.MODULE_STATE_PALETTE_MASK=268369920;ASprite.MODULE_STATE_PALETTE_SHIFT=16;ASprite.MODULE_STATE_DISABLE_MASK=java.lang.Integer.MIN_VALUE;ASprite.MODULE_STATE_INIT_MASK=268435455;ASprite.k_cCanBreakLine=gloft.casttochar(null);ASprite._useLineBreakChar=gloft.casttoboolean(null);ASprite._lineBreakChar=gloft.casttochar(null);ASprite.s_drawTextBottomToTop=gloft.casttoboolean(null);ASprite.m_bMarkerCallbackEnabled=gloft.casttoboolean(null);ASprite.m_bMarkerCallbackID=gloft.casttoint(null);ASprite.m_bMarkerCallbackVisible=gloft.casttoboolean(null);ASprite.m_bMarkerCallbackLastID=gloft.casttoint(null);ASprite.m_bMarkerCallbackLastPosX=gloft.casttoint(null);ASprite.m_bMarkerCallbackLastPosY=gloft.casttoint(null);ASprite.m_bMarkerCallbackLastVisible=gloft.casttoboolean(null);ASprite.m_bEnableFreeWrap=gloft.casttoboolean(null);ASprite.DrawLine=function(d,v,m,k,h,a,g,f){var e=0;var c=0;var u=d.getColor();d.setColor(a);var b=v;var t=m;var z=k-v;var w=h-m;if(z>=0){e=1}if(z<0){e=-1;z=java.lang.Math.abs(z)}if(w>=0){c=1}if(w<0){c=-1;w=java.lang.Math.abs(w)}var s=z*2;var r=w*2;var q=0;var p=(5-f)*g;if(z>w){var o=r-z;for(var y=0;y<=z;++y){if(q==p){if(!false){d.fillRoundRect(b-g,t-g,g*2,g*2,30,30)}else{d.fillRect(b-g,t-g+1,g<<1,(g<<1)-2);d.fillRect(b-g+1,t-g,(g<<1)-2,g<<1)}}q+=e*e+c*c;if(q>6*g){q=0}if(o>=0){o-=s;t+=c}o+=r;b+=e}}else{var l=s-w;for(var x=0;x<=w;++x){if(q==p){if(!false){d.fillRoundRect(b-g,t-g,g*2,g*2,30,30)}else{d.fillRect(b-g,t-g+1,g<<1,(g<<1)-2);d.fillRect(b-g+1,t-g,(g<<1)-2,g<<1)}}q+=e*e+c*c;if(q>6*g){q=0}if(l>=0){l-=r;b+=e}l+=s;t+=c}}d.setColor(u)};ASprite.GetPixelBuffer_int_dup_aI=function(a){if(a==null||a!=ASprite.temp_int){if(false&&ASprite._frame_image_temp!=null&&a!=ASprite._frame_image_temp&&(ASprite.temp_int==null||256>35000)){return ASprite._frame_image_temp}if(ASprite.temp_int==null){ASprite.temp_int=gloft.ArrayCreation([35000],gloft.casttoint(null))}return ASprite.temp_int}else{if(a!=null&&a==ASprite.transform_int){GLLib.Dbg("GetPixelBuffer_int: Error - passed buffer equals both temp_int AND transform_int, this means temp_int == transform_int?!?!");return null}if(false&&ASprite._frame_image_temp!=null&&a!=ASprite._frame_image_temp&&(ASprite.transform_int==null||(256>35000&&256>-1))){return ASprite._frame_image_temp}if(ASprite.transform_int==null){if(-1>0){ASprite.transform_int=gloft.ArrayCreation([-1],gloft.casttoint(null))}else{ASprite.transform_int=gloft.ArrayCreation([35000],gloft.casttoint(null))}}return ASprite.transform_int}};ASprite.GetPixelBuffer_short_dup_aS=function(a){if(a==null||a!=ASprite.temp_short){if(ASprite.temp_short==null){ASprite.temp_short=gloft.ArrayCreation([35000],gloft.casttoshort(null))}return ASprite.temp_short}if(a==null||a!=ASprite.transform_short){if(ASprite.transform_short==null){ASprite.transform_short=gloft.ArrayCreation([35000],gloft.casttoshort(null))}return ASprite.transform_short}GLLib.Dbg("GetPixelBuffer_short: Error - passed buffer equals both temp_int AND transform_int, this means temp_short == transform_short?!?!");return null};ASprite.GetPixelBuffer_byte_dup_aB=function(a){if(a==null||a!=ASprite.temp_byte){if(ASprite.temp_byte==null){ASprite.temp_byte=gloft.ArrayCreation([35000],gloft.casttobyte(null))}return ASprite.temp_byte}GLLib.Dbg("GetPixelBuffer_byte: Error - passed buffer equals temp_byte");return null};ASprite.SetModuleMask=function(a){if(false){ASprite.s_moduleMask=a}else{GLLib.Dbg("SetModuleMask: You need to enable sprite_allowModuleMarkerMasking to use this functionality!")}};ASprite.EnableGC=function(a){ASprite.s_gcEnabled=a};ASprite.SetupRenderToTilesetBufferMode=function(c,a){if(!false){GLLib.Assert(false,"SetupRenderToTilesetBufferMode: You must enable tileset_useRenderRedirectToBuffer to use this feature!")}ASprite._renderToTilesetBackBufferEnabled|=16777216;ASprite._renderToTilesetBackBufferEnabled|=(c&65535);if(a){ASprite._renderToTilesetBackBufferEnabled|=1048576}};ASprite.CheckVisibility=function(c,v,m,k,i){var x=GLLib.GetClipX(c,true);var w=GLLib.GetClipY(c,true);var y=GLLib.GetClipWidth(c,true);var u=GLLib.GetClipHeight(c,true);if(true&&(GLLib.s_PFX_type&1<<13)!=0){var f=GLLib.s_PFX_params[13][1];var e=(f!=100)?f:GLLib.s_PFX_params[13][3];var d=GLLib.s_PFX_params[13][1];var b=(d!=100)?d:GLLib.s_PFX_params[13][4];k=gloft.casttoint(k*e/100);i=gloft.casttoint(i*b/100)}else{if(false&&(GLLib.s_PFX_type&1<<17)!=0){var a=GLLib.s_PFX_params[17][1];var t=(a!=100)?a:GLLib.s_PFX_params[17][3];var s=GLLib.s_PFX_params[17][1];var r=(s!=100)?s:GLLib.s_PFX_params[17][4];k=gloft.casttoint(k*t/100);i=gloft.casttoint(i*r/100)}else{if(true&&(GLLib.s_PFX_type&1<<15)!=0){return true}}}if(false&&(GLLib.s_PFX_type&1<<16)!=0){var q=GLLib.s_PFX_params[16][0];var p=k;var o=i;var h=ASprite.s_rc;var l=o;var j=p;var g=q;if(GLLib.s_math_cosTable==null){GLLib.Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}GLLib.PFX_Rotate_GetRotatedRectSize(GLLib.Math_Cos(GLLib.Math_Angle90-g),GLLib.Math_Cos(g),j,l,h);k=ASprite.s_rc[0];i=ASprite.s_rc[1]}return v+k>=x&&m+i>=w&&v<x+y&&m<w+u};ASprite.SetGraphics_dup_javaxmicroeditionlcduiGraphics=function(a){};ASprite.SetGraphics_dup_aIIII=function(b,d,a,c){if(true){if(b!=null&&b.length<d*a){GLLib.Assert(false,"SetGraphics: buffer size does not supported passed in dimensions!")}if(b==null){d=GLLib.s_screenWidth;a=GLLib.s_screenHeight}ASprite._customGraphics=b;ASprite._graphicsWidth=d;ASprite._graphicsHeight=a;ASprite._customGraphicsAlpha=c;if(false){ASprite._customGraphicsWidth=a;ASprite._customGraphicsHeight=d}else{ASprite._customGraphicsWidth=d;ASprite._customGraphicsHeight=a}GLLib.SetClip(GLLib.g,0,0,d,a,true)}else{GLLib.Dbg("SetGraphics: Trying to set a custom pixel graphics context but sprite_allowPixelArrayGraphics is not enabled!!")}};ASprite.BlitARGB=function(k,V,E,D,C,B,t,A,z,y,x,S){if(k==null){GLLib.Assert(false,"BlitARGB: Target is null!")}if(t==null){GLLib.Assert(false,"BlitARGB: Source is null!")}if(k==t){GLLib.Assert(false,"BlitARGB: Target is same as Source!")}if(k.length<V*E){GLLib.Assert(false,"BlitARGB: Target array is smaller than the dimensions indicate!")}if(t.length<A*z){GLLib.Assert(false,"BlitARGB: Target array is smaller than the dimensions indicate!")}if(A<=0||z<=0){return}if((x&4)!=0){var Q=A;A=z;z=Q}var O=(C>0)?C:0;var M=(C+A<V)?(C+A):V;var K=(B>0)?B:0;var J=(B+z<E)?(B+z):E;var I=(O>ASprite._customGraphicsClipX)?O:ASprite._customGraphicsClipX;var H=(M<ASprite._customGraphicsClipX+ASprite._customGraphicsClipW)?M:(ASprite._customGraphicsClipX+ASprite._customGraphicsClipW);var G=(K>ASprite._customGraphicsClipY)?K:ASprite._customGraphicsClipY;var F=(J<ASprite._customGraphicsClipY+ASprite._customGraphicsClipH)?J:(ASprite._customGraphicsClipY+ASprite._customGraphicsClipH);if(I>H||G>F){return}var w=H-I;var v=F-G;var u=A-w;var s=0;var r=0;var q=0;var p=0;x&=7;if((x&4)!=0){var o=w;w=v;v=o;var m=A;A=z;z=m;u=A-w}if(x==0){s=1;r=V-w;q=G*V+I-1;p=(G-B)*A+(I-C)-1}else{if(x==1){s=-1;r=V+w;q=G*V+H;p=(G-B)*A+(A-(H-C))-1}else{if(x==2){s=1;r=-(V+w);q=(F-1)*V+I-1;p=(z-(F-B))*A+(I-C)-1}else{if(x==3){s=-1;r=-(V-w);q=(F-1)*V+H;p=(z-(F-B))*A+(A-(H-C))-1}else{if(x==4){s=V;r=-(V*w)-1;q=(G-1)*V+H-1;p=(z-(H-C))*A+(G-B)-1}else{if(x==5){s=-V;r=V*w-1;q=F*V+H-1;p=(z-(H-C))*A+(A-(F-B))-1}else{if(x==6){s=V;r=-(V*w)+1;q=(G-1)*V+I;p=(I-C)*A+(G-B)-1}else{if(x==7){s=-V;r=V*w+1;q=F*V+I;p=(I-C)*A+(A-(F-B))-1}}}}}}}}var l=v;if(y==0){while(--l>=0){while(--w>=0){q+=s;k[q]=t[++p]}q+=r;p+=u}}else{if(y==1){while(--l>=0){while(--w>=0){q+=s;++p;if((t[p]&-16777216)!=0){k[q]=t[p]}}q+=r;p+=u}}else{if(D==0){while(--l>=0){while(--w>=0){q+=s;var j=t[++p]>>24&255;if(j==255){k[q]=t[p]}else{if(j==0){continue}var i=-16777216;var h=k[q]&16711935;var g=i|(h+(((t[p]&16711935)-h)*j>>8)&16711935);var f=k[q]&65280;k[q]=(g|(f+(((t[p]&65280)-f)*j>>8)&65280))}}q+=r;p+=u}}else{if(y==3){while(--l>=0){while(--w>=0){q+=s;if(t[++p]!=S){k[q]=t[p]}}q+=r;p+=u}}else{while(--l>=0){while(--w>=0){q+=s;++p;var e=k[q]>>24&255;var d=t[p]>>24&255;if(e==0||d==255){k[q]=t[p]}else{if(d==0){continue}if(e==255){var c=-16777216;var b=k[q]&16711935;var a=c|(b+(((t[p]&16711935)-b)*d>>8)&16711935);var U=k[q]&65280;k[q]=(a|(U+(((t[p]&65280)-U)*d>>8)&65280))}else{var T=65025-(255-e)*(255-d)>>8;if(T==0){k[q]=0}else{var R=(255-d)*e;var P=gloft.casttoint(((t[p]>>16&255)*d+(R*(k[q]>>16&255)>>8))/T);var N=gloft.casttoint(((t[p]>>8&255)*d+(R*(k[q]>>8&255)>>8))/T);var L=gloft.casttoint(((t[p]&255)*d+(R*(k[q]&255)>>8))/T);if(P>255){P=255}if(N>255){N=255}if(L>255){L=255}k[q]=(T<<24|P<<16|N<<8|L)}}}}q+=r;p+=u}}}}}};ASprite.FillRectARGB=function(i,w,m,l,j,g,e,d,c){if(i==null){GLLib.Assert(false,"FillRectARGB: Target is null!")}if(i.length<w*m){GLLib.Assert(false,"FillRectARGB: Target array is smaller than the dimensions indicate!")}if(e<=0||d<=0){return}var b=(j>0)?j:0;var u=(j+e<w)?(j+e):w;var t=(g>0)?g:0;var s=(g+d<m)?(g+d):m;var r=(b>ASprite._customGraphicsClipX)?b:ASprite._customGraphicsClipX;var q=(u<ASprite._customGraphicsClipX+ASprite._customGraphicsClipW)?u:(ASprite._customGraphicsClipX+ASprite._customGraphicsClipW);var p=(t>ASprite._customGraphicsClipY)?t:ASprite._customGraphicsClipY;var o=(s<ASprite._customGraphicsClipY+ASprite._customGraphicsClipH)?s:(ASprite._customGraphicsClipY+ASprite._customGraphicsClipH);if(r>q||p>o){return}var k=c>>24&255;if(k==0){return}var h=q-r;var f=o-p;var F=w-h;var E=p*w+r-1;g=f;if(k==255){while(--g>=0){j=h;while(--j>=0){i[++E]=c}E+=F}}else{var D=c&16711935;var C=c&65280;if(l==0){var B=255-k;while(--g>=0){j=h;while(--j>=0){++E;i[E]=(-16777216|(D+(((i[E]&16711935)-D)*B>>8)&16711935)|(C+(((i[E]&65280)-C)*B>>8)&65280))}E+=F}}else{while(--g>=0){j=h;while(--j>=0){++E;var A=i[E]>>24&255;if(A==0){i[E]=c}else{if(A==255){k=255-k;i[E]=(-16777216|(D+(((i[E]&16711935)-D)*k>>8)&16711935)|(C+(((i[E]&65280)-C)*k>>8)&65280))}else{var z=65025-(255-A)*(255-k)>>8;if(z==0){i[E]=0}else{var y=(255-k)*A;var x=gloft.casttoint(((c>>16&255)*k+(y*(i[E]>>16&255)>>8))/z);var v=gloft.casttoint(((c>>8&255)*k+(y*(i[E]>>8&255)>>8))/z);var a=gloft.casttoint(((c&255)*k+(y*(i[E]&255)>>8))/z);if(x>255){x=255}if(v>255){v=255}if(a>255){a=255}i[E]=(z<<24|x<<16|v<<8|a)}}}}E+=F}}}};ASprite.DrawRectARGB=function(i,a,h,g,f,e,d,c,b){ASprite.DrawLineARGB(i,a,h,g,f,e,f+d,e,b);ASprite.DrawLineARGB(i,a,h,g,f,e,f,e+c,b);ASprite.DrawLineARGB(i,a,h,g,f+d,e,f+d,e+c,b);ASprite.DrawLineARGB(i,a,h,g,f,e+c,f+d,e+c,b)};ASprite.CopyArea=function(k,a,i,q,h,g,f,e,d,c){if(q==null){GLLib.Assert(false,"CopyArea: Target is null!")}if(k==null){GLLib.Assert(false,"CopyArea: Source is null!")}if(q==k){GLLib.Assert(false,"CopyArea: Target is same as Source!")}if(q.length<d*c){GLLib.Assert(false,"CopyArea: Target array is smaller than the dimensions indicate!")}if(k.length<a*i){GLLib.Assert(false,"CopyArea: Target array is smaller than the dimensions indicate!")}var b=(f>0)?f:0;var p=(f+d<a)?(f+d):a;var o=(e>0)?e:0;var m=(e+c<i)?(e+c):i;if(b>p||o>m){return}var l=d-(p-b)+(c-(m-o))*g-1+h;var j=f+d-(p-b)+(e+c-(m-o))*a-1;d=p-b;e=m-o;while(--e>=0){f=d;while(--f>=0){q[++l]=k[++j]}l+=g-d;j+=a-d}};ASprite.DrawLineARGB=function(m,T,F,E,D,C,B,A,z){if(m==null){GLLib.Assert(false,"DrawLineARGB: Target is null!")}if(m.length<T*F){GLLib.Assert(false,"DrawLineARGB: Target array is smaller than the dimensions indicate!")}var y=z>>24&255;if(y==0){return}var Q=(ASprite._customGraphicsClipX>0)?ASprite._customGraphicsClipX:0;var O=(ASprite._customGraphicsClipX+ASprite._customGraphicsClipW<T)?(ASprite._customGraphicsClipX+ASprite._customGraphicsClipW):T;var N=(ASprite._customGraphicsClipY>0)?ASprite._customGraphicsClipY:0;var M=(ASprite._customGraphicsClipY+ASprite._customGraphicsClipH<F)?(ASprite._customGraphicsClipY+ASprite._customGraphicsClipH):F;--O;--M;if(((D>B)?D:B)<Q||((D<B)?D:B)>O||((C>A)?C:A)<N||((C<A)?C:A)>M){return}var L=B-D;var K=A-C;var V=false;if(((K<0)?(-K):K)>((L<0)?(-L):L)){V=true;var J=D;D=C;C=J;var I=B;B=A;A=I;var H=Q;Q=N;N=H;var G=O;O=M;M=G}if(D>B){var x=D;D=B;B=x;var w=C;C=A;A=w}var v=B-D;var u=(A-C<0)?(-(A-C)):(A-C);var t=gloft.casttoint(v/2);var s=(C<A)?1:-1;if(D<Q){for(var U=D;U<Q;++U){t-=u;if(t<0){C+=s;t+=v}}D=Q}while(C<N||C>M){++D;t-=u;if(t<0){C+=s;t+=v}}B=((B<O)?B:O);B-=D-1;var r=gloft.casttoint(null);var q=gloft.casttoint(null);var p=gloft.casttoint(null);if(V){r=D*T+C;q=T;p=s}else{r=C*T+D;q=1;p=((s>0)?T:(-T))}if(y==255){while(--B>=0){m[r]=z;r+=q;t-=u;if(t<0){C+=s;r+=p;t+=v;if(C<N){break}if(C>M){break}continue}}}else{if(E==0){while(--B>=0){var o=-16777216;var l=m[r]&16711935;var k=o|(l+(((z&16711935)-l)*y>>8)&16711935);var j=m[r]&65280;m[r]=(k|(j+(((z&65280)-j)*y>>8)&65280));r+=q;t-=u;if(t<0){C+=s;r+=p;t+=v;if(C<N||C>M){break}continue}}}else{while(--B>=0){var h=m[r]>>24&255;if(h==0){m[r]=z}else{if(h==255){var g=-16777216;var f=m[r]&16711935;var e=g|(f+(((z&16711935)-f)*y>>8)&16711935);var d=m[r]&65280;m[r]=(e|(d+(((z&65280)-d)*y>>8)&65280))}else{var c=65025-(255-h)*(255-y)>>8;if(c==0){m[r]=0}else{var a=(255-y)*h;var S=gloft.casttoint(((z>>16&255)*y+(a*(m[r]>>16&255)>>8))/c);var R=gloft.casttoint(((z>>8&255)*y+(a*(m[r]>>8&255)>>8))/c);var P=gloft.casttoint(((z&255)*y+(a*(m[r]&255)>>8))/c);if(S>255){S=255}if(R>255){R=255}if(P>255){P=255}m[r]=(c<<24|S<<16|R<<8|P)}}}r+=q;t-=u;if(t<0){C+=s;r+=p;t+=v;if(C<N){break}if(C>M){break}continue}}}}};ASprite.InitCrcTable=function(){if(false||false){if(false){ASprite._png_result=gloft.ArrayCreation([256],gloft.casttobyte(null))}for(var b=0;b<256;++b){var c=b;for(var a=8;a>0;--a){if((c&1)==1){c=(c>>>1^-306674912)}else{c>>>=1}}ASprite.crcTable[b]=c}}};ASprite.PutArray=function(a){if(false){java.lang.System.arraycopy(a,0,ASprite._png_result,ASprite._png_size,a.length);ASprite._png_size+=a.length}};ASprite.PutInt=function(a){if(false){ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((a>>24&255));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((a>>16&255));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((a>>8&255));ASprite._png_result[ASprite._png_size++]=gloft.casttobyte((a&255))}};ASprite.Crc32=function(d,c,b,a){if(false||false){a^=-1;while(b--!=0){a=(ASprite.crcTable[(a^d[c++])&255]^a>>>8)}return ~a}return 0};ASprite.Adler32=function(g,f,e,d){if(false){var c=g&65535;var b=g>>16&65535;while(d>0){var a=(d<5552)?d:5552;d-=a;while(a-->0){c+=(f[e++]&255);b+=c}c%=65521;b%=65521}return b<<16|c}return 0};ASprite.InitGlobalScaling=function(e,h,g,f,a){if(false){ASprite.s_originalWidth=e;ASprite.s_originalHeight=h;if(a){if(((g<0)?-1:1)<0||((f<0)?-1:1)<0){GLLib.Dbg("InitGlobalScaling: Can't use negative shifts! Can only scale up!");return}ASprite.s_resizeUseShifts=true;ASprite.s_resizeShiftX=g;ASprite.s_resizeShiftY=f;ASprite.s_resizedWidth=ASprite.s_originalWidth<<ASprite.s_resizeShiftX;ASprite.s_resizedHeight=ASprite.s_originalHeight<<ASprite.s_resizeShiftY}else{ASprite.s_resizedWidth=g;ASprite.s_resizedHeight=f}if(!false){if(ASprite.transform_int!=null){ASprite.transform_int=null}var d=35000;var c=false?(ASprite.s_resizeUseShifts?(d<<ASprite.s_resizeShiftX):(gloft.casttoint(d*ASprite.s_resizedWidth/ASprite.s_originalWidth))):d;ASprite.transform_int=gloft.ArrayCreation([false?(ASprite.s_resizeUseShifts?(c<<ASprite.s_resizeShiftY):(gloft.casttoint(c*ASprite.s_resizedHeight/ASprite.s_originalHeight))):c],gloft.casttoint(null))}ASprite.s_resizeOn=true}};ASprite.InitBufferScaling=function(d,c,a){if(false&&false){ASprite.s_originalWidth=GLLib.s_screenWidth;ASprite.s_originalHeight=GLLib.s_screenHeight;if(a){if(((d<0)?-1:1)<0||((c<0)?-1:1)<0){GLLib.Dbg("InitBufferScaling: Can't use negative shifts! Can only scale up!");return}ASprite.s_resizeUseShifts=true;ASprite.s_resizeShiftX=d;ASprite.s_resizeShiftY=c;ASprite.s_resizedWidth=ASprite.s_originalWidth<<ASprite.s_resizeShiftX;ASprite.s_resizedHeight=ASprite.s_originalHeight<<ASprite.s_resizeShiftY}else{ASprite.s_resizedWidth=d;ASprite.s_resizedHeight=c}ASprite.s_resizeSrcBuffer=gloft.ArrayCreation([ASprite.s_originalWidth*ASprite.s_originalHeight],gloft.casttoint(null));ASprite.s_resizeDstBuffer=gloft.ArrayCreation([ASprite.s_resizedWidth*ASprite.s_resizedHeight],gloft.casttoint(null))}else{GLLib.Dbg("InitBufferScaling: Must set useSoftwareDoubleBuffer and useSoftwareDoubleBufferScaling to TRUE!")}};ASprite.ScaleAndBlitBuffer=function(m,t){if(false&&false){if(ASprite.s_resizedWidth==0&&ASprite.s_resizedHeight==0){GLLib.Dbg("ScaleAndBlitBuffer: Must call InitBufferScaling before this will work!");return}if(t==null){GLLib.Dbg("ScaleAndBlitBuffer: Incoming buffer is null!");return}GLLib.GetRGB(t,ASprite.s_resizeSrcBuffer,0,ASprite.s_originalWidth,0,0,ASprite.s_originalWidth,ASprite.s_originalHeight);if(ASprite.s_resizeUseShifts){if(ASprite.s_resizeShiftX==1&&ASprite.s_resizeShiftY==1){var o=0;var a=ASprite.s_originalWidth*ASprite.s_originalHeight;var s=ASprite.s_originalWidth<<1;var r=0;var q=s;var p=ASprite.s_originalWidth;while(o<a){var h=ASprite.s_resizeSrcBuffer[o++];ASprite.s_resizeDstBuffer[r++]=h;ASprite.s_resizeDstBuffer[r++]=h;ASprite.s_resizeDstBuffer[q++]=h;ASprite.s_resizeDstBuffer[q++]=h;if(--p==0){r+=s;q+=s;p=ASprite.s_originalWidth}}}else{for(var g=ASprite.s_resizedHeight-1;g>=0;--g){var f=(g>>ASprite.s_resizeShiftY)*ASprite.s_originalWidth;var d=(g+1)*ASprite.s_resizedWidth-1;for(var e=ASprite.s_resizedWidth-1;e>=0;--e){ASprite.s_resizeDstBuffer[d--]=ASprite.s_resizeSrcBuffer[f+(e>>ASprite.s_resizeShiftX)]}}}}else{for(var c=ASprite.s_resizedHeight-1;c>=0;--c){var b=gloft.casttoint(c*ASprite.s_originalHeight/ASprite.s_resizedHeight)*ASprite.s_originalWidth;var v=(c+1)*ASprite.s_resizedWidth-1;for(var u=ASprite.s_resizedWidth-1;u>=0;--u){ASprite.s_resizeDstBuffer[v--]=ASprite.s_resizeSrcBuffer[b+gloft.casttoint(u*ASprite.s_originalWidth/ASprite.s_resizedWidth)]}}}m.drawRGB(ASprite.s_resizeDstBuffer,0,ASprite.s_resizedWidth,0,0,ASprite.s_resizedWidth,ASprite.s_resizedHeight,false)}else{GLLib.Dbg("ScaleAndBlitBuffer: Must set useSoftwareDoubleBuffer and useSoftwareDoubleBufferScaling to TRUE!")}};ASprite.InitCachePool=function(a){if(true){ASprite._poolCacheStack=gloft.ArrayCreation([a],gloft.casttoshort(null));ASprite._poolCacheSprites=gloft.ArrayCreation([a],null);ASprite._poolCacheStackIndex=gloft.ArrayCreation([a],gloft.casttoint(null));ASprite._poolCacheStackMax=gloft.ArrayCreation([a],gloft.casttoint(null))}};ASprite.InitPoolSize=function(c,b){if(true){ASprite._poolCacheStackMax[c]=b;ASprite._poolCacheStack[c]=gloft.ArrayCreation([b],gloft.casttoshort(null));ASprite._poolCacheSprites[c]=gloft.ArrayCreation([b],null);for(var a=0;a<ASprite._poolCacheStack[c].length;++a){ASprite._poolCacheStack[c][a]=-1}}};ASprite.ResetCachePool=function(a){if(true){ASprite._poolCacheStack[a]=null;ASprite._poolCacheSprites[a]=null;ASprite._poolCacheStackIndex[a]=0;ASprite._poolCacheStackMax[a]=0}};ASprite.BCI_DisableCacheParams=function(){if(ASprite.s_BCI_supportsCacheEffects){ASprite.s_BCI_effects=null}};ASprite.BCI_EnableReflectionCache=function(c,i,g,f,e,d,a,h){if(true){(ASprite.s_BCI_effects=gloft.ArrayCreation([10],gloft.casttoint(null)))[1]=(c?1:0);ASprite.s_BCI_effects[9]=i;ASprite.s_BCI_effects[2]=g;ASprite.s_BCI_effects[3]=f;ASprite.s_BCI_effects[4]=e;ASprite.s_BCI_effects[5]=-(100-d);ASprite.s_BCI_effects[6]=a;ASprite.s_BCI_effects[7]=h;ASprite.s_BCI_effects[0]=1}else{GLLib.Dbg("BCI_EnableReflectionCache: Not enabled, you must set sprite_useCacheEffectReflection to TRUE!")}};ASprite.BCI_GetReflectionCacheID=function(){if(true){if(ASprite.s_BCI_effects!=null&&ASprite.s_BCI_effects[0]==1){return ASprite.s_BCI_effects[9]}}else{GLLib.Dbg("BCI_GetReflectionCacheID: Not enabled, you must set sprite_useCacheEffectReflection to TRUE!")}return -1};ASprite.FreeFrameImageTempBuffer=function(){if(!false){GLLib.Assert(false,"FreeFrameImageTempBuffer: Why you need to clean this buffer if you are not using sprite_usePaletteIndexCache?")}ASprite._frame_image_temp=null};ASprite.SetTempBuffer=function(a){if(a instanceof Array){ASprite.temp_int=a}else{if(a instanceof Array){ASprite.temp_short=a}else{ASprite.temp_byte=a}}};ASprite.ConvertEncoding_I256_I256RLE_dup_ZaBII=function(a,i,h,e){if(i==null){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: in array is null!")}if(h+e>i.length){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: in array size does not match passed size and offset!")}var g=null;var c=gloft.casttoint(null);if(a){g=gloft.ArrayCreation([e],gloft.casttobyte(null));c=0}else{g=i;c=h}var d=ASprite.ConvertEncoding_I256_I256RLE_dup_aBIIaBI(i,h,e,g,c);var f=gloft.ArrayCreation([d],gloft.casttobyte(null));java.lang.System.arraycopy(g,0,f,0,d);return f};ASprite.ConvertEncoding_I256_I256RLE_dup_aBIIaBI=function(k,a,j,o,i){if(false){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: Needs optimizations for sprite_useNokiaUI. Please request this!")}if(k==null){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: in array is null!")}if(o==null){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: out array is null!")}if(a+j>k.length){GLLib.Assert(false,"ConvertEncoding_I256_I256RLE: in array size does not match passed size and offset!")}var h=0;var g=0;var m=-1;var p=ASprite.GetPixelBuffer_int_dup_aI(null);--a;var f=i;while(--j>=0){var l=k[++a];if(h==0){if(m==l){if(--g>0){o[f]=gloft.casttobyte((128|g));var e=-1;do{o[++f]=gloft.casttobyte(p[++e])}while(--g>0);++f}h=1;g=2}else{if(g==127){o[f]=gloft.casttobyte((128|g));var d=-1;do{o[++f]=gloft.casttobyte(p[++d])}while(--g>0);++f;g=0}p[g++]=l}}else{if(m!=l||g==127){o[f++]=gloft.casttobyte(g);o[f++]=m;h=0;p[0]=l;g=1}else{++g}}m=l}if(h==0){if(g>0){o[f]=gloft.casttobyte((128|g));var c=-1;do{o[++f]=gloft.casttobyte(p[++c])}while(--g>0);++f}}else{o[f++]=gloft.casttobyte(g);o[f++]=m}return f-i};ASprite.SetCharCanBreakLine=function(a){if(!false&&!false&&!false){GLLib.Dbg("SetCharCanBreakLine: will not have any effect unless sprite_useCanBreakLine, sprite_useBitmapFont, or sprite_useSystemFont are set.")}else{ASprite.k_cCanBreakLine=a}};ASprite.GetWrapInfo_LineStart=function(c,b){var a=2;if(true){++a}if(false){++a}return c[b*a+1]};ASprite.GetWrapInfo_LineWidth=function(c,b){var a=2;if(true){++a}if(false){++a}return c[b*a+2]};ASprite.GetWrapInfo_LineFormat=function(c,b){var a=2;if(true){++a}if(false){++a}return c[b*a+3]};ASprite.GetWrapInfo_LineHeight=function(e,d){var b=gloft.casttoint(null);if(true){var c=2;if(true){++c}if(false){++c}b=d*c+4}else{var a=2;if(true){++a}if(false){++a}b=d*a+3}return e[b]};ASprite.GetPageCharSize=function(c,b,a){b=((b<0)?0:((b>c[0])?c[0]:b));a=((a<0)?0:((a>c[0]-b)?(c[0]-b):a));return ASprite.GetWrapInfo_LineStart(c,b+a-1)-((b==0)?0:ASprite.GetWrapInfo_LineStart(c,b-1))};ASprite.EnableBidi=function(a){ASprite.s_useBidi=a};ASprite.StringTokenize=function(e,h,d,g,f){var a=0;f[0]=h-1;for(var b=h;b<d;++b){if(gloft.casttoint(e.charAt(b))==gloft.casttoint(g)){f[++a]=b}}f[++a]=d;return a};ASprite.GetChars=function(f,e,h,d){if(f==null){ASprite._itoa_buffer=gloft.ArrayCreation([33],gloft.casttochar(null));f=ASprite._itoa_buffer}var g=f.length;var c=g-1;var a=e<0;if(!a){e=-e}while(e<=-h){f[c--]=gloft.casttochar((48-e%h));e=gloft.casttoint(e/h)}f[c]=gloft.casttochar((48-e));while(g-c<d){f[--c]="0"}if(a){f[--c]="-"}return c};ASprite.UseLineBreakChar=function(a){ASprite._useLineBreakChar=a};ASprite.SpecifyLineBreakChar=function(a){ASprite._lineBreakChar=a};ASprite.GenPalette_dup_IaI=function(b,a){return ASprite.GenPalette_dup_IaIaI(b,a,gloft.ArrayCreation([a.length],gloft.casttoint(null)))};ASprite.GenPalette_dup_IaIaI=function(a,h,m){if(a<0){return h}if(a==0){return null}if((16&2)!=0&&a==1){for(var e=0;e<h.length;++e){m[e]=((h[e]|16724736)&-256)}}if((16&4)!=0&&a==2){for(var d=0;d<h.length;++d){m[d]=((h[d]|13311)&-16711681)}}if((16&8)!=0&&a==3){for(var c=0;c<h.length;++c){m[c]=((h[c]|0)&-16711936)}}if((16&16)!=0&&a==4){for(var b=0;b<h.length;++b){var g=gloft.casttoint((((h[b]&16711680)>>16)+((h[b]&65280)>>8)+(h[b]&255))/3)&255;m[b]=((h[b]&-16777216)|g<<16|g<<8|g)}}if((16&32)!=0&&a==5){for(var f=0;f<h.length;++f){m[f]=((h[f]&-16777216)|(h[f]&16515072)>>2|(h[f]&64512)>>2|(h[f]&252)>>2)}}return m};ASprite.GenPalette_dup_IaS=function(b,a){return ASprite.GenPalette_dup_IaSaS(b,a,gloft.ArrayCreation([a.length],gloft.casttoshort(null)))};ASprite.GenPaletteAsInt=function(b,a){return ASprite.GenPalette_dup_IaSaI(b,a,gloft.ArrayCreation([a.length],gloft.casttoint(null)))};ASprite.GenPalette_dup_IaSaS=function(a,h,m){if(a<0){return h}if(a==0){return null}if((16&2)!=0&&a==1){for(var e=0;e<h.length;++e){m[e]=gloft.casttoshort(((h[e]|3888)&65520))}}if((16&4)!=0&&a==2){for(var d=0;d<h.length;++d){m[d]=gloft.casttoshort(((h[d]|63)&61695))}}if((16&8)!=0&&a==3){for(var c=0;c<h.length;++c){m[c]=gloft.casttoshort(((h[c]|0)&61680))}}if((16&16)!=0&&a==4){for(var b=0;b<h.length;++b){var g=gloft.casttoint((((h[b]&3840)>>8)+((h[b]&240)>>4)+(h[b]&15))/3)&15;m[b]=gloft.casttoshort(((h[b]&61440)|g<<8|g<<4|g))}}if((16&32)!=0&&a==5){for(var f=0;f<h.length;++f){m[f]=gloft.casttoshort(((h[f]&61440)|(h[f]&3840)>>2|(h[f]&240)>>2|(h[f]&15)>>2))}}return m};ASprite.GenPalette_dup_IaSaI=function(d,c,b){if(d==0){return null}for(var a=0;a<c.length;++a){b[a]=(((c[a]&61440)<<12|(c[a]&3840)<<8|(c[a]&240)<<4|(c[a]&15))&-1)}if(d<0){return b}return ASprite.GenPalette_dup_IaIaI(d,b,b)};ASprite.SetOperationMode=function(a){if(a<0||a>=4){GLLib.Assert(false,"SetOperationMode: Invalid Mode: "+a)}if(a==1&&!false){GLLib.Assert(false,"SetOperationMode: Setting OPERATION_COMPUTERECT, but sprite_useOperationRect is FALSE!")}if(a==2&&!false){GLLib.Assert(false,"SetOperationMode: Setting OPERATION_RECORD, but sprite_useOperationRecord is FALSE!")}if(a==3&&!false){GLLib.Assert(false,"SetOperationMode: Setting OPERATION_MARK, but sprite_useOperationMark is FALSE!")}if(false||false||false){ASprite._operation=a}};ASprite.TransformRGB_dup_aIIIIaI=function(j,w,p,m,z){if((m&7)==0){return j}var y=null;if(z!=null){if(z.length<w*p){GLLib.Assert(false,"TransformRGB ERROR: The output_image buffer specified is not big enough")}y=z}else{y=ASprite.GetPixelBuffer_int_dup_aIII(j,w,p);if(y.length<w*p){GLLib.Assert(false,"TransformRGB ERROR: The output buffer specified is not big enough ("+w+" x "+p+" = "+w*p+" > "+y.length+")! (increase GLLibConfig.TMP_BUFFER_SIZE)")}}var k=0;var g=0;var d=w,a=p;switch(m&7){case 1:var f=w*p;var e=w*(p-1);while(--p>=0){while(--w>=0){y[--f]=j[e++]}w=d;e-=w<<1}break;case 2:var c=(p-1)*w;while(--p>=0){java.lang.System.arraycopy(j,g,y,c,w);c-=w;g+=w}break;case 3:for(var x=w*p-1;x>=0;y[k++]=j[x--]){}break;case 4:var b=w*p;while(--p>=0){var v=p;while(--w>=0){y[--b]=j[v];v+=a}w=d}break;case 5:var u=w*p;while(--p>=0){var t=a-1-p;while(--w>=0){y[--u]=j[t];t+=a}w=d}break;case 6:var s=w*p;var r=s-1;while(--p>=0){var q=r--;while(--w>=0){y[--s]=j[q];q-=a}w=d}break;case 7:var o=w*p;var l=o-p;while(--p>=0){var h=l++;while(--w>=0){y[--o]=j[h];h-=a}w=d}break}return y};ASprite.GetPixelBuffer_int_dup_aIII=function(d,c,a){var b=null;if(false){b=ASprite.GetPixelBuffer_int_dup_aI(null);if(b==d){b=gloft.ArrayCreation([c*a],gloft.casttoint(null))}}else{b=ASprite.GetPixelBuffer_int_dup_aI(d)}return b};ASprite.TransformRGB_dup_aSIIIaS=function(g,v,m,k,x){if((k&7)==0){return g}var q=null;if(x!=null){if(x.length<v*m){GLLib.Assert(false,"TransformRGB ERROR: The output_image buffer specified is not big enough")}q=x}else{q=ASprite.GetPixelBuffer_short_dup_aSII(g,v,m);if(q.length<v*m){GLLib.Assert(false,"TransformRGB ERROR: The output buffer specified is not big enough ("+v+" x "+m+" = "+v*m+" > "+q.length+")! (increase GLLibConfig.TMP_BUFFER_SIZE)")}}var h=0;var e=0;switch(k&7){case 1:var d=v*m;var c=v*(m-1);while(--m>=0){while(--v>=0){q[--d]=g[c++]}c-=v<<1}break;case 2:var b=(m-1)*v;while(--m>=0){java.lang.System.arraycopy(g,e,q,b,v);b-=v;e+=v}break;case 3:for(var w=v*m-1;w>=0;q[h++]=g[w--]){}break;case 4:var a=v*m;while(--m>=0){var u=m;while(--v>=0){q[--a]=g[u];u+=m}}break;case 5:var t=v*m;while(--m>=0){var s=m-1-m;while(--v>=0){q[--t]=g[s];s+=m}}break;case 6:var r=v*m;var p=r-1;while(--m>=0){var o=p--;while(--v>=0){q[--r]=g[o];o-=m}}break;case 7:var l=v*m;var j=l-m;while(--m>=0){var f=j++;while(--v>=0){q[--l]=g[f];f-=m}}break}return q};ASprite.GetPixelBuffer_short_dup_aSII=function(d,c,a){var b=null;if(false){b=ASprite.GetPixelBuffer_short_dup_aS(null);if(b==d){b=gloft.ArrayCreation([c*a],gloft.casttoshort(null))}}else{b=ASprite.GetPixelBuffer_short_dup_aS(d)}return b};ASprite.TransformRGB_dup_aBIIIaB=function(g,u,m,k,x){if((k&7)==0){return g}var w=null;if(x!=null){if(x.length<u*m){GLLib.Assert(false,"TransformRGB ERROR: The output_image buffer specified is not big enough")}w=x}else{w=ASprite.GetPixelBuffer_byte_dup_aBII(g,u,m);if(w.length<u*m){GLLib.Assert(false,"TransformRGB ERROR: The output buffer specified is not big enough ("+u+" x "+m+" = "+u*m+" > "+w.length+")! (increase GLLibConfig.TMP_BUFFER_SIZE)")}}var h=0;var e=0;switch(k&7){case 1:var d=u*m;var c=u*(m-1);while(--m>=0){while(--u>=0){w[--d]=g[c++]}c-=u<<1}break;case 2:var b=(m-1)*u;while(--m>=0){java.lang.System.arraycopy(g,e,w,b,u);b-=u;e+=u}break;case 3:for(var v=u*m-1;v>=0;w[h++]=g[v--]){}break;case 4:var a=u*m;while(--m>=0){var t=m;while(--u>=0){w[--a]=g[t];t+=m}}break;case 5:var s=u*m;while(--m>=0){var r=m-1-m;while(--u>=0){w[--s]=g[r];r+=m}}break;case 6:var q=u*m;var p=q-1;while(--m>=0){var o=p--;while(--u>=0){w[--q]=g[o];o-=m}}break;case 7:var l=u*m;var j=l-m;while(--m>=0){var f=j++;while(--u>=0){w[--l]=g[f];f-=m}}break}return w};ASprite.GetPixelBuffer_byte_dup_aBII=function(d,c,a){var b=null;if(false){b=ASprite.GetPixelBuffer_byte_dup_aB(null);if(b==d){b=gloft.ArrayCreation([c*a],gloft.casttobyte(null))}}else{b=ASprite.GetPixelBuffer_byte_dup_aB(d)}return b};ASprite.AssertFlags=function(a){if(true){if(!false&&(a&2)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_MODULES_XY but sprite_useModuleXY is FALSE!")}if(!true&&(a&16)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_MODULES_WH_SHORT but sprite_useModuleWHShort is FALSE!")}if(!true&&(a&32)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_MODULES_XY_SHORT but sprite_useModuleXYShort is FALSE!")}if(!false&&(a&64)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_MODULES_USAGE but sprite_useModuleUsageFromSprite is FALSE!")}if(!false&&!true&&(a&1024)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_FM_OFF_SHORT but sprite_useFMOffShort and sprite_allowFMOffShort are FALSE! Enable only one of them.")}if(!false&&(a&8192)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_FRAME_COLL_RC but sprite_useFrameCollRC is FALSE!")}if(!true&&(a&16384)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_FM_PALETTE but sprite_useFMPalette is FALSE!")}if(!true&&(a&32768)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_FRAME_RECTS but sprite_useFrameRects is FALSE!")}if(!true&&(a&262144)!=0){GLLib.Assert(false,"Sprite Flag Error: Using BS_AF_OFF_SHORT but sprite_useAfOffShort is FALSE!")}if(false&&(a&4096)==0){GLLib.Assert(false,"Sprite Flag Error: sprite_alwaysBsSkipFrameRc is TRUE but this sprite does not have BS_SKIP_FRAME_RC set!")}if(!false&&(a&8)!=0){GLLib.Assert(false,"Sprite Flag Error: sprite has RAW format but this is not enabled, please set sprite_allowRAWSprites to TRUE")}if(!false&&!true&&(a&1048576)!=0){GLLib.Assert(false,"Sprite Flag Error: sprite has BS_FM_INDEX_SHORT flag set but this is not enabled, please set sprite_forceShortIndexForFModules or sprite_allowShortIndexForFModules to TRUE")}if(true&&!true){GLLib.Assert(false,"Sprite Flag Error: configuration does not support bsprite flags but you are using sprite_allowShortIndexForFModules! Either enable bsprite flags or use sprite_forceShortIndexForFModules instead.")}if(!false&&!true&&(a&2048)!=0){GLLib.Assert(false,"Sprite Flag Error: sprite has BS_NFM_SHORT flag set but this is not enabled, please set sprite_forceShortNumOfFModules or sprite_allowShortNumOfFModules to TRUE")}if(true&&!true){GLLib.Assert(false,"Sprite Flag Error: configuration does not support bsprite flags but you are using sprite_allowShortNumOfFModules! Either enable bsprite flags or use sprite_forceShortNumOfFModules instead.")}if(!false&&!true&&(a&2097152)!=0){GLLib.Assert(false,"Sprite Flag Error: sprite has BS_AF_INDEX_SHORT flag set but this is not enabled, please set sprite_forceShortIndexForAFrames or sprite_allowShortIndexForAFrames to TRUE")}if(true&&!true){GLLib.Assert(false,"Sprite Flag Error: configuration does not support bsprite flags but you are using sprite_allowShortIndexForAFrames! Either enable bsprite flags or use sprite_forceShortIndexForAFrames instead.")}if(!false&&!true&&(a&524288)!=0){GLLib.Assert(false,"Sprite Flag Error: sprite has BS_NAF_SHORT flag set but this is not enabled, please set sprite_forceShortNumOfAFrames or sprite_allowShortNumOfAFrames to TRUE")}if(true&&!true){GLLib.Assert(false,"Sprite Flag Error: configuration does not support bsprite flags but you are using sprite_allowShortNumOfAFrames! Either enable bsprite flags or use sprite_forceShortNumOfAFrames instead.")}if(!false&&(a&4194304)!=0){GLLib.Assert(false,"Sprite Flag Error: Using Extra Flags but sprite_useBSpriteExtraFlags is FALSE!")}}};ASprite.AssertExtraFlags0=function(a){if(false){if((a&~16)!=0){GLLib.Dbg("Sprite Extra Flags Warning: flags 0x"+a.toString(16)+" are still not supported by GLLib.")}if(!false&&(a&16)!=0){GLLib.Assert(false,"Sprite Extra Flag Error: Using BS_FM_BLEND_MODE but sprite_useFMBlendMode is FALSE!")}}};ASprite.MAGIC=[-119,80,78,71,13,10,26,10];ASprite.IHDR=[73,72,68,82];ASprite.PLTE=[80,76,84,69];ASprite.tRNS=[116,82,78,83];ASprite.IDAT=[73,68,65,84];ASprite.IEND=[73,69,78,68];ASprite.INFO32=[8,6,0,0,0];ASprite.INFO8=[8,3,0,0,0];ASprite.MAGIC_IEND=[0,0,0,0,73,69,78,68,-82,66,96,-126];ASprite.MAGIC_IDAT_h=[120,-100,1];ASprite.crcTable=gloft.ArrayCreation([256],gloft.casttoint(null));ASprite.InitCrcTable();ASprite.s_resizeOn=false;ASprite.s_resizeUseShifts=false;ASprite.s_resizedWidth=0;ASprite.s_resizedHeight=0;ASprite.s_BCI_supportsCacheEffects=true;ASprite.s_BCI_effects=null;ASprite.s_isConvertEncodeTMPBufOn=false;ASprite.s_convertEncodeTMPBuffer=null;ASprite._index1=-1;ASprite._index2=-1;ASprite._indexMax=-1;ASprite.record_index=-1;ASprite.record_frame=-1;ASprite._operation=0;ASprite._graphicsWidth=640;ASprite._graphicsHeight=360;ASprite._renderToTilesetBackBufferEnabled=0;ASprite.mem=0;ASprite.midp2_flags=[0,2,1,3,5,7,4,6];ASprite.TRANSFORM_FLIP_X=[1,0,3,2,6,7,4,5];ASprite.TRANSFORM_FLIP_Y=[2,3,0,1,5,4,7,6];ASprite.TRANSFORM_ROT_90=[4,5,6,7,3,2,1,0];ASprite.s_rc=gloft.ArrayCreation([4],gloft.casttoint(null));ASprite.s_gcEnabled=true;ASprite.s_debugSkipPaintModule=false;ASprite.k_cCanBreakLine="|";ASprite.s_drawTextBottomToTop=false;ASprite.m_bMarkerCallbackEnabled=false;ASprite.m_bMarkerCallbackID=-1;ASprite.m_bMarkerCallbackLastID=-1;