"use strict";var DigestRandomGenerator=gloft.Class.extend({stateCounter:gloft.casttolong(null),seedCounter:gloft.casttolong(null),state:null,seed:null,xBuf:null,xBufOff:gloft.casttoint(null),byteCount:gloft.casttolong(null),H1:gloft.casttoint(null),H2:gloft.casttoint(null),H3:gloft.casttoint(null),H4:gloft.casttoint(null),H5:gloft.casttoint(null),X:null,xOff:gloft.casttoint(null),ctor:function(){this.X=gloft.ArrayCreation([80],gloft.casttoint(null));this.xBuf=gloft.ArrayCreation([4],gloft.casttobyte(null));this.xBufOff=0;this.Digest_Reset();this.seed=gloft.ArrayCreation([this.Digest_getDigestSize()],gloft.casttobyte(null));this.seedCounter=1;this.state=gloft.ArrayCreation([this.Digest_getDigestSize()],gloft.casttobyte(null));this.stateCounter=1},addSeedMaterial_dup_aB:function(a){this.Digest_Update(a,0,a.length);this.Digest_Update(this.seed,0,this.seed.length);this.Digest_DoFinal(this.seed,0)},addSeedMaterial_dup_J:function(a){this.Digest_AddCounter(a);this.Digest_Update(this.seed,0,this.seed.length);this.Digest_DoFinal(this.seed,0)},nextBytes_dup_aB:function(a){this.nextBytes_dup_aBII(a,0,a.length)},nextBytes_dup_aBII:function(f,e,d){var b=0;this.generateState();for(var a=e+d,c=e;c!=a;++c){if(b==this.state.length){this.generateState();b=0}f[c]=this.state[b++]}},cycleSeed:function(){this.Digest_Update(this.seed,0,this.seed.length);this.Digest_AddCounter(this.seedCounter++);this.Digest_DoFinal(this.seed,0)},generateState:function(){this.Digest_AddCounter(this.stateCounter++);this.Digest_Update(this.state,0,this.state.length);this.Digest_Update(this.seed,0,this.seed.length);this.Digest_DoFinal(this.state,0);if(this.stateCounter%DigestRandomGenerator.CYCLE_COUNT==0){this.cycleSeed()}},Digest_AddCounter:function(b){for(var a=0;a!=8;++a){this.Digest_update(gloft.casttobyte(b));b>>>=8}},Digest_getDigestSize:function(){return 20},Digest_processWord:function(b,a){this.X[this.xOff]=(b[a]<<24|(b[++a]&255)<<16|(b[++a]&255)<<8|(b[++a]&255));if(++this.xOff==16){this.Digest_processBlock()}},Digest_processLength:function(a){if(this.xOff>14){this.Digest_processBlock()}this.X[14]=gloft.casttoint((a>>>32));this.X[15]=gloft.casttoint((a&-1))},Digest_DoFinal:function(b,a){this.Digest_finish();GLLib.IntToBigEndian(this.H1,b,a);GLLib.IntToBigEndian(this.H2,b,a+4);GLLib.IntToBigEndian(this.H3,b,a+8);GLLib.IntToBigEndian(this.H4,b,a+12);GLLib.IntToBigEndian(this.H5,b,a+16);this.Digest_Reset();return 20},Digest_finish:function(){var a=this.byteCount<<3;this.Digest_update(gloft.casttobyte((-128)));while(this.xBufOff!=0){this.Digest_update(gloft.casttobyte(0))}this.Digest_processLength(a);this.Digest_processBlock()},Digest_Reset:function(){this.byteCount=0;this.xBufOff=0;for(var b=0;b<this.xBuf.length;++b){this.xBuf[b]=0}this.H1=1732584193;this.H2=-271733879;this.H3=-1732584194;this.H4=271733878;this.H5=-1009589776;this.xOff=0;for(var a=0;a!=this.X.length;++a){this.X[a]=0}},f:function(c,b,a){return(c&b)|(~c&a)},h:function(c,b,a){return c^b^a},g:function(c,b,a){return(c&b)|(c&a)|(b&a)},Digest_processBlock:function(){for(var H=16;H<80;++H){var x=this.X[H-3]^this.X[H-8]^this.X[H-14]^this.X[H-16];this.X[H]=(x<<1|x>>>31)}var G=this.H1;var D=this.H2;var B=this.H3;var A=this.H4;var y=this.H5;var q=0;for(var E=0;E<4;++E){var o=y+((G<<5|G>>>27)+this.f(D,B,A)+this.X[q++]+1518500249);var h=D<<30|D>>>2;var f=A+((o<<5|o>>>27)+this.f(G,h,B)+this.X[q++]+1518500249);var d=G<<30|G>>>2;var c=B+((f<<5|f>>>27)+this.f(o,d,h)+this.X[q++]+1518500249);y=(o<<30|o>>>2);D=h+((c<<5|c>>>27)+this.f(f,y,d)+this.X[q++]+1518500249);A=(f<<30|f>>>2);G=d+((D<<5|D>>>27)+this.f(c,A,y)+this.X[q++]+1518500249);B=(c<<30|c>>>2)}for(var C=0;C<4;++C){var b=y+((G<<5|G>>>27)+this.h(D,B,A)+this.X[q++]+1859775393);var a=D<<30|D>>>2;var w=A+((b<<5|b>>>27)+this.h(G,a,B)+this.X[q++]+1859775393);var v=G<<30|G>>>2;var u=B+((w<<5|w>>>27)+this.h(b,v,a)+this.X[q++]+1859775393);y=(b<<30|b>>>2);D=a+((u<<5|u>>>27)+this.h(w,y,v)+this.X[q++]+1859775393);A=(w<<30|w>>>2);G=v+((D<<5|D>>>27)+this.h(u,A,y)+this.X[q++]+1859775393);B=(u<<30|u>>>2)}for(var z=0;z<4;++z){var t=y+((G<<5|G>>>27)+this.g(D,B,A)+this.X[q++]-1894007588);var s=D<<30|D>>>2;var r=A+((t<<5|t>>>27)+this.g(G,s,B)+this.X[q++]-1894007588);var p=G<<30|G>>>2;var m=B+((r<<5|r>>>27)+this.g(t,p,s)+this.X[q++]-1894007588);y=(t<<30|t>>>2);D=s+((m<<5|m>>>27)+this.g(r,y,p)+this.X[q++]-1894007588);A=(r<<30|r>>>2);G=p+((D<<5|D>>>27)+this.g(m,A,y)+this.X[q++]-1894007588);B=(m<<30|m>>>2)}for(var g=0;g<=3;++g){var e=y+((G<<5|G>>>27)+this.h(D,B,A)+this.X[q++]-899497514);var L=D<<30|D>>>2;var K=A+((e<<5|e>>>27)+this.h(G,L,B)+this.X[q++]-899497514);var J=G<<30|G>>>2;var I=B+((K<<5|K>>>27)+this.h(e,J,L)+this.X[q++]-899497514);y=(e<<30|e>>>2);D=L+((I<<5|I>>>27)+this.h(K,y,J)+this.X[q++]-899497514);A=(K<<30|K>>>2);G=J+((D<<5|D>>>27)+this.h(I,A,y)+this.X[q++]-899497514);B=(I<<30|I>>>2)}this.H1+=G;this.H2+=D;this.H3+=B;this.H4+=A;this.H5+=y;this.xOff=0;for(var F=0;F<16;++F){this.X[F]=0}},Digest_update:function(a){this.xBuf[this.xBufOff++]=a;if(this.xBufOff==this.xBuf.length){this.Digest_processWord(this.xBuf,0);this.xBufOff=0}++this.byteCount},Digest_Update:function(c,b,a){while(this.xBufOff!=0&&a>0){this.Digest_update(c[b]);++b;--a}while(a>this.xBuf.length){this.Digest_processWord(c,b);b+=this.xBuf.length;a-=this.xBuf.length;this.byteCount+=this.xBuf.length}while(a>0){this.Digest_update(c[b]);++b;--a}},});DigestRandomGenerator.CYCLE_COUNT=gloft.casttolong(null);DigestRandomGenerator.DIGEST_LENGTH=20;DigestRandomGenerator.Y1=1518500249;DigestRandomGenerator.Y2=1859775393;DigestRandomGenerator.Y3=-1894007588;DigestRandomGenerator.Y4=-899497514;DigestRandomGenerator.CYCLE_COUNT=10;